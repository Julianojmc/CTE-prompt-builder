<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CTE AI Prompt Builder ¬∑ Educating For Careers 2026 ¬∑ Amplifying Multilingual Learners</title>
<style>
/* Offline font stack ‚Äî no external requests needed */
:root {
  --font-serif: Georgia, "Times New Roman", serif;
  --font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}
</style>
<style>
:root{--teal:#0d7b6e;--teal-light:#e0f5f2;--teal-mid:#1aab98;--orange:#e8601c;--orange-light:#fff3ed;--gold:#c9820a;--gold-light:#fdf3dc;--purple:#5c3d8f;--purple-light:#f0ebfb;--ink:#1a1a2e;--muted:#5a6070;--border:#d8dde6;--bg:#f6f8fb;--white:#ffffff;--radius:14px;--shadow:0 4px 24px rgba(13,123,110,.10);--shadow-sm:0 2px 10px rgba(13,123,110,.07)}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:var(--font-sans);background:var(--bg);color:var(--ink);min-height:100vh}
header{background:linear-gradient(135deg,#0d4f47 0%,#0d7b6e 50%,#1aab98 100%);padding:36px 40px 32px;position:relative;overflow:hidden}
header::before{content:'';position:absolute;top:-60px;right:-60px;width:280px;height:280px;background:rgba(255,255,255,.05);border-radius:50%}
header::after{content:'';position:absolute;bottom:-40px;left:30%;width:180px;height:180px;background:rgba(255,255,255,.04);border-radius:50%}
.hbadge{display:inline-flex;align-items:center;background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.25);border-radius:30px;padding:5px 14px;font-size:12px;color:rgba(255,255,255,.9);letter-spacing:.06em;text-transform:uppercase;margin-bottom:14px}
header h1{font-family:var(--font-serif);font-weight:800;font-size:clamp(26px,4vw,42px);color:#fff;line-height:1.1;margin-bottom:10px}
header h1 span{color:#a8f0e8;font-style:italic;font-weight:300}
header p{color:rgba(255,255,255,.80);font-size:15px;max-width:620px;line-height:1.6}
.htags{display:flex;flex-wrap:wrap;gap:8px;margin-top:18px}
.htag{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.20);border-radius:20px;padding:4px 12px;font-size:12px;color:rgba(255,255,255,.85)}
.fbar{background:var(--white);border-bottom:1px solid var(--border);padding:0 40px;display:flex;overflow-x:auto;position:sticky;top:0;z-index:100;box-shadow:0 2px 8px rgba(0,0,0,.06)}
.ptab{display:flex;align-items:center;gap:9px;padding:15px 18px;border-bottom:3px solid transparent;cursor:pointer;transition:all .2s;white-space:nowrap;font-size:13.5px;font-weight:500;color:var(--muted)}
.ptab:hover{color:var(--teal);background:var(--teal-light)}
.ptab.active{color:var(--teal);border-bottom-color:var(--teal);background:var(--teal-light)}
.pletter{width:28px;height:28px;border-radius:50%;background:var(--teal-light);color:var(--teal);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:13px}
.ptab.active .pletter{background:var(--teal);color:white}
.main{max-width:1180px;margin:0 auto;padding:32px 28px 80px;display:grid;grid-template-columns:1fr 390px;gap:26px;align-items:start}
.card{background:var(--white);border-radius:var(--radius);border:1px solid var(--border);overflow:hidden;box-shadow:var(--shadow-sm)}
.ch{padding:18px 22px 14px;border-bottom:1px solid var(--border);display:flex;align-items:flex-start;gap:13px}
.ci{width:42px;height:42px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.ch-text h2{font-family:var(--font-serif);font-weight:600;font-size:18px;margin-bottom:2px;display:flex;align-items:center;gap:8px}
.ch-text p{font-size:13px;color:var(--muted);line-height:1.5}
.cb{padding:20px 22px}
.hbtn{display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:50%;background:var(--teal-light);color:var(--teal);font-size:11px;font-weight:700;cursor:pointer;border:1.5px solid var(--teal);transition:all .15s;flex-shrink:0;user-select:none}
.hbtn:hover{background:var(--teal);color:white}
/* TOOLTIP */
.toverlay{display:none;position:fixed;inset:0;background:rgba(26,26,46,.45);z-index:9999;align-items:center;justify-content:center;padding:20px}
.toverlay.open{display:flex}
.tbox{background:white;border-radius:16px;max-width:520px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,.2);overflow:hidden;animation:popIn .2s ease}
@keyframes popIn{from{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}
.thdr{background:linear-gradient(135deg,#0d7b6e,#1aab98);padding:18px 22px;display:flex;align-items:center;justify-content:space-between}
.thdr h3{color:white;font-family:var(--font-serif);font-size:16px;font-weight:600}
.tclose{background:rgba(255,255,255,.2);border:none;color:white;width:28px;height:28px;border-radius:50%;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center}
.tbody{padding:20px 22px;max-height:75vh;overflow-y:auto}
.tbody p{font-size:14px;color:var(--muted);line-height:1.7;margin-bottom:10px}
.tbody h4{font-size:13px;font-weight:700;color:var(--ink);margin:12px 0 4px}
.ttip{background:var(--teal-light);border-left:3px solid var(--teal);border-radius:6px;padding:10px 14px;font-size:13px;color:#0a5c52;line-height:1.6;margin-top:12px}
.tex{background:var(--bg);border-radius:8px;padding:10px 14px;font-size:12.5px;color:var(--ink);font-style:italic;margin-top:8px;border:1px solid var(--border)}
.tcombine{background:#fff3ed;border-left:3px solid var(--orange);border-radius:6px;padding:10px 14px;font-size:13px;color:#7a3010;line-height:1.6;margin-top:8px}
/* FORM */
.fr{margin-bottom:16px}
.fr:last-child{margin-bottom:0}
label{display:flex;align-items:center;gap:7px;font-size:13px;font-weight:600;color:var(--ink);margin-bottom:6px;flex-wrap:wrap}
.req{color:var(--orange)}
.hint{font-weight:400;color:var(--muted);font-size:12px}
select,input[type=text],textarea{width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:9px;font-family:var(--font-sans);font-size:14px;color:var(--ink);background:var(--white);transition:border-color .2s,box-shadow .2s;appearance:none}
select:focus,input[type=text]:focus,textarea:focus{outline:none;border-color:var(--teal);box-shadow:0 0 0 3px rgba(13,123,110,.10)}
select{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%235a6070' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center;padding-right:38px}
textarea{resize:vertical;min-height:78px;line-height:1.5}
.cg{display:flex;flex-wrap:wrap;gap:7px}
.chip{padding:6px 13px;border-radius:20px;border:1.5px solid var(--border);background:var(--white);font-size:12.5px;cursor:pointer;transition:all .18s;color:var(--muted);font-family:var(--font-sans);font-weight:500}
.chip:hover{border-color:var(--teal);color:var(--teal);background:var(--teal-light)}
.chip.selected{border-color:var(--teal);background:var(--teal);color:white}
.chip.or:hover{border-color:var(--orange);color:var(--orange);background:var(--orange-light)}
.chip.or.selected{background:var(--orange);border-color:var(--orange);color:white}
.chip.go:hover{border-color:var(--gold);color:var(--gold);background:var(--gold-light)}
.chip.go.selected{background:var(--gold);border-color:var(--gold);color:white}
.chip.pu:hover{border-color:var(--purple);color:var(--purple);background:var(--purple-light)}
.chip.pu.selected{background:var(--purple);border-color:var(--purple);color:white}
.sdiv{display:flex;align-items:center;gap:10px;margin:20px 0 14px;font-size:11px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--muted)}
.sdiv::before,.sdiv::after{content:'';flex:1;height:1px;background:var(--border)}
.elbox{background:var(--purple-light);border:1.5px solid #c4b0e8;border-radius:10px;padding:14px 16px;margin-top:6px}
.elbox h4{font-size:12px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:var(--purple);margin-bottom:9px;display:flex;align-items:center;gap:7px}
.stag{display:inline-block;background:white;border:1px solid #c4b0e8;color:var(--purple);border-radius:6px;padding:4px 10px;font-size:12px;margin:3px;cursor:pointer;transition:all .15s}
.stag:hover,.stag.active{background:var(--purple);color:white;border-color:var(--purple)}
.cte-grid{display:grid;grid-template-columns:1fr 1fr;gap:7px;margin-top:6px}
.cel{display:flex;align-items:flex-start;gap:8px;padding:8px 10px;border-radius:8px;border:1.5px solid var(--border);cursor:pointer;transition:all .18s;background:var(--white)}
.cel:hover{border-color:var(--teal);background:var(--teal-light)}
.cel.selected{border-color:var(--teal);background:var(--teal-light)}
.celnum{width:22px;height:22px;background:var(--teal-light);color:var(--teal);border-radius:50%;font-size:11px;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.cel.selected .celnum{background:var(--teal);color:white}
.cellabel{font-size:12px;color:var(--muted);line-height:1.4}
.cel.selected .cellabel{color:var(--teal);font-weight:500}
.shdr{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-radius:8px;background:var(--bg);border:1.5px solid var(--border);cursor:pointer;font-size:13px;font-weight:600;margin-bottom:5px;transition:all .15s}
.shdr:hover,.shdr.open{border-color:var(--teal);background:var(--teal-light);color:var(--teal)}
.sbody{display:none;padding:10px 14px;border:1.5px solid var(--teal-light);border-radius:8px;margin-bottom:8px;background:white}
.sbody.open{display:block}
.callout{padding:12px 15px;border-radius:9px;font-size:13px;line-height:1.6;margin-top:10px;display:flex;gap:9px}
.ct{background:var(--teal-light);border-left:3px solid var(--teal);color:#0a5c52}
.co{background:var(--orange-light);border-left:3px solid var(--orange);color:#7a3010}
.cg2{background:var(--gold-light);border-left:3px solid var(--gold);color:#7a5208}
.gbtn{width:100%;padding:14px;background:linear-gradient(135deg,var(--teal),var(--teal-mid));color:white;border:none;border-radius:10px;font-family:var(--font-sans);font-size:15px;font-weight:700;cursor:pointer;transition:all .2s;margin-top:16px;box-shadow:0 4px 16px rgba(13,123,110,.28);letter-spacing:.02em}
.gbtn:hover{transform:translateY(-2px);box-shadow:0 6px 22px rgba(13,123,110,.38)}
.exbox{background:#f0faf8;border:1px dashed var(--teal-mid);border-radius:8px;padding:9px 13px;font-size:12px;color:var(--teal);margin-top:7px;line-height:1.5}
/* LANGUAGE PICKER */
.lang-picker{background:var(--teal-light);border:1.5px solid var(--teal);border-radius:12px;padding:14px 16px;margin-top:8px}
.lang-picker-label{font-size:11px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--teal);margin-bottom:10px;display:flex;align-items:center;gap:8px}
.lang-groups{display:flex;flex-direction:column;gap:8px}
.lang-group-title{font-size:10px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:var(--muted);margin-bottom:4px}
.lang-tags{display:flex;flex-wrap:wrap;gap:5px}
.ltag{padding:5px 11px;border-radius:14px;border:1.5px solid rgba(13,123,110,.3);background:white;font-size:12px;cursor:pointer;transition:all .15s;color:var(--teal);font-weight:500}
.ltag:hover{border-color:var(--teal);background:var(--teal);color:white;transform:scale(1.05)}
.ltag.picked{background:var(--teal);color:white;border-color:var(--teal)}
.lang-selected-wrap{margin-top:10px;padding-top:10px;border-top:1px solid rgba(13,123,110,.2)}
.lang-selected-title{font-size:11px;color:var(--teal);font-weight:600;margin-bottom:6px}
.lang-pills{display:flex;flex-wrap:wrap;gap:5px;min-height:28px}
.lpill{display:inline-flex;align-items:center;gap:5px;background:var(--teal);color:white;border-radius:12px;padding:4px 10px;font-size:12px;font-weight:500}
.lpill button{background:none;border:none;color:rgba(255,255,255,.8);cursor:pointer;font-size:13px;line-height:1;padding:0;display:flex;align-items:center}
.lpill button:hover{color:white}
.lang-custom-row{display:flex;gap:7px;margin-top:8px}
.lang-custom-row input{flex:1;padding:7px 12px;border:1.5px solid rgba(13,123,110,.3);border-radius:8px;font-size:13px;background:white;font-family:var(--font-sans);color:var(--ink)}
.lang-custom-row input:focus{outline:none;border-color:var(--teal)}
.lang-add-btn{padding:7px 14px;background:var(--teal);color:white;border:none;border-radius:8px;font-size:12px;font-weight:600;cursor:pointer;white-space:nowrap;font-family:var(--font-sans)}
.lang-add-btn:hover{background:#0a6058}
/* SIDEBAR */
.sidebar{position:sticky;top:62px}
.pcard{background:var(--ink);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow)}
.pcardh{background:linear-gradient(135deg,#0d7b6e,#1aab98);padding:16px 20px;display:flex;align-items:center;justify-content:space-between}
.pcardh h3{color:white;font-family:var(--font-serif);font-size:16px;font-weight:600}
.lbadge{background:rgba(255,255,255,.2);border:1px solid rgba(255,255,255,.3);border-radius:12px;padding:3px 10px;font-size:11px;color:white;display:flex;align-items:center;gap:5px}
.ldot{width:6px;height:6px;background:#a8f0e8;border-radius:50%;animation:pulse 1.5s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
.qwrap{padding:0 20px 14px}
.qlabel{font-size:11px;color:rgba(255,255,255,.5);margin-bottom:5px;display:flex;justify-content:space-between}
.qtrack{height:6px;background:rgba(255,255,255,.1);border-radius:3px;overflow:hidden}
.qfill{height:100%;border-radius:3px;background:linear-gradient(90deg,#e8601c,#c9820a,#1aab98);transition:width .5s ease}
.pout{padding:18px 20px;min-height:180px;font-size:13px;line-height:1.75;color:rgba(255,255,255,.88);white-space:pre-wrap;font-family:var(--font-sans);max-height:420px;overflow-y:auto}
.pout::-webkit-scrollbar{width:4px}
.pout::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);border-radius:4px}
.pph{color:rgba(255,255,255,.35);font-style:italic;font-size:14px;text-align:center;padding:36px 16px}
.pcf{padding:12px 20px;border-top:1px solid rgba(255,255,255,.08);display:flex;gap:9px}
.btn{flex:1;padding:9px 14px;border-radius:8px;font-family:var(--font-sans);font-size:13px;font-weight:600;cursor:pointer;border:none;transition:all .18s}
.bpri{background:var(--teal-mid);color:white}
.bpri:hover{background:#1ec5b0;transform:translateY(-1px)}
.bsec{background:rgba(255,255,255,.1);color:rgba(255,255,255,.85);border:1px solid rgba(255,255,255,.15)}
.bsec:hover{background:rgba(255,255,255,.18)}
/* PROGRESS */
.pdots{display:flex;align-items:center;gap:6px;margin-bottom:20px}
.pdot{width:10px;height:10px;border-radius:50%;background:var(--border);transition:all .25s;cursor:pointer}
.pdot.done{background:var(--teal-mid)}
.pdot.active{background:var(--teal);transform:scale(1.3);box-shadow:0 0 0 3px rgba(13,123,110,.2)}
.pline{flex:1;height:2px;background:var(--border);max-width:30px;transition:background .3s}
.pline.done{background:var(--teal-mid)}
.sp{display:none}.sp.active{display:block}
/* custom field */
.custom-or-row{margin-top:8px;display:flex;gap:7px}
.custom-or-row input{flex:1}
.custom-or-row-label{font-size:11px;color:var(--muted);margin-bottom:4px;font-style:italic}
@media(max-width:920px){.main{grid-template-columns:1fr}.sidebar{position:static}}
@media(max-width:580px){header{padding:24px 18px}.main{padding:18px 14px 60px}.fbar{padding:0 12px}.cte-grid{grid-template-columns:1fr}}
/* FOOTER */
.site-footer{background:var(--ink);color:rgba(255,255,255,.55);text-align:center;padding:22px 24px;font-size:12px;line-height:1.8;border-top:3px solid var(--teal)}
.site-footer strong{color:rgba(255,255,255,.85)}
.site-footer a{color:var(--teal-mid);text-decoration:none}
/* PASSWORD GATE */
#pw-gate{position:fixed;inset:0;background:linear-gradient(135deg,#0d4f47 0%,#0d7b6e 60%,#1aab98 100%);z-index:99999;display:flex;align-items:center;justify-content:center;padding:20px}
#pw-box{background:white;border-radius:20px;max-width:420px;width:100%;box-shadow:0 30px 80px rgba(0,0,0,.35);overflow:hidden;animation:popIn .3s ease}
.pw-hdr{background:linear-gradient(135deg,#0d4f47,#1aab98);padding:28px 28px 22px;text-align:center}
.pw-hdr .pw-icon{font-size:36px;margin-bottom:10px}
.pw-hdr h2{font-family:var(--font-serif);font-weight:800;font-size:22px;color:white;line-height:1.2;margin-bottom:6px}
.pw-hdr p{color:rgba(255,255,255,.8);font-size:13px;line-height:1.5}
.pw-body{padding:24px 28px 28px}
.pw-author{text-align:center;font-size:12px;color:var(--muted);margin-bottom:18px;padding-bottom:16px;border-bottom:1px solid var(--border)}
.pw-author strong{color:var(--ink);display:block;font-size:13px;margin-bottom:2px}
.pw-label{font-size:13px;font-weight:600;color:var(--ink);margin-bottom:8px;display:flex;align-items:center;gap:6px}
.pw-input-wrap{position:relative}
#pw-input{width:100%;padding:12px 46px 12px 16px;border:2px solid var(--border);border-radius:10px;font-size:15px;font-family:var(--font-sans);color:var(--ink);letter-spacing:.05em;transition:border-color .2s,box-shadow .2s}
#pw-input:focus{outline:none;border-color:var(--teal);box-shadow:0 0 0 3px rgba(13,123,110,.12)}
#pw-input.shake{animation:shake .4s ease}
#pw-toggle{position:absolute;right:14px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--muted);font-size:16px;padding:0}
.pin-display{display:flex;justify-content:center;gap:14px;margin:16px 0 10px}
.pin-dot{width:18px;height:18px;border-radius:50%;border:2.5px solid var(--border);background:white;transition:all .15s;display:block}
.pin-dot.filled{background:var(--teal);border-color:var(--teal);transform:scale(1.15)}
.pin-dot.shake-dot{animation:shake .4s ease}
.pin-pad{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:14px}
.pin-btn{padding:16px 10px;border:2px solid var(--border);border-radius:12px;background:white;font-family:var(--font-serif);font-size:22px;font-weight:600;color:var(--ink);cursor:pointer;transition:all .15s;line-height:1}
.pin-btn:hover{border-color:var(--teal);background:var(--teal-light);color:var(--teal);transform:scale(1.05)}
.pin-btn:active{transform:scale(.96)}
.pin-clr{font-family:var(--font-sans);font-size:18px;color:var(--muted)}
.pin-clr:hover{border-color:var(--orange);background:var(--orange-light);color:var(--orange)}
.pin-go{background:var(--teal);border-color:var(--teal);color:white;font-family:var(--font-sans);font-size:20px}
.pin-go:hover{background:#0a6058;border-color:#0a6058;color:white}
@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-6px)}80%{transform:translateX(6px)}}
#pw-error{color:#c0392b;font-size:12px;margin-top:7px;display:none;font-weight:500}
#pw-submit{width:100%;margin-top:16px;padding:13px;background:linear-gradient(135deg,var(--teal),var(--teal-mid));color:white;border:none;border-radius:10px;font-family:var(--font-sans);font-size:15px;font-weight:700;cursor:pointer;transition:all .2s;box-shadow:0 4px 16px rgba(13,123,110,.28);letter-spacing:.02em}
#pw-submit:hover{transform:translateY(-2px);box-shadow:0 6px 22px rgba(13,123,110,.38)}
.pw-hint{text-align:center;font-size:11.5px;color:var(--muted);margin-top:14px;line-height:1.6}
/* SAVE BUTTON */
.bsave{background:var(--gold);color:white;font-size:12px}
.bsave:hover{background:#b07408;transform:translateY(-1px)}
/* LIBRARY TAB */
.lib-tab:hover{color:var(--gold)!important;background:var(--gold-light)!important}
.lib-tab.active{color:var(--gold)!important;border-bottom-color:var(--gold)!important;background:var(--gold-light)!important}
.lib-tab.active .pletter,.lib-tab:hover .pletter{background:var(--gold)!important;color:white!important}
/* LIBRARY PANEL */
#lib-panel{position:fixed;inset:0;background:var(--bg);z-index:5000;overflow-y:auto;animation:fadeIn .2s ease}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.lib-wrap{max-width:1140px;margin:0 auto;padding-bottom:80px}
.lib-header{background:linear-gradient(135deg,#0d4f47,#0d7b6e,#1aab98);padding:28px 36px;display:flex;align-items:flex-start;justify-content:space-between;gap:20px;flex-wrap:wrap}
.lib-close{background:rgba(255,255,255,.15);border:1.5px solid rgba(255,255,255,.3);color:white;padding:10px 20px;border-radius:8px;font-family:var(--font-sans);font-size:13px;font-weight:600;cursor:pointer;transition:all .15s;white-space:nowrap;align-self:flex-start}
.lib-close:hover{background:rgba(255,255,255,.28)}
.lib-toolbar{padding:14px 36px;background:white;border-bottom:1px solid var(--border);display:flex;flex-wrap:wrap;gap:9px;align-items:center;position:sticky;top:0;z-index:10;box-shadow:0 2px 8px rgba(0,0,0,.04)}
.lib-search-wrap{flex:1;min-width:220px;position:relative}
.lib-search-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:14px;pointer-events:none}
#lib-search{width:100%;padding:9px 14px 9px 36px;border:1.5px solid var(--border);border-radius:9px;font-family:var(--font-sans);font-size:13.5px;color:var(--ink);transition:border-color .2s}
#lib-search:focus{outline:none;border-color:var(--teal);box-shadow:0 0 0 3px rgba(13,123,110,.1)}
.lib-filters{display:flex;flex-wrap:wrap;gap:7px;align-items:center}
.lib-filters select{padding:8px 30px 8px 11px;border:1.5px solid var(--border);border-radius:8px;font-family:var(--font-sans);font-size:12.5px;color:var(--ink);background:white;cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='7' viewBox='0 0 10 7'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%235a6070' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 9px center;transition:border-color .15s}
.lib-filters select:focus{outline:none;border-color:var(--teal)}
.lib-export-btn,.lib-clear-btn{padding:8px 13px;border-radius:8px;font-family:var(--font-sans);font-size:12px;font-weight:600;cursor:pointer;border:1.5px solid var(--border);background:white;color:var(--muted);transition:all .15s;white-space:nowrap}
.lib-export-btn:hover{border-color:var(--teal);color:var(--teal);background:var(--teal-light)}
.lib-clear-btn:hover{border-color:var(--orange);color:var(--orange);background:var(--orange-light)}
.lib-stats{padding:9px 36px;font-size:12.5px;color:var(--muted);background:var(--bg);border-bottom:1px solid var(--border)}
.lib-grid{padding:22px 36px;display:grid;grid-template-columns:repeat(auto-fill,minmax(290px,1fr));gap:15px}
.lib-empty{grid-column:1/-1;text-align:center;padding:70px 20px}
.lib-empty-title{font-family:var(--font-serif);font-size:20px;font-weight:600;color:var(--ink);margin-bottom:8px}
.lib-empty-sub{color:var(--muted);font-size:13.5px;line-height:1.7}
.lib-card{background:white;border:1.5px solid var(--border);border-radius:12px;overflow:hidden;cursor:pointer;transition:all .18s;display:flex;flex-direction:column}
.lib-card:hover{border-color:var(--teal);box-shadow:0 6px 24px rgba(13,123,110,.13);transform:translateY(-2px)}
.lib-card-hd{padding:14px 16px 10px;border-bottom:1px solid var(--border)}
.lib-card-title{font-family:var(--font-serif);font-weight:600;font-size:14.5px;color:var(--ink);margin-bottom:5px;line-height:1.35}
.lib-card-meta{font-size:11px;color:var(--muted);display:flex;gap:7px;flex-wrap:wrap}
.lib-card-preview{padding:9px 16px;font-size:12px;color:var(--muted);line-height:1.55;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;background:#fafbfc;flex:1}
.lib-card-tags{padding:7px 16px;display:flex;flex-wrap:wrap;gap:4px}
.lib-card-tag{background:var(--teal-light);color:var(--teal);border-radius:10px;padding:2px 9px;font-size:11px;font-weight:500}
.lib-card-actions{padding:9px 16px;display:flex;gap:6px;border-top:1px solid var(--border)}
.lib-card-btn{flex:1;padding:7px 8px;border-radius:7px;border:1.5px solid var(--border);background:white;font-family:var(--font-sans);font-size:12px;font-weight:600;cursor:pointer;transition:all .15s;color:var(--muted)}
.lib-card-btn:hover{border-color:var(--teal);color:var(--teal);background:var(--teal-light)}
.lib-card-btn.del:hover{border-color:var(--orange);color:var(--orange);background:var(--orange-light)}
/* MODALS */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(26,26,46,.5);z-index:6000;align-items:center;justify-content:center;padding:20px}
.modal-overlay.open{display:flex}
.modal-box{background:white;border-radius:16px;max-width:480px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,.22);overflow:hidden;animation:popIn .2s ease;max-height:90vh;overflow-y:auto}
.modal-hdr{background:linear-gradient(135deg,#0d7b6e,#1aab98);padding:16px 20px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0}
.modal-hdr h3{color:white;font-family:var(--font-serif);font-size:16px;font-weight:600}
.modal-body{padding:20px 22px 24px}
@media(max-width:920px){.lib-header{padding:20px 18px}.lib-toolbar{padding:12px 16px;position:static}.lib-grid{padding:16px}.lib-stats{padding:8px 16px}}
.chat-messages::-webkit-scrollbar{width:3px}
.chat-messages::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.chat-msg.user .chat-bubble{background:var(--teal);color:white;border-bottom-right-radius:4px}
.chat-msg.bot .chat-bubble{background:var(--bg);color:var(--ink);border-bottom-left-radius:4px;border:1px solid var(--border)}
.chat-q:hover{background:var(--teal);color:white;border-color:var(--teal)}
#chat-input:focus{outline:none;border-color:var(--teal);box-shadow:0 0 0 2px rgba(13,123,110,.08)}
@media(max-width:580px){.chat-panel{width:calc(100vw - 20px);right:10px}.lib-grid{padding:16px}.lib-toolbar{padding:12px 16px}.lib-header{padding:20px 18px}}
/* ROLE SWITCHER */
.role-switcher{display:flex;flex-direction:column;align-items:flex-end;gap:8px;flex-shrink:0}
.role-switcher-label{font-size:11px;color:rgba(255,255,255,.65);text-transform:uppercase;letter-spacing:.08em;font-weight:600;text-align:right}
.role-toggle{display:flex;background:rgba(0,0,0,.2);border-radius:12px;padding:4px;gap:4px;border:1px solid rgba(255,255,255,.12)}
.role-btn{display:flex;align-items:center;gap:7px;padding:9px 15px;border-radius:9px;border:none;background:transparent;color:rgba(255,255,255,.65);font-family:var(--font-sans);font-size:13px;font-weight:500;cursor:pointer;transition:all .2s;white-space:nowrap}
.role-btn:hover{background:rgba(255,255,255,.12);color:white}
.role-btn.active{background:white;color:var(--ink);font-weight:700;box-shadow:0 2px 12px rgba(0,0,0,.22)}
.role-icon{font-size:16px;line-height:1}
/* ADMIN PANEL */
#admin-panel{display:none}
#admin-panel .main{max-width:1180px;margin:0 auto;padding:32px 28px 80px;display:grid;grid-template-columns:1fr 390px;gap:26px;align-items:start}
.asp{display:none}
.asp.active{display:block}
#admin-fbar{display:none!important}
#admin-fbar.visible{display:flex!important}
@media(max-width:920px){#admin-panel .main{grid-template-columns:1fr}}
@media(max-width:580px){.role-toggle{flex-direction:column}.role-btn{justify-content:center}}
/* SPREADSHEET MODE */
#sheet-panel{display:none}
#sheet-panel .main{max-width:1180px;margin:0 auto;padding:32px 28px 80px;display:grid;grid-template-columns:1fr 390px;gap:26px;align-items:start}
.ssp{display:none}
.ssp.active{display:block}
#sheet-fbar{display:none!important}
#sheet-fbar.visible{display:flex!important}
/* TEMPLATE PICKER */
.sheet-templates{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px;margin-bottom:16px}
.stpl{background:var(--bg);border:2px solid var(--border);border-radius:12px;padding:16px;cursor:pointer;transition:all .18s;display:flex;flex-direction:column;gap:6px}
.stpl:hover{border-color:#1976d2;background:#e3f2fd;transform:translateY(-2px);box-shadow:0 4px 18px rgba(21,101,192,.12)}
.stpl-blank{border-style:dashed}
.stpl-blank:hover{border-color:var(--teal);background:var(--teal-light)}
.stpl-icon{font-size:26px;line-height:1}
.stpl-name{font-family:var(--font-serif);font-weight:600;font-size:14px;color:var(--ink)}
.stpl-desc{font-size:12px;color:var(--muted);line-height:1.55;flex:1}
.stpl-tags{display:flex;flex-wrap:wrap;gap:4px;margin-top:4px}
.stpl-tags span{background:#e3f2fd;color:#1565c0;border-radius:10px;padding:2px 8px;font-size:10.5px;font-weight:500}
@media(max-width:920px){#sheet-panel .main{grid-template-columns:1fr}.sheet-templates{grid-template-columns:1fr 1fr}}
@media(max-width:580px){.sheet-templates{grid-template-columns:1fr}}
#sheet-nav-tab:hover{color:#1565c0!important;background:#e3f2fd!important}
#sheet-nav-tab.active{color:#1565c0!important;border-bottom-color:#1565c0!important;background:#e3f2fd!important}
#sheet-nav-tab.active .pletter{background:#1565c0!important;color:white!important}
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     PASSWORD GATE
     TO CHANGE THE PIN: find the line below that says
     const ACCESS_PASSWORD = "2025"
     and replace 2025 with any 4-digit number you choose.
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="pw-gate">
  <div id="pw-box">
    <div class="pw-hdr">
      <div class="pw-icon">üîê</div>
      <h2>CTE AI Prompt Builder</h2>
      <p>Enter the access password to get started</p>
    </div>
    <div class="pw-body">
      <div class="pw-author">
        <strong>Created by Juliano Calvo</strong>
        CTE Conference 2026 ¬∑ Educating For Careers
      </div>
      <div class="pw-label">üî¢ Enter 4-Digit PIN</div>
      <div class="pin-display" id="pin-display">
        <span class="pin-dot" id="pd0"></span>
        <span class="pin-dot" id="pd1"></span>
        <span class="pin-dot" id="pd2"></span>
        <span class="pin-dot" id="pd3"></span>
      </div>
      <div id="pw-error">‚ùå Incorrect PIN. Please try again.</div>
      <div class="pin-pad">
        <button class="pin-btn" onclick="pinPress('1')">1</button>
        <button class="pin-btn" onclick="pinPress('2')">2</button>
        <button class="pin-btn" onclick="pinPress('3')">3</button>
        <button class="pin-btn" onclick="pinPress('4')">4</button>
        <button class="pin-btn" onclick="pinPress('5')">5</button>
        <button class="pin-btn" onclick="pinPress('6')">6</button>
        <button class="pin-btn" onclick="pinPress('7')">7</button>
        <button class="pin-btn" onclick="pinPress('8')">8</button>
        <button class="pin-btn" onclick="pinPress('9')">9</button>
        <button class="pin-btn pin-clr" onclick="pinClear()">‚å´</button>
        <button class="pin-btn" onclick="pinPress('0')">0</button>
        <button class="pin-btn pin-go" onclick="checkPW()">‚Üí</button>
      </div>
      <div class="pw-hint">Ask the presenter for today's 4-digit PIN.<br>¬© 2026 Juliano Calvo ¬∑ All rights reserved.</div>
    </div>
  </div>
</div>

<!-- TOOLTIP MODAL -->
<div class="toverlay" id="toverlay" onclick="closeTT(event)">
  <div class="tbox">
    <div class="thdr"><h3 id="ttitle">Guide</h3><button class="tclose" onclick="closeTTbtn()">‚úï</button></div>
    <div class="tbody" id="tbody"></div>
  </div>
</div>

<!-- HEADER -->
<header>
  <div style="display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:16px">
    <div>
      <div class="hbadge" id="hbadge-text">‚ú¶ CTE Conference 2026 ¬∑ Educating For Careers</div>
      <h1 id="header-title">Build Your Own <span>AI Prompt</span><br>for CTE Pathways</h1>
      <p id="header-sub"><em>Educating For Careers 2026 ¬∑ Amplifying Multilingual Learners Success: Culturally Responsive CTE Pathways That Work</em><br><br>Use the <strong>P.A.R.T.S. framework</strong> to craft powerful, standards-aligned AI prompts that support multilingual learners and strengthen California CTE pathways.</p>
      <div class="htags" id="header-tags">
        <span class="htag">üåê Amplifying Multilingual Learners</span>
        <span class="htag">üéì Culturally Responsive CTE Pathways</span>
        <span class="htag">üìã CA CTE Standards Aligned</span>
        <span class="htag">‚úèÔ∏è CA ELD Standards</span>
      </div>
    </div>
    <!-- ROLE SWITCHER -->
    <div class="role-switcher">
      <div class="role-switcher-label">I am a:</div>
      <div class="role-toggle">
        <button class="role-btn active" id="role-teacher" onclick="switchRole('teacher')">
          <span class="role-icon">üë©‚Äçüè´</span>
          <span class="role-name">Teacher</span>
        </button>
        <button class="role-btn" id="role-admin" onclick="switchRole('admin')">
          <span class="role-icon">üèõÔ∏è</span>
          <span class="role-name">Admin / District Leader</span>
        </button>
      </div>
    </div>
  </div>
  <div style="margin-top:16px;font-size:11.5px;color:rgba(255,255,255,.55);letter-spacing:.03em">¬© 2026 <strong style="color:rgba(255,255,255,.8)">Juliano Calvo</strong> ¬∑ All rights reserved ¬∑ For educational use only ¬∑ Not for redistribution without written permission</div>
</header>

<div id="role-sheet" style="display:none"></div>

<!-- FRAMEWORK BAR -->
<div class="fbar" id="main-fbar">
  <div class="ptab active" id="teacher-tab" onclick="goToStep(0)"><div class="pletter">P</div>Persona</div>
  <div class="ptab" onclick="goToStep(1)"><div class="pletter">A</div>Aim</div>
  <div class="ptab" onclick="goToStep(2)"><div class="pletter">R</div>Recipients</div>
  <div class="ptab" onclick="goToStep(3)"><div class="pletter">T</div>Theme</div>
  <div class="ptab" onclick="goToStep(4)"><div class="pletter">S</div>Structure</div>
  <div class="ptab" onclick="goToStep(5)"><div class="pletter" style="background:var(--teal);color:white">+</div>Enhancements</div>
  <div class="ptab" id="sheet-nav-tab" onclick="switchRole('sheet')" style="border-left:2px solid var(--border);margin-left:8px;padding-left:20px">
    <div class="pletter" style="background:#e3f2fd;color:#1565c0">üìä</div>Spreadsheet Builder
  </div>
  <div class="ptab lib-tab" onclick="showLibrary()" id="lib-tab"><div class="pletter" style="background:var(--gold-light);color:var(--gold)">üìö</div>My Library</div>
</div>

<!-- MAIN -->
<div class="main" id="teacher-main">
<div>
<div class="pdots" id="pdots">
  <div class="pdot active" onclick="goToStep(0)"></div><div class="pline"></div>
  <div class="pdot" onclick="goToStep(1)"></div><div class="pline"></div>
  <div class="pdot" onclick="goToStep(2)"></div><div class="pline"></div>
  <div class="pdot" onclick="goToStep(3)"></div><div class="pline"></div>
  <div class="pdot" onclick="goToStep(4)"></div><div class="pline"></div>
  <div class="pdot" onclick="goToStep(5)"></div>
</div>

<!-- STEP 0 ‚Äî PERSONA -->
<div class="sp active" id="step-0">
<div class="card"><div class="ch"><div class="ci" style="background:var(--teal-light)">üë§</div><div class="ch-text"><h2>P ‚Äî Persona <span class="hbtn" onclick="showTT('persona')">?</span></h2><p>Tell the AI who you are ‚Äî your role, experience level, and teaching context.</p></div></div>
<div class="cb">
  <div class="fr"><label>Your Role <span class="req">*</span></label>
    <select id="persona-sel" onchange="updatePersona()">
      <option value="">‚Äî Choose your role ‚Äî</option>
      <optgroup label="üçΩÔ∏è Hospitality, Tourism & Recreation">
        <option value="a CTE teacher in the Food Service and Hospitality pathway">Food Service & Hospitality Teacher</option>
        <option value="a CTE teacher in the Hospitality, Tourism, and Recreation pathway">Hospitality, Tourism & Recreation Teacher</option>
        <option value="a CTE teacher in the Food Science, Dietetics, and Nutrition pathway">Food Science, Dietetics & Nutrition Teacher</option>
      </optgroup>
      <optgroup label="üíº Business & Finance">
        <option value="a CTE teacher in the Business Management pathway">Business Management Teacher</option>
        <option value="a CTE teacher in the Financial Services pathway">Financial Services Teacher</option>
        <option value="a CTE teacher in the International Business pathway">International Business Teacher</option>
      </optgroup>
      <optgroup label="üè• Health Science">
        <option value="a CTE teacher in Health Science and Medical Technology">Health Science Teacher</option>
        <option value="a CTE teacher in the Patient Care pathway">Patient Care Teacher</option>
      </optgroup>
      <optgroup label="üåæ Agriculture & Natural Resources">
        <option value="a CTE teacher in Agriculture and Natural Resources">Agriculture Teacher</option>
        <option value="a CTE teacher in Environmental Science and Natural Resources">Environmental Science Teacher</option>
      </optgroup>
      <optgroup label="üé® Arts, Media & Entertainment">
        <option value="a CTE teacher in Arts, Media, and Entertainment">Arts, Media & Entertainment Teacher</option>
      </optgroup>
      <optgroup label="üíª Technology & Engineering">
        <option value="a CTE teacher in Information and Communication Technologies">ICT / Computer Science Teacher</option>
        <option value="a CTE teacher in Engineering and Architecture">Engineering & Architecture Teacher</option>
      </optgroup>
      <optgroup label="üë∂ Education & Social Services">
        <option value="a CTE teacher in Education, Child Development, and Family Services">Education & Child Development Teacher</option>
      </optgroup>
      <optgroup label="üè´ Leadership & Support Roles">
        <option value="a CTE pathway coordinator supporting multiple sectors">CTE Pathway Coordinator</option>
        <option value="a curriculum designer creating CTE instructional resources">Curriculum Designer / Specialist</option>
        <option value="an instructional coach supporting CTE teachers with multilingual learner strategies">Instructional Coach</option>
        <option value="a high school administrator overseeing CTE programs">High School Administrator</option>
        <option value="a school counselor supporting CTE pathway planning for EL students">School Counselor</option>
        <option value="a bilingual instructional aide supporting CTE classrooms">Bilingual Instructional Aide</option>
      </optgroup>
      <option value="custom">‚úèÔ∏è Write my own role...</option>
    </select>
  </div>
  <div class="fr" id="custom-persona-row" style="display:none">
    <label>Describe your role <span class="hint">be specific for best results</span></label>
    <input type="text" id="persona-custom" placeholder="e.g. a bilingual CTE teacher in a newcomer program focused on culinary arts..." oninput="rebuildPrompt()">
  </div>
  <div class="fr"><label>Teaching Experience <span class="hint">helps calibrate tone and complexity</span></label>
    <select id="exp-sel" onchange="handleCustomOrSel('exp-sel','exp-custom','exp-custom-row')">
      <option value="">‚Äî Select experience level ‚Äî</option>
      <option value="a first-year teacher who is still learning classroom routines">First-year teacher</option>
      <option value="an early-career teacher with 1‚Äì3 years of experience">Early career (1‚Äì3 years)</option>
      <option value="a mid-career teacher with 4‚Äì10 years of experience">Mid-career (4‚Äì10 years)</option>
      <option value="a veteran teacher with over 10 years of experience">Veteran (10+ years)</option>
      <option value="an expert / mentor teacher who also coaches colleagues">Expert / Mentor teacher</option>
      <option value="custom">‚úèÔ∏è Describe my experience...</option>
    </select>
    <div id="exp-custom-row" style="display:none;margin-top:7px"><input type="text" id="exp-custom" placeholder="e.g. a retired industry professional turned first-year CTE teacher..." oninput="rebuildPrompt()"></div>
  </div>
  <div class="fr"><label>School / Program Context <span class="hint">most impactful field for EL support</span></label>
    <select id="ctx-sel" onchange="handleCustomOrSel('ctx-sel','ctx-custom','ctx-custom-row')">
      <option value="">‚Äî Select school context ‚Äî</option>
      <option value="a Title I school with a large percentage of low-income students">Title I School</option>
      <option value="a school with a predominantly multilingual / EL student population (60%+)">High EL Population (60%+)</option>
      <option value="a newcomer program serving recently arrived immigrant students">Newcomer Program</option>
      <option value="a rural school with limited industry partner access">Rural School</option>
      <option value="an urban school with strong community and industry connections">Urban School ‚Äî Industry Connected</option>
      <option value="a suburban comprehensive high school">Suburban Comprehensive HS</option>
      <option value="a continuation or alternative high school">Continuation / Alternative HS</option>
      <option value="a Regional Occupational Program (ROP) or CTE Center">ROP / CTE Center</option>
      <option value="a community college dual enrollment program">Dual Enrollment Program</option>
      <option value="an adult education CTE program">Adult Education CTE</option>
      <option value="custom">‚úèÔ∏è Describe my context...</option>
    </select>
    <div id="ctx-custom-row" style="display:none;margin-top:7px"><input type="text" id="ctx-custom" placeholder="e.g. a magnet school for recent immigrants with a strong culinary focus..." oninput="rebuildPrompt()"></div>
  </div>
  <div class="exbox"><strong>Strong example:</strong> "a veteran CTE teacher in the Food Service &amp; Hospitality pathway at a Title I school with a predominantly Spanish-speaking multilingual student population."</div>
  <button class="gbtn" onclick="goToStep(1)">Next: Set Your Aim ‚Üí</button>
</div></div>
</div>

<!-- STEP 1 ‚Äî AIM -->
<div class="sp" id="step-1">
<div class="card"><div class="ch"><div class="ci" style="background:var(--orange-light)">üéØ</div><div class="ch-text"><h2>A ‚Äî Aim <span class="hbtn" onclick="showTT('aim')">?</span></h2><p>What do you want to create? What type of resource and what content area?</p></div></div>
<div class="cb">
  <div class="fr"><label>Output Type <span class="req">*</span> <span class="hbtn" onclick="showTT('outputtype')">?</span></label>
    <div class="cg" id="otyp-chips">
      <div class="chip or" onclick="pickOut(this,'lesson plan')">üìÑ Lesson Plan</div>
      <div class="chip or" onclick="pickOut(this,'project-based assignment (PBL)')">üèóÔ∏è Project / PBL</div>
      <div class="chip or" onclick="pickOut(this,'performance assessment task')">üìä Performance Assessment</div>
      <div class="chip or" onclick="pickOut(this,'portfolio task and reflection guide')">üóÇÔ∏è Portfolio Task</div>
      <div class="chip or" onclick="pickOut(this,'full curriculum unit with sequence of lessons')">üìö Curriculum Unit</div>
      <div class="chip or" onclick="pickOut(this,'detailed rubric with scoring criteria')">üìã Rubric</div>
      <div class="chip or" onclick="pickOut(this,'formative check-in activity or exit ticket')">‚úÖ Formative Activity</div>
      <div class="chip or" onclick="pickOut(this,'differentiated resource set (multiple versions)')">üåà Differentiated Resource</div>
      <div class="chip or" onclick="pickOut(this,'career exploration and pathway awareness activity')">üß≠ Career Exploration</div>
      <div class="chip or" onclick="pickOut(this,'vocabulary building and academic language activity')">üìñ Vocabulary Activity</div>
      <div class="chip or" onclick="pickOut(this,'work-based learning experience guide and reflection')">üè≠ Work-Based Learning Guide</div>
      <div class="chip or" onclick="pickOut(this,'family and community engagement resource')">üë®‚Äçüë©‚Äçüëß Family Engagement</div>
      <div class="chip or" onclick="pickOut(this,'simulation or role-play scenario')">üé≠ Simulation / Role-Play</div>
      <div class="chip or" onclick="pickOut(this,'study guide or review resource')">üóíÔ∏è Study Guide</div>
    </div>
    <div style="margin-top:10px">
      <div class="custom-or-row-label">‚úèÔ∏è Or describe your own output type:</div>
      <input type="text" id="outputtype-custom" placeholder="e.g. a bilingual student handbook, a CTSO competition prep guide..." oninput="handleCustomOutput()">
    </div>
  </div>
  <div class="fr"><label>CTE Sector <span class="req">*</span></label>
    <select id="sec-sel" onchange="updatePathways()">
      <option value="">‚Äî Select sector ‚Äî</option>
      <option value="Hospitality, Tourism, and Recreation">üçΩÔ∏è Hospitality, Tourism & Recreation</option>
      <option value="Business and Finance">üíº Business & Finance</option>
      <option value="Agriculture and Natural Resources">üåæ Agriculture & Natural Resources</option>
      <option value="Health Science and Medical Technology">üè• Health Science & Medical Technology</option>
      <option value="Arts, Media, and Entertainment">üé® Arts, Media & Entertainment</option>
      <option value="Education, Child Development and Family Services">üë∂ Education, Child Dev & Family Services</option>
      <option value="Information and Communication Technologies">üíª Information & Communication Technologies</option>
      <option value="Engineering and Architecture">üèóÔ∏è Engineering & Architecture</option>
      <option value="Fashion and Interior Design">üëó Fashion & Interior Design</option>
      <option value="Manufacturing and Product Development">‚öôÔ∏è Manufacturing & Product Development</option>
      <option value="Marketing, Sales, and Service">üì£ Marketing, Sales & Service</option>
      <option value="Public Services">üöí Public Services</option>
      <option value="Transportation">üöó Transportation</option>
      <option value="multiple CTE sectors">üåê Multiple / Cross-Sector</option>
    </select>
  </div>
  <div class="fr"><label>Pathway <span class="hint">auto-fills based on sector</span></label>
    <select id="pw-sel" onchange="updateTopics()"><option value="">‚Äî Select sector first ‚Äî</option></select>
  </div>
  <div class="fr"><label>Topic / Unit Focus <span class="req">*</span> <span class="hbtn" onclick="showTT('topic')">?</span></label>
    <select id="topic-sel" onchange="handleTopicSel()"><option value="">‚Äî Select a suggested topic ‚Äî</option></select>
    <input type="text" id="topic-custom" placeholder="Or type your own specific topic here..." oninput="rebuildPrompt()" style="margin-top:8px">
  </div>
  <div class="fr"><label>Industry Connection <span class="hint">optional but highly recommended</span></label>
    <select id="ind-sel" onchange="handleCustomOrSel('ind-sel','ind-custom','ind-custom-row')">
      <option value="">‚Äî Add a real-world connection ‚Äî</option>
      <option value="local businesses and community employers in the region">Local Community Employers</option>
      <option value="CTSO activities (FCCLA, FBLA, SkillsUSA, HOSA, FFA)">CTSO (FCCLA, FBLA, SkillsUSA, HOSA, FFA)</option>
      <option value="industry certifications (ServSafe, CompTIA, OSHA, Notary, etc.)">Industry Certifications</option>
      <option value="work-based learning, internship, and apprenticeship programs">Internship / Work-Based Learning</option>
      <option value="postsecondary articulation and dual enrollment pathways">Postsecondary / Dual Enrollment</option>
      <option value="immigrant and multilingual-owned businesses in the community">Multilingual-Owned Community Businesses</option>
      <option value="regional labor market data and high-demand career information">Regional Labor Market Data</option>
      <option value="virtual industry tours and guest speaker connections">Virtual Industry Tours / Guest Speakers</option>
      <option value="custom">‚úèÔ∏è Describe my own connection...</option>
    </select>
    <div id="ind-custom-row" style="display:none;margin-top:7px"><input type="text" id="ind-custom" placeholder="e.g. a partnership with the local food bank and refugee resettlement center..." oninput="rebuildPrompt()"></div>
  </div>
  <div class="exbox"><strong>Strong aim:</strong> "Create a project-based assignment on customer service for multicultural guests in the Food Service &amp; Hospitality pathway, connected to local restaurants and FCCLA leadership."</div>
  <button class="gbtn" style="background:linear-gradient(135deg,#b84d14,#e8601c)" onclick="goToStep(2)">Next: Define Recipients ‚Üí</button>
</div></div>
</div>

<!-- STEP 2 ‚Äî RECIPIENTS -->
<div class="sp" id="step-2">
<div class="card"><div class="ch"><div class="ci" style="background:#fff0dc">üë•</div><div class="ch-text"><h2>R ‚Äî Recipients <span class="hbtn" onclick="showTT('recipients')">?</span></h2><p>Who are your students? The more specific, the more targeted the EL supports will be.</p></div></div>
<div class="cb">
  <div class="fr"><label>Grade Level(s) <span class="req">*</span></label>
    <div class="cg" id="grade-chips">
      <div class="chip go" onclick="toggleChip(this)">7th</div><div class="chip go" onclick="toggleChip(this)">8th</div>
      <div class="chip go" onclick="toggleChip(this)">9th</div><div class="chip go" onclick="toggleChip(this)">10th</div>
      <div class="chip go" onclick="toggleChip(this)">11th</div><div class="chip go" onclick="toggleChip(this)">12th</div>
      <div class="chip go" onclick="toggleChip(this)">Mixed grades</div>
      <div class="chip go" onclick="toggleChip(this)">Adult Education</div>
    </div>
  </div>
  <div class="fr"><label>Class Composition <span class="hbtn" onclick="showTT('classcomp')">?</span></label>
    <select id="comp-sel" onchange="handleCustomOrSel('comp-sel','comp-custom','comp-custom-row')">
      <option value="">‚Äî Describe your class makeup ‚Äî</option>
      <option value="mostly English-only students with a few ELs">Mostly English-only, a few ELs</option>
      <option value="a mixed class of English-only, EL, and RFEP students">Mixed: English-only, EL, and RFEP</option>
      <option value="a majority EL class (50%+) with multiple proficiency levels">Majority EL (50%+), multiple ELD levels</option>
      <option value="a sheltered/SDAIE class designed entirely for EL students">Sheltered / SDAIE class (all EL)</option>
      <option value="a newcomer class with recently arrived students at Emerging ELD level">Newcomer class (Emerging ELD)</option>
      <option value="a Long-Term EL (LTEL) class for students who have been EL for 6+ years">Long-Term EL class (LTEL)</option>
      <option value="a SIFE class (Students with Interrupted Formal Education)">SIFE ‚Äî Interrupted Formal Education</option>
      <option value="an inclusion class combining EL and special education students">Inclusion: EL + Special Education</option>
      <option value="an advanced/GATE class that includes some EL students">Advanced / GATE with some ELs</option>
      <option value="a refugee resettlement class with students from multiple countries">Refugee Resettlement Class</option>
      <option value="custom">‚úèÔ∏è Describe my class...</option>
    </select>
    <div id="comp-custom-row" style="display:none;margin-top:7px"><input type="text" id="comp-custom" placeholder="e.g. a mixed class of newcomers, SIFE, and LTEL students across 3 grade levels..." oninput="rebuildPrompt()"></div>
  </div>
  <div class="fr"><label>ELD Proficiency Levels <span class="hbtn" onclick="showTT('eld')">?</span> <span class="hint">select all present in your class</span></label>
    <div class="cg">
      <div class="chip go" onclick="toggleChip(this)" data-val="Emerging ELD Level 1 (very beginning English, benefits from home language support and visual scaffolds)">üå± Emerging (Lvl 1)</div>
      <div class="chip go" onclick="toggleChip(this)" data-val="Expanding ELD Level 2 (developing fluency, needs structured academic language scaffolds)">üåø Expanding (Lvl 2)</div>
      <div class="chip go" onclick="toggleChip(this)" data-val="Bridging ELD Level 3 (near grade-level English, refining academic register and complex language)">üå≥ Bridging (Lvl 3)</div>
      <div class="chip go" onclick="toggleChip(this)" data-val="RFEP students (reclassified, may still benefit from ongoing academic language development)">‚úÖ RFEP</div>
      <div class="chip go" onclick="toggleChip(this)" data-val="Long-Term English Learners (6+ years in U.S. schools, strong oral skills but literacy gaps in academic language)">‚è≥ Long-Term EL (LTEL)</div>
      <div class="chip go" onclick="toggleChip(this)" data-val="SIFE students (limited formal schooling, need foundational literacy alongside content)">üìå SIFE</div>
    </div>
  </div>

  <!-- LANGUAGE PICKER -->
  <div class="fr">
    <label>üåê Home Languages <span class="hbtn" onclick="showTT('languages')">?</span> <span class="hint">build your class language profile</span></label>
    <div class="lang-picker">
      <div class="lang-picker-label">‚ú¶ Tap to add languages ‚Äî mix and match freely</div>
      <div class="lang-groups">
        <div>
          <div class="lang-group-title">üåé Americas</div>
          <div class="lang-tags">
            <span class="ltag" onclick="addLang('Spanish')">üá≤üáΩ Spanish</span>
            <span class="ltag" onclick="addLang('Portuguese')">üáßüá∑ Portuguese</span>
            <span class="ltag" onclick="addLang('Haitian Creole')">üá≠üáπ Haitian Creole</span>
            <span class="ltag" onclick="addLang('Guatemalan Mam')">Guatemalan Mam</span>
            <span class="ltag" onclick="addLang('K ºiche º')">K ºiche º</span>
            <span class="ltag" onclick="addLang('Mixtec')">Mixtec</span>
            <span class="ltag" onclick="addLang('Zapotec')">Zapotec</span>
          </div>
        </div>
        <div>
          <div class="lang-group-title">üåè East & Southeast Asia</div>
          <div class="lang-tags">
            <span class="ltag" onclick="addLang('Cantonese')">üá®üá≥ Cantonese</span>
            <span class="ltag" onclick="addLang('Mandarin')">Mandarin</span>
            <span class="ltag" onclick="addLang('Vietnamese')">üáªüá≥ Vietnamese</span>
            <span class="ltag" onclick="addLang('Tagalog / Filipino')">üáµüá≠ Tagalog</span>
            <span class="ltag" onclick="addLang('Khmer')">üá∞üá≠ Khmer</span>
            <span class="ltag" onclick="addLang('Hmong')">Hmong</span>
            <span class="ltag" onclick="addLang('Korean')">üá∞üá∑ Korean</span>
            <span class="ltag" onclick="addLang('Japanese')">üáØüáµ Japanese</span>
            <span class="ltag" onclick="addLang('Indonesian')">üáÆüá© Indonesian</span>
            <span class="ltag" onclick="addLang('Thai')">üáπüá≠ Thai</span>
          </div>
        </div>
        <div>
          <div class="lang-group-title">üåç South Asia & Middle East</div>
          <div class="lang-tags">
            <span class="ltag" onclick="addLang('Arabic')">üá∏üá¶ Arabic</span>
            <span class="ltag" onclick="addLang('Farsi / Persian')">üáÆüá∑ Farsi</span>
            <span class="ltag" onclick="addLang('Dari')">Dari</span>
            <span class="ltag" onclick="addLang('Pashto')">Pashto</span>
            <span class="ltag" onclick="addLang('Punjabi')">Punjabi</span>
            <span class="ltag" onclick="addLang('Hindi')">üáÆüá≥ Hindi</span>
            <span class="ltag" onclick="addLang('Urdu')">Urdu</span>
            <span class="ltag" onclick="addLang('Bengali')">Bengali</span>
            <span class="ltag" onclick="addLang('Nepali')">üá≥üáµ Nepali</span>
          </div>
        </div>
        <div>
          <div class="lang-group-title">üåç Africa</div>
          <div class="lang-tags">
            <span class="ltag" onclick="addLang('Somali')">üá∏üá¥ Somali</span>
            <span class="ltag" onclick="addLang('Amharic')">üá™üáπ Amharic</span>
            <span class="ltag" onclick="addLang('Oromo')">Oromo</span>
            <span class="ltag" onclick="addLang('Swahili')">Swahili</span>
            <span class="ltag" onclick="addLang('Tigrinya')">üá™üá∑ Tigrinya</span>
            <span class="ltag" onclick="addLang('Kinyarwanda')">üá∑üáº Kinyarwanda</span>
            <span class="ltag" onclick="addLang('French')">üá´üá∑ French</span>
            <span class="ltag" onclick="addLang('Wolof')">Wolof</span>
          </div>
        </div>
        <div>
          <div class="lang-group-title">üåê Europe & Other</div>
          <div class="lang-tags">
            <span class="ltag" onclick="addLang('Russian')">üá∑üá∫ Russian</span>
            <span class="ltag" onclick="addLang('Ukrainian')">üá∫üá¶ Ukrainian</span>
            <span class="ltag" onclick="addLang('Romanian')">üá∑üá¥ Romanian</span>
            <span class="ltag" onclick="addLang('Polish')">üáµüá± Polish</span>
          </div>
        </div>
      </div>
      <div class="lang-custom-row">
        <input type="text" id="lang-custom-input" placeholder="Add another language...">
        <button class="lang-add-btn" onclick="addCustomLang()">+ Add</button>
      </div>
      <div class="lang-selected-wrap">
        <div class="lang-selected-title">‚ú¶ Selected languages in your classroom:</div>
        <div class="lang-pills" id="lang-pills"><span style="font-size:12px;color:rgba(13,123,110,.5);font-style:italic">None selected yet ‚Äî tap languages above</span></div>
      </div>
    </div>
  </div>

  <!-- ADDITIONAL STUDENT IDENTITIES ‚Äî comprehensive -->
  <div class="fr"><label>Additional Student Identities &amp; Needs <span class="hbtn" onclick="showTT('identities')">?</span> <span class="hint">select all that apply</span></label>
    <div class="sdiv">Immigration &amp; Displacement Backgrounds</div>
    <div class="cg">
      <div class="chip" onclick="toggleChip(this)" data-val="recently arrived immigrants (within 1‚Äì3 years in the U.S.) who are navigating new cultural and academic norms alongside language acquisition">üõ´ Recently Arrived Immigrants</div>
      <div class="chip" onclick="toggleChip(this)" data-val="refugee students from resettled families ‚Äî include trauma-informed practices, culturally affirming content, and connection to community support services">üïäÔ∏è Refugees &amp; Asylum Seekers</div>
      <div class="chip" onclick="toggleChip(this)" data-val="unaccompanied minors or youth who arrived without family ‚Äî needs extra school-based support and stable adult connections">üßí Unaccompanied Youth</div>
      <div class="chip" onclick="toggleChip(this)" data-val="undocumented students and mixed-status families ‚Äî use content that affirms belonging, avoids fear-triggering language, and celebrates contributions">üå± Mixed-Status / Undocumented</div>
      <div class="chip" onclick="toggleChip(this)" data-val="transnational students who move between countries and may have attended school in home country (with strong L1 academic skills to leverage)">üîÑ Transnational Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="migrant students from seasonal agricultural worker families ‚Äî use flexible scheduling awareness and connect to agricultural pathway assets">üåª Migrant / Agricultural Worker Families</div>
      <div class="chip" onclick="toggleChip(this)" data-val="Deferred Action for Childhood Arrivals (DACA) recipients and youth navigating uncertain legal status ‚Äî affirm their belonging and future pathways">üìã DACA / Dreamers</div>
    </div>
    <div class="sdiv" style="margin-top:14px">Cultural &amp; Linguistic Backgrounds</div>
    <div class="cg">
      <div class="chip" onclick="toggleChip(this)" data-val="Indigenous students from tribal and Native communities (domestic) ‚Äî honor sovereign cultural identities, traditional knowledge, and community connections">ü™∂ Indigenous / Native American Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students from Indigenous Central American communities speaking Mayan languages (Mam, K ºiche º, Tzeltal, etc.) ‚Äî avoid conflating with Spanish speakers">üåΩ Indigenous Latinx / Mayan Language Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="Pacific Islander students (Samoan, Tongan, Chamorro, Hawaiian, Fijian, Marshallese, etc.) ‚Äî honor Pacific cultural values including collectivism, oral tradition, and community">üå∫ Pacific Islander Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students from East African communities (Somalia, Ethiopia, Eritrea, Sudan, Kenya) navigating both language acquisition and strong heritage literacy traditions">üåç East African Community Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students from Southeast Asian communities (Hmong, Khmer, Mien, Laotian, Vietnamese) ‚Äî many with refugee family histories and community oral traditions">üåè Southeast Asian Heritage Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students who are simultaneously developing both English AND their home language, growing up in bilingual households ‚Äî leverage full bilingual cognitive advantage">üåê Simultaneous Bilinguals</div>
      <div class="chip" onclick="toggleChip(this)" data-val="heritage language learners ‚Äî students raised in home language environments who speak the language but have limited formal literacy in it">üìö Heritage Language Learners</div>
    </div>
    <div class="sdiv" style="margin-top:14px">Learning &amp; Academic Profiles</div>
    <div class="cg">
      <div class="chip" onclick="toggleChip(this)" data-val="students with IEPs and/or 504 plans ‚Äî apply Universal Design for Learning (UDL) principles, provide accommodations and modifications alongside EL scaffolds">‚ôø IEP / 504 Plans</div>
      <div class="chip" onclick="toggleChip(this)" data-val="Gifted and Talented Education (GATE) students who need enrichment, extension challenges, and open-ended inquiry ‚Äî including multilingual GATE students who are often underidentified">‚≠ê GATE / Gifted Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students with interrupted or uneven prior CTE coursework who may need prerequisite skill support alongside grade-level content">üìÇ Varied CTE Background</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students with limited technology access or digital literacy ‚Äî include offline alternatives and technology scaffolds alongside digital tasks">üíª Limited Digital Access</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students who are learning to read and write in English for the first time as adolescents or adults ‚Äî include foundational literacy support within CTE content">üìñ Adolescent / Adult Literacy Learners</div>
    </div>
    <div class="sdiv" style="margin-top:14px">Socioeconomic &amp; Family Circumstances</div>
    <div class="cg">
      <div class="chip" onclick="toggleChip(this)" data-val="students experiencing housing instability or homelessness (McKinney-Vento Act) ‚Äî include flexible structures, resources awareness, and trauma-informed practices">üè† Experiencing Homelessness</div>
      <div class="chip" onclick="toggleChip(this)" data-val="foster youth and students in foster care ‚Äî provide stable, affirming classroom structures and consistent adult relationships; avoid family assumption activities">üíô Foster Youth</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students who work part-time or full-time jobs outside school ‚Äî connect CTE content to their real workplace experiences and honor their economic contributions">üíº Working Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students who are parenting or pregnant ‚Äî provide flexible, affirming structures; avoid scheduling assumptions; honor their adult responsibilities">üçº Parenting / Pregnant Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="first-generation college-bound students who are navigating higher education without family experience to draw from ‚Äî provide explicit college and career pathway guidance">üéì First-Generation College Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students who are caretakers for family members ‚Äî honor their community care responsibilities and flexible-scheduling needs">ü§ù Family Caretakers</div>
    </div>
    <div class="sdiv" style="margin-top:14px">Social Identity &amp; Intersectionality</div>
    <div class="cg">
      <div class="chip" onclick="toggleChip(this)" data-val="LGBTQ+ students including queer, transgender, and non-binary youth ‚Äî use inclusive, affirming language; avoid binary gender assumptions in all materials">üè≥Ô∏è‚Äçüåà LGBTQ+ Youth</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students navigating racial identity development and experiences of racial discrimination ‚Äî include identity-affirming content and culturally sustaining examples">‚úä Students Navigating Racial Identity</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students with complex trauma histories including community violence, family separation, or war exposure ‚Äî prioritize trauma-informed, restorative classroom practices">üíõ Complex Trauma Histories</div>
    </div>
    <div style="margin-top:10px">
      <div class="custom-or-row-label">‚úèÔ∏è Add any other identities or contexts not listed:</div>
      <input type="text" id="specials-custom" placeholder="e.g. students in a reentry program, court-involved youth, students with hearing impairments..." oninput="rebuildPrompt()">
    </div>
  </div>
  <div class="callout ct">üåê <span>Naming your students' actual home languages allows the AI to suggest cognate connections, culturally relevant examples, and home-language bridges rooted in students' real linguistic assets.</span></div>
  <button class="gbtn" style="background:linear-gradient(135deg,#9a6208,#c9820a)" onclick="goToStep(3)">Next: Set the Theme ‚Üí</button>
</div></div>
</div>

<!-- STEP 3 ‚Äî THEME -->
<div class="sp" id="step-3">
<div class="card"><div class="ch"><div class="ci" style="background:var(--purple-light)">üé®</div><div class="ch-text"><h2>T ‚Äî Theme <span class="hbtn" onclick="showTT('theme')">?</span></h2><p>Define the instructional style, pedagogical approach, and ML/EL strategies to embed.</p></div></div>
<div class="cb">
  <div class="fr"><label>Instructional Approach <span class="hint">select all that reflect your goals</span></label>
    <div class="cg">
      <div class="chip pu" onclick="toggleChip(this)" data-val="culturally responsive and sustaining pedagogy that honors and builds on students' cultural identities">üåç Culturally Responsive &amp; Sustaining</div>
      <div class="chip pu" onclick="toggleChip(this)" data-val="inquiry-based and student-driven learning with open-ended exploration">üîç Inquiry-Based</div>
      <div class="chip pu" onclick="toggleChip(this)" data-val="hands-on, project-based, and experiential learning">üõ†Ô∏è Hands-On / PBL</div>
      <div class="chip pu" onclick="toggleChip(this)" data-val="collaborative, team-oriented learning structures that mirror real workplace environments">ü§ù Collaborative / Team-Based</div>
      <div class="chip pu" onclick="toggleChip(this)" data-val="real-world, industry-connected instruction using authentic workplace scenarios and vocabulary">üè≠ Industry-Connected &amp; Authentic</div>
      <div class="chip pu" onclick="toggleChip(this)" data-val="rigorous yet accessible, with multiple entry points and scaffolds for multilingual learners at every proficiency level">üìà Rigorous + Accessible (Scaffolded)</div>
      <div class="chip pu" onclick="toggleChip(this)" data-val="asset-based pedagogy that explicitly highlights students' multilingual and multicultural strengths">üíé Asset-Based</div>
      <div class="chip pu" onclick="toggleChip(this)" data-val="trauma-informed and restorative classroom practices">ü§≤ Trauma-Informed</div>
      <div class="chip pu" onclick="toggleChip(this)" data-val="identity-affirming instruction that connects CTE content to students' lives, families, and communities">ü™û Identity-Affirming</div>
      <div class="chip pu" onclick="toggleChip(this)" data-val="technology-integrated with digital tools, multimodal resources, and online collaboration">üíª Technology-Integrated</div>
    </div>
  </div>
  <div class="sdiv">EL / Multilingual Teaching Strategies <span class="hbtn" onclick="showTT('elstrategies')">?</span></div>
  <div class="elbox">
    <h4>‚ú¶ Select strategies to weave into the prompt <span class="hbtn" onclick="showTT('elstrategies')" style="background:rgba(255,255,255,.4);border-color:#9b7ed4">?</span></h4>
    <div>
      <span class="stag" onclick="toggleStrat(this)" data-val="sentence frames and language stems that scaffold academic discourse at every ELD level">Sentence Frames &amp; Language Stems</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="visual supports including graphic organizers, anchor charts, illustrated vocabulary, and realia">Visual Supports &amp; Graphic Organizers</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="vocabulary previewing using cognates, bilingual word walls, and tiered vocabulary instruction (Tier 1, 2, 3)">Cognate-Based Vocab &amp; Word Walls</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="SIOP-aligned instruction: content AND language objectives, building background, interaction, comprehensible input, practice/application, review/assessment">SIOP Model</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="SDAIE strategies (Specially Designed Academic Instruction in English): comprehensible input, context clues, modified text, and academic language support">SDAIE</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="Total Physical Response (TPR) and movement-based vocabulary acquisition">TPR</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="structured academic discussion protocols: think-pair-share, numbered heads together, inside-outside circle, fishbowl, and Socratic seminar">Structured Discussion Protocols</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="tiered vocabulary instruction: Tier 1 (everyday), Tier 2 (academic cross-curricular), Tier 3 (CTE technical vocabulary)">Tiered Vocabulary (1-2-3)</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="translanguaging ‚Äî actively welcoming and leveraging students' home languages as cognitive and linguistic resources throughout the lesson">Translanguaging</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="culturally relevant texts, examples, scenarios, and community connections that reflect students' lived experiences">Culturally Relevant Texts &amp; Scenarios</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="scaffolded reading and writing: sentence starters, paragraph frames, guided notes, and progressive release">Scaffolded Reading &amp; Writing</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="multimodal learning: video, audio, illustrations, manipulatives, digital tools, and hands-on realia">Multimodal Learning</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="strategic grouping: same-language pairs for concept processing + mixed-language groups for authentic communication practice">Strategic Grouping</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="building background knowledge through pre-teaching, KWL charts, virtual field trips, and community connections">Background Knowledge Building</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="interactive notebooks and visual journals as multimodal student products">Interactive Notebooks / Visual Journals</span>
      <span class="stag" onclick="toggleStrat(this)" data-val="formative language checks alongside content checks: exit tickets in home language, whiteboard responses, thumbs up/down, and language-focused observations">Language Formative Checks</span>
    </div>
  </div>
  <div class="fr" style="margin-top:14px"><label>Additional Style Notes <span class="hint">optional</span></label>
    <textarea id="theme-notes" placeholder="e.g. I want activities that honor students' immigrant identities. Use real industry job titles and authentic workplace scenarios that reflect our community..." oninput="rebuildPrompt()"></textarea>
  </div>
  <button class="gbtn" style="background:linear-gradient(135deg,#3d2460,#5c3d8f)" onclick="goToStep(4)">Next: Define Structure ‚Üí</button>
</div></div>
</div>

<!-- STEP 4 ‚Äî STRUCTURE -->
<div class="sp" id="step-4">
<div class="card"><div class="ch"><div class="ci" style="background:#e8f5e9">üìê</div><div class="ch-text"><h2>S ‚Äî Structure <span class="hbtn" onclick="showTT('structure')">?</span></h2><p>Specify format, components, and length so the AI delivers exactly what you need.</p></div></div>
<div class="cb">
  <div class="fr"><label>Required Components <span class="hint">select all you need</span></label>
    <div class="cg" id="fmt-chips">
      <div class="chip" onclick="toggleChip(this)" data-val="explicit Content Objective AND Language Objective (SIOP/SDAIE best practice)">üìå Content + Language Objectives</div>
      <div class="chip" onclick="toggleChip(this)" data-val="clear, step-by-step instructions written at a student-accessible reading level">ü™ú Student-Accessible Instructions</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a detailed rubric with proficiency descriptors at 4 levels">üìä Detailed 4-Level Rubric</div>
      <div class="chip" onclick="toggleChip(this)" data-val="three differentiated versions: Emerging ELD / Expanding-Bridging ELD / Fluent English">üåà 3-Tiered Differentiation</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a pre-taught vocabulary list with definitions, visuals, cognates, and example sentences">üìñ Vocabulary List with Visuals</div>
      <div class="chip" onclick="toggleChip(this)" data-val="student-facing directions in plain, jargon-free language">üë©‚Äçüéì Student-Facing Directions</div>
      <div class="chip" onclick="toggleChip(this)" data-val="detailed teacher facilitation notes including anticipated student responses, misconceptions to address, and discussion prompts">üë©‚Äçüè´ Teacher Facilitation Notes</div>
      <div class="chip" onclick="toggleChip(this)" data-val="both a formative check-in AND a summative assessment option">‚úÖ Formative + Summative Assessment</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a student self-reflection and metacognitive component">ü™û Student Self-Reflection</div>
      <div class="chip" onclick="toggleChip(this)" data-val="enrichment / extension activities for advanced and GATE students">‚≠ê Extension Activities</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a family/community connection activity with a version accessible in home languages">üè† Family / Home Connection</div>
      <div class="chip" onclick="toggleChip(this)" data-val="explicit cross-curricular connections to math, ELA, or science">üîó Cross-Curricular Connections</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a career connection section linking this skill to specific CTE jobs, pathway milestones, and postsecondary options">üß≠ Career Connection Section</div>
      <div class="chip" onclick="toggleChip(this)" data-val="suggested best teaching strategy for each major section or activity">üí° Strategy Tip for Each Section</div>
    </div>
    <div style="margin-top:10px">
      <div class="custom-or-row-label">‚úèÔ∏è Add your own component:</div>
      <input type="text" id="fmt-custom" placeholder="e.g. a student glossary in multiple languages, a CTSO competition scoring guide..." oninput="rebuildPrompt()">
    </div>
  </div>
  <div class="fr"><label>Estimated Duration</label>
    <select id="dur-sel" onchange="handleCustomOrSel('dur-sel','dur-custom','dur-custom-row')">
      <option value="">‚Äî Select duration ‚Äî</option>
      <option value="a single 50-minute class period">Single Class Period (50 min)</option>
      <option value="a double-block period (90‚Äì100 minutes)">Double Block (90‚Äì100 min)</option>
      <option value="two to three class periods (2‚Äì3 days)">2‚Äì3 Days</option>
      <option value="a 1-week mini-unit (5 class days)">1-Week Mini-Unit (5 days)</option>
      <option value="a 2-week unit (10 class days)">2-Week Unit (10 days)</option>
      <option value="a full 4‚Äì6 week unit">Full 4‚Äì6 Week Unit</option>
      <option value="a semester-long project or portfolio">Semester-Long Project/Portfolio</option>
      <option value="custom">‚úèÔ∏è Specify duration...</option>
    </select>
    <div id="dur-custom-row" style="display:none;margin-top:7px"><input type="text" id="dur-custom" placeholder="e.g. 3 sessions of 75 minutes each over 2 weeks..." oninput="rebuildPrompt()"></div>
  </div>
  <div class="fr">
    <label>üåê Language Delivery <span class="hbtn" onclick="showTT('langdelivery')">?</span></label>
    <p style="font-size:12px;color:var(--muted);margin-bottom:8px">Languages are set in Recipients (Step R). Choose how to use them in this resource:</p>
    <div class="cg">
      <div class="chip" onclick="pickLangPref(this,'English only')">üìÑ English Only</div>
      <div class="chip" onclick="pickLangPref(this,'parallel translation of all key student-facing sections in home languages')">üî§ Parallel Translation</div>
      <div class="chip" onclick="pickLangPref(this,'bilingual side-by-side student handouts (English + home language)')">üìã Bilingual Handouts</div>
      <div class="chip" onclick="pickLangPref(this,'teacher notes indicating which sections benefit from home language preview or translanguaging')">üìù Home Language Preview Notes</div>
      <div class="chip" onclick="pickLangPref(this,'multilingual glossary in all student home languages represented in the class')">üìñ Multilingual Glossary</div>
      <div class="chip" onclick="pickLangPref(this,'key vocabulary and sentence frames in both English and home languages')">üóíÔ∏è Bilingual Vocabulary &amp; Frames</div>
    </div>
  </div>
  <div class="fr"><label>Additional Format Notes <span class="hint">optional</span></label>
    <textarea id="struct-notes" placeholder="e.g. Use tables where helpful for clarity. Include a gallery walk option. Make the rubric co-creatable with students. Add a sentence bank for EL students..." oninput="rebuildPrompt()"></textarea>
  </div>
  <button class="gbtn" onclick="goToStep(5)">Next: Add CTE Enhancements ‚Üí</button>
</div></div>
</div>

<!-- STEP 5 ‚Äî ENHANCEMENTS -->
<div class="sp" id="step-5">
<div class="card"><div class="ch"><div class="ci" style="background:var(--teal-light)">‚≠ê</div><div class="ch-text"><h2>+ CTE Enhancements <span class="hbtn" onclick="showTT('enhancements')">?</span></h2><p>Align to the 11 Elements of High Quality CTE and California standards for maximum pathway impact.</p></div></div>
<div class="cb">
  <div class="sdiv">11 Elements of High Quality CTE <span class="hbtn" onclick="showTT('11elements')">?</span></div>
  <div class="cte-grid">
    <div class="cel" onclick="toggleCel(this)" data-val="Element 1: Leadership at All Levels ‚Äî articulation agreements with postsecondary institutions, ongoing CTE-focused professional development, strong district-level support, and counselor integration into pathway planning"><div class="celnum">1</div><div class="cellabel">Leadership at All Levels</div></div>
    <div class="cel" onclick="toggleCel(this)" data-val="Element 2: High-Quality Curriculum &amp; Instruction ‚Äî pathway standards-aligned content, sequenced course progressions, embedded work-based learning, technology-integrated instruction, academic-CTE alignment, and opportunities for industry certification"><div class="celnum">2</div><div class="cellabel">High-Quality Curriculum &amp; Instruction</div></div>
    <div class="cel" onclick="toggleCel(this)" data-val="Element 3: Career Exploration &amp; Guidance ‚Äî comprehensive counseling on career pathways, four-year planning with students, labor market information integration, and career awareness from middle school onward"><div class="celnum">3</div><div class="cellabel">Career Exploration &amp; Guidance</div></div>
    <div class="cel" onclick="toggleCel(this)" data-val="Element 4: Student Support &amp; Leadership ‚Äî CTSO integration as a curricular component, student leadership embedded into instruction, equitable access for special populations, and active promotion of non-traditional CTE pathway enrollment"><div class="celnum">4</div><div class="cellabel">Student Support &amp; Leadership</div></div>
    <div class="cel" onclick="toggleCel(this)" data-val="Element 5: Industry Partnerships ‚Äî active advisory committees with real business/industry representatives, industry-vetted and approved curriculum, labor market demand analysis, and industry-validated technical standards"><div class="celnum">5</div><div class="cellabel">Industry Partnerships</div></div>
    <div class="cel" onclick="toggleCel(this)" data-val="Element 6: System Alignment &amp; Coherence ‚Äî articulated programs of study connecting K‚Äì12 to postsecondary, cross-disciplinary collaboration between CTE and academic teachers, and inclusion of at least one CTE course in student course sequences"><div class="celnum">6</div><div class="cellabel">System Alignment &amp; Coherence</div></div>
    <div class="cel" onclick="toggleCel(this)" data-val="Element 7: Student Assessment &amp; Learning Outcomes ‚Äî multiple measures of student learning, performance-based and authentic assessments, annual review of student outcome data disaggregated by subgroup, and use of data for continuous improvement"><div class="celnum">7</div><div class="cellabel">Student Assessment &amp; Learning Outcomes</div></div>
    <div class="cel" onclick="toggleCel(this)" data-val="Element 8: System Responds to Economic Demands ‚Äî ongoing tracking of regional labor market demands, adequate and sustainable funding for pathway maintenance, and active stakeholder partnerships to align program offerings to local economic needs"><div class="celnum">8</div><div class="cellabel">Responds to Economic Demands</div></div>
    <div class="cel" onclick="toggleCel(this)" data-val="Element 9: Skilled Faculty &amp; Professional Development ‚Äî appropriately credentialed CTE teachers with industry experience, ongoing PD activities connected to both pedagogy and industry updates, and collaborative CTE staff planning time"><div class="celnum">9</div><div class="cellabel">Skilled Faculty &amp; PD</div></div>
    <div class="cel" onclick="toggleCel(this)" data-val="Element 10: Evaluation, Accountability &amp; Continuous Improvement ‚Äî active advisory committee oversight, annual course and program reviews, data-informed strategic planning, and teacher evaluation processes tied to student outcomes"><div class="celnum">10</div><div class="cellabel">Evaluation &amp; Accountability</div></div>
    <div class="cel" onclick="toggleCel(this)" data-val="Element 11: CTE Promotion, Outreach &amp; Communication ‚Äî community and family outreach about pathway opportunities, student leadership in program promotion, internship and CTSO visibility, active media promotion of CTE successes, and community involvement in pathway validation"><div class="celnum">11</div><div class="cellabel">CTE Promotion &amp; Outreach</div></div>
  </div>
  <div class="sdiv" style="margin-top:22px">Standards Alignment</div>
  <div class="shdr" onclick="toggleAcc(this)">üìã CA CTE Anchor Standards ‚Äî All Sectors <span>‚ñæ</span></div>
  <div class="sbody"><div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 1.0 Academics: integration of academic standards (math, ELA, science) into CTE content; reading technical texts; applying mathematical reasoning to CTE problems; academic-CTE cross-disciplinary alignment">1.0 Academics</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 2.0 Communications: oral, written, and multimedia communication formats; sender-receiver communication model; responsible digital media use; professional communication in CTE contexts">2.0 Communications</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 3.0 Career Planning &amp; Management: career pathways exploration, four-year planning, labor market trends, postsecondary options, and career decision-making">3.0 Career Planning</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 4.0 Technology: emerging technology use in CTE sectors, digital research skills, responsible digital citizenship, and technology as a career tool">4.0 Technology</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 5.0 Problem Solving &amp; Critical Thinking: logical reasoning, systems thinking, inquiry-based problem solving, creative and design thinking applied to CTE challenges">5.0 Problem Solving</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 6.0 Health &amp; Safety: personal health and safety practices in CTE workplace environments, OSHA standards, hazard identification, emergency procedures, and wellness in the workplace">6.0 Health &amp; Safety</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 7.0 Responsibility &amp; Flexibility: personal accountability, time management, adaptability, professional demeanor, global and cultural awareness as professional qualities">7.0 Responsibility</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 8.0 Ethics &amp; Legal Responsibilities: professional ethics codes, regulatory and legal compliance, respect for diversity and cultural differences, intellectual property">8.0 Ethics &amp; Legal</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 9.0 Leadership &amp; Teamwork: CTSO participation as leadership development, collaboration with diverse and global teams, conflict resolution, and team roles in CTE contexts">9.0 Leadership &amp; Teamwork</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 10.0 Technical Knowledge &amp; Skills: pathway-specific technical competencies, industry-standard tools and procedures, collaboration with industry to validate technical skill requirements">10.0 Technical Skills</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Anchor 11.0 Demonstration &amp; Application: applying technical knowledge in real-world CTE contexts, work-based learning application, industry simulations, and capstone demonstrations of competency">11.0 Demonstration &amp; Application</div>
  </div></div>
  <div class="shdr" onclick="toggleAcc(this)">üçΩÔ∏è HTR Pathway Standards <span>‚ñæ</span></div>
  <div class="sbody"><div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="HTR A1.0 Safety and Emergency Response: first aid, safety procedures, accident prevention, and emergency protocols in food and hospitality environments">A1.0 Safety &amp; Emergency Response</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR A2.0 Communications in HTR: professional communication, customer relations, and interpersonal skills in hospitality settings">A2.0 HTR Communications</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR A4.0 Nutritional Principles &amp; Well-Being: digestive system, macronutrients, emotional and physiological connections to food">A4.0 Nutrition &amp; Well-Being</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR A5.0 Food, Fitness &amp; Wellness: dietary guidelines, lifestyle management, social and cultural norms around food">A5.0 Food, Fitness &amp; Wellness</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR B3.0 Sanitation &amp; Safe Food Handling: personal hygiene, HACCP principles, cross-contamination prevention, local and federal regulatory codes">B3.0 Food Safety &amp; Sanitation</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR B5.0 Culinary Fundamentals: foundational knife skills, cooking methods, flavor profiles, and professional kitchen equipment use">B5.0 Culinary Fundamentals</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR B6.0 Food Preparation in Professional Kitchens: mise en place, food safety techniques during preparation, recipe execution, and plating standards">B6.0 Food Preparation</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR B7.0 Baking, Pastry &amp; Dessert Preparation: mise en place for baking, pastry and dessert techniques, product merchandising and display">B7.0 Baking &amp; Pastry</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR B8.0 Customer Service Excellence: anticipating and exceeding guest needs, complaint resolution, and serving culturally diverse guests with professionalism">B8.0 Customer Service</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR B9.0 Dining Room Service &amp; Beverage Management: table service standards, point of sale, responsible alcohol service">B9.0 Dining Room Service</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR B10.0 Nutrition in Food Service: nutritional principles applied to menu creation, dietary restrictions, and diverse dietary needs in food service">B10.0 Nutrition &amp; Meal Planning</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR B11.0 Menu Planning &amp; Recipe Development: menu costing, recipe standardization, dietary considerations, and cultural menu design">B11.0 Menu Planning</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR B12.0 Sales &amp; Marketing in Food Service: customer relations, market segments, social networking, and promotional strategies for food businesses">B12.0 Sales &amp; Marketing</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR C3.0 Guest Services in Hospitality: exceptional service concepts, Total Quality Management (TQM), and serving culturally and generationally diverse guests">C3.0 Guest Services</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR C4.0 Sales &amp; Marketing in Hospitality: branding, market segment analysis, revenue management, and social networking for hospitality businesses">C4.0 HTR Sales &amp; Marketing</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR C8.0 Global &amp; Cultural Geography: physical geography affecting tourism destinations, international travel information, and cultural customs for hospitality professionals">C8.0 Global &amp; Cultural Geography</div>
    <div class="chip" onclick="toggleChip(this)" data-val="HTR C11.0 Event Planning: planning, budgeting, promoting, coordinating, and evaluating events for diverse clientele">C11.0 Event Planning</div>
  </div></div>
  <div class="shdr" onclick="toggleAcc(this)">üíº Business &amp; Finance Pathway Standards <span>‚ñæ</span></div>
  <div class="sbody"><div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="BF A1.0 Entrepreneurship &amp; Business Fundamentals: business plans, leadership styles, organizational structure, SWOT analysis, and entrepreneurial mindset">A1.0 Entrepreneurship</div>
    <div class="chip" onclick="toggleChip(this)" data-val="BF A2.0 Business Communications: professional writing, presentation, digital communication, and meeting facilitation in business settings">A2.0 Business Communications</div>
    <div class="chip" onclick="toggleChip(this)" data-val="BF A3.0 Management &amp; Organizational Structure: management roles, human resources practices, and corporate responsibility to employees and community">A3.0 Management &amp; Org Structure</div>
    <div class="chip" onclick="toggleChip(this)" data-val="BF A4.0 Economic Concepts in Business: supply and demand, the business cycle, economic indicators, global markets, and financial market basics">A4.0 Economics in Business</div>
    <div class="chip" onclick="toggleChip(this)" data-val="BF A5.0 Financial Data Analysis: investment options, budgets and projections, financial reports, creditworthiness, and risk analysis">A5.0 Financial Analysis</div>
    <div class="chip" onclick="toggleChip(this)" data-val="BF A8.0 Marketing Plan Development: market analysis, consumer behavior, target markets, and promotional plan creation">A8.0 Marketing Plan</div>
    <div class="chip" onclick="toggleChip(this)" data-val="BF B1.0 Budgets &amp; Financial Decision Making: personal income, savings, credit, tax planning, and identity theft protection">B1.0 Budgets &amp; Financial Decisions</div>
    <div class="chip" onclick="toggleChip(this)" data-val="BF B2.0 Accounting Principles (GAAP): the accounting cycle, financial statement preparation, and regulatory compliance">B2.0 Accounting Principles</div>
    <div class="chip" onclick="toggleChip(this)" data-val="BF C1.0 International Business Fundamentals: global trade concepts, international business plans, and international market research">C1.0 International Business</div>
    <div class="chip" onclick="toggleChip(this)" data-val="BF C2.0 Cultural &amp; Geographic Factors in Business: the role of culture, politics, and geography in international trade and HR practices">C2.0 Culture in Global Business</div>
    <div class="chip" onclick="toggleChip(this)" data-val="BF C3.0 International Economics: comparative advantage, trade agreements, protectionism, and balance of trade">C3.0 International Economics</div>
  </div></div>
  <div class="shdr" onclick="toggleAcc(this)">üåê CA ELD Standards <span>‚ñæ</span></div>
  <div class="sbody"><div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="CA ELD Part I-A Collaborative: structured academic discussions, exchanging ideas with evidence, building on others' contributions, and offering opinions in CTE contexts">Part I-A: Collaborative Discussion</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CA ELD Part I-B Interpretive: reading and listening to complex CTE texts closely, making inferences, identifying author's purpose, and analyzing text structure">Part I-B: Interpretive Reading</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CA ELD Part I-C Productive: writing and presenting to inform, argue, and narrate in academic and technical CTE contexts across proficiency levels">Part I-C: Productive Writing &amp; Presenting</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CA ELD Part II Language Structures: vocabulary development, grammar, sentence complexity, and language conventions specifically in CTE academic contexts">Part II: Language Structures</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Designated ELD time: dedicated explicit language instruction connected to CTE content themes, vocabulary, and disciplinary discourse">Designated ELD Time</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Integrated ELD within CTE instruction: content teaching that simultaneously develops academic English proficiency through CTE-contextualized language work">Integrated ELD in CTE Content</div>
  </div></div>
  <div class="shdr" onclick="toggleAcc(this)">üìö Common Core ELA / Literacy in Technical Subjects <span>‚ñæ</span></div>
  <div class="sbody"><div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="CCSS WHST.11-12.2: Write informative and explanatory texts examining and conveying complex technical CTE ideas through clear organization and precise language">WHST.11-12.2 Explanatory Writing</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CCSS RST.11-12.3: Follow precisely complex, multistep technical procedures and tasks common to CTE pathway work">RST.11-12.3 Technical Procedures</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CCSS RST.11-12.4: Determine meaning of domain-specific CTE vocabulary and technical terms in context">RST.11-12.4 Technical Vocabulary</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CCSS SL.11-12.1: Initiate and participate effectively in collaborative discussions with diverse partners on CTE and industry topics">SL.11-12.1 Collaborative Discussion</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CCSS WHST.11-12.7: Conduct short research projects to answer CTE-related questions, solve industry problems, and synthesize multiple sources">WHST.11-12.7 Research Projects</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CCSS RST.11-12.9: Synthesize information from multiple technical and industry sources on the same CTE topic">RST.11-12.9 Synthesize Sources</div>
  </div></div>
  <div class="fr" style="margin-top:18px"><label>Your Additional Instructions <span class="hint">anything else the AI should know or do</span></label>
    <textarea id="extra-notes" placeholder="e.g. Reference FCCLA leadership activities. Include a student self-assessment in Spanish and English. Connect to ServSafe certification goals. Add a glossary in Spanish. Acknowledge refugee family backgrounds with cultural sensitivity..." oninput="rebuildPrompt()"></textarea>
  </div>
  <button class="gbtn" onclick="generateFinal()">‚ú® Generate My Complete Prompt</button>
</div></div>
</div>

</div><!-- end left col -->

<!-- SIDEBAR -->
<div class="sidebar">
  <div class="pcard">
    <div class="pcardh"><h3>Your AI Prompt</h3><div class="lbadge"><div class="ldot"></div>Live</div></div>
    <div class="qwrap">
      <div class="qlabel"><span>Prompt strength</span><span id="qpct">0%</span></div>
      <div class="qtrack"><div class="qfill" id="qfill" style="width:0%"></div></div>
    </div>
    <div class="pout" id="pout"><div class="pph">‚ú¶ Your prompt builds here in real time.<br><br>Start with <strong>P ‚Üí Persona</strong> above.</div></div>
    <div class="pcf">
      <button class="btn bpri" onclick="copyPrompt()">üìã Copy</button>
      <button class="btn bsave" onclick="openSaveModal()">üíæ Save</button>
      <button class="btn bsec" onclick="clearAll()">üîÑ Reset</button>
    </div>
  </div>
  <div class="card" style="margin-top:14px"><div class="cb" style="padding:16px">
    <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.08em;color:var(--teal);margin-bottom:10px">‚ú¶ Conference Demo Tips</div>
    <div style="font-size:13px;color:var(--muted);line-height:1.7">
      <p>üíª <strong>Paste</strong> into Claude, ChatGPT, or Gemini.</p>
      <p style="margin-top:6px">üéØ <strong>More fields = better output.</strong></p>
      <p style="margin-top:6px">üåê <strong>EL Strategies</strong> (Step T) make the biggest difference for multilingual classrooms.</p>
      <p style="margin-top:6px">üí° <strong>Elements 2 + 4</strong> together cover instructional quality AND student equity ‚Äî best combination for multilingual CTE classrooms.</p>
      <p style="margin-top:6px">üåç <strong>Translanguaging + Strategic Grouping</strong> together create the most powerful language environment for mixed-level EL classes.</p>
      <p style="margin-top:6px">üìã <strong>Standards chips</strong> (Step +) create audit-ready outputs.</p>
      <p style="margin-top:6px">‚ùì <strong>Tap any ? button</strong> for a guided explanation with examples.</p>
    </div>
  </div></div>
</div>

</div><!-- end main -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ADMIN / DISTRICT LEADER MODE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="admin-panel" style="display:none">
<div class="fbar" id="admin-fbar" style="display:none">
  <div class="ptab active" id="atab-0" onclick="goToAdminStep(0)"><div class="pletter" style="background:var(--purple-light);color:var(--purple)">P</div>Purpose</div>
  <div class="ptab" id="atab-1" onclick="goToAdminStep(1)"><div class="pletter">A</div>Audience</div>
  <div class="ptab" id="atab-2" onclick="goToAdminStep(2)"><div class="pletter">R</div>Role Focus</div>
  <div class="ptab" id="atab-3" onclick="goToAdminStep(3)"><div class="pletter">T</div>Topic</div>
  <div class="ptab" id="atab-4" onclick="goToAdminStep(4)"><div class="pletter">S</div>Structure</div>
  <div class="ptab lib-tab" onclick="showLibrary()"><div class="pletter" style="background:var(--gold-light);color:var(--gold)">üìö</div>My Library</div>
</div>
<div class="main">
<div>
<div class="pdots" id="admin-pdots">
  <div class="pdot active"></div><div class="pline"></div>
  <div class="pdot"></div><div class="pline"></div>
  <div class="pdot"></div><div class="pline"></div>
  <div class="pdot"></div><div class="pline"></div>
  <div class="pdot"></div>
</div>

<!-- ADMIN STEP 0 ‚Äî PURPOSE -->
<div class="asp active" id="astep-0">
<div class="card"><div class="ch"><div class="ci" style="background:var(--purple-light)">üèõÔ∏è</div><div class="ch-text"><h2>P ‚Äî Purpose: Your Leadership Role</h2><p>Tell the AI who you are and what kind of leader you are in your district or school system.</p></div></div>
<div class="cb">
  <div class="fr"><label>Your Leadership Role <span class="req">*</span></label>
    <select id="a-role" onchange="handleCustomOrSel('a-role','a-role-custom','a-role-custom-row');aRebuild()">
      <option value="">‚Äî Select your role ‚Äî</option>
      <optgroup label="District Level">
        <option value="a CTE District Director">CTE District Director</option>
        <option value="an Assistant Superintendent of Curriculum and Instruction">Asst. Superintendent ‚Äî Curriculum & Instruction</option>
        <option value="a Director of English Learner Programs">Director of English Learner Programs</option>
        <option value="a Director of College and Career Readiness">Director of College & Career Readiness</option>
        <option value="a Director of Special Education and Student Services">Director of Special Education & Student Services</option>
        <option value="a Curriculum and Instruction Coordinator">Curriculum & Instruction Coordinator</option>
        <option value="an EL/Bilingual Program Coordinator">EL / Bilingual Program Coordinator</option>
        <option value="a Director of Data and Accountability">Director of Data & Accountability</option>
        <option value="a Title III Coordinator">Title III Coordinator</option>
        <option value="a Perkins V Local Coordinator">Perkins V Local Coordinator</option>
        <option value="a District Superintendent">District Superintendent</option>
      </optgroup>
      <optgroup label="School / Site Level">
        <option value="a High School Principal">High School Principal</option>
        <option value="an Assistant Principal overseeing CTE and Career Pathways">Assistant Principal ‚Äî CTE & Career Pathways</option>
        <option value="a CTE Department Chair and Instructional Lead">CTE Department Chair / Instructional Lead</option>
        <option value="an Instructional Coach supporting CTE and EL teachers">Instructional Coach ‚Äî CTE & EL</option>
        <option value="a School Counselor specializing in College and Career">School Counselor ‚Äî College & Career</option>
      </optgroup>
      <optgroup label="Regional / Other">
        <option value="a Regional Occupational Program (ROP/ROC) Director">ROP / ROC Director</option>
        <option value="a County Office of Education (COE) CTE Coordinator">COE CTE Coordinator</option>
        <option value="a CTE Program Reviewer or Accreditation Specialist">CTE Program Reviewer / Accreditation Specialist</option>
      </optgroup>
      <option value="__custom__">‚úèÔ∏è Write my own role...</option>
    </select>
    <div class="custom-or-row" id="a-role-custom-row" style="display:none">
      <input type="text" id="a-role-custom" placeholder="Describe your leadership role..." oninput="aRebuild()">
    </div>
  </div>
  <div class="fr"><label>District / Organization Context <span class="hint">optional but very powerful</span></label>
    <textarea id="a-context" placeholder="e.g. Mid-size urban district, 14,000 students, 62% English Learners, 8 CTE pathways across 3 high schools, significant newcomer and refugee population. Currently under LCAP review..." oninput="aRebuild()" style="min-height:72px"></textarea>
  </div>
  <div class="fr"><label>Primary Goal for This Prompt</label>
    <select id="a-goal" onchange="handleCustomOrSel('a-goal','a-goal-custom','a-goal-custom-row');aRebuild()">
      <option value="">‚Äî What do you need the AI to help you do? ‚Äî</option>
      <option value="draft a policy brief">Draft a policy brief</option>
      <option value="analyze data and generate insights">Analyze data and generate insights</option>
      <option value="create a professional development plan">Create a professional development plan</option>
      <option value="write a program review or compliance report">Write a program review / compliance report</option>
      <option value="design a curriculum alignment framework">Design a curriculum alignment framework</option>
      <option value="generate a strategic improvement plan">Generate a strategic improvement plan</option>
      <option value="draft communication to stakeholders">Draft stakeholder communication</option>
      <option value="create a needs assessment tool">Create a needs assessment tool</option>
      <option value="build a coaching or observation protocol">Build a coaching / observation protocol</option>
      <option value="develop a budget justification narrative">Develop a budget justification narrative</option>
      <option value="write a grant narrative or application">Write a grant narrative</option>
      <option value="create a presentation for the school board">Create a school board presentation</option>
      <option value="__custom__">‚úèÔ∏è Write my own goal...</option>
    </select>
    <div class="custom-or-row" id="a-goal-custom-row" style="display:none">
      <input type="text" id="a-goal-custom" placeholder="Describe what you need the AI to create..." oninput="aRebuild()">
    </div>
  </div>
  <button class="gbtn" style="background:linear-gradient(135deg,#3d2460,#5c3d8f)" onclick="goToAdminStep(1)">Next: Define Audience ‚Üí</button>
</div></div>
</div>

<!-- ADMIN STEP 1 ‚Äî AUDIENCE -->
<div class="asp" id="astep-1">
<div class="card"><div class="ch"><div class="ci" style="background:var(--orange-light)">üë•</div><div class="ch-text"><h2>A ‚Äî Audience: Who Will Use This?</h2><p>Specify who this output is intended for ‚Äî school board, teachers, families, state agencies, or your leadership team.</p></div></div>
<div class="cb">
  <div class="fr"><label>Primary Audience</label>
    <div class="cg">
      <div class="chip" onclick="toggleChip(this)" data-val="school board members and district trustees">üè´ School Board / Trustees</div>
      <div class="chip" onclick="toggleChip(this)" data-val="CTE teachers and instructional staff">üë©‚Äçüè´ CTE Teachers & Staff</div>
      <div class="chip" onclick="toggleChip(this)" data-val="school site administrators and principals">üè¢ Site Administrators</div>
      <div class="chip" onclick="toggleChip(this)" data-val="district leadership team and cabinet">üìã District Leadership Team</div>
      <div class="chip" onclick="toggleChip(this)" data-val="English Learner families and community members (multilingual audience requiring accessible, translated materials)">üåê EL Families & Community</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students and student advisory groups">üéì Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="California Department of Education (CDE) reviewers">üèõÔ∏è CDE / State Reviewers</div>
      <div class="chip" onclick="toggleChip(this)" data-val="Perkins V federal compliance reviewers">üìä Perkins V Reviewers</div>
      <div class="chip" onclick="toggleChip(this)" data-val="industry partners and advisory board members">ü§ù Industry Partners</div>
      <div class="chip" onclick="toggleChip(this)" data-val="higher education and articulation partners">üéì Higher Ed Partners</div>
      <div class="chip" onclick="toggleChip(this)" data-val="grant funders and philanthropic partners">üí∞ Grant Funders</div>
      <div class="chip" onclick="toggleChip(this)" data-val="union representatives and teacher leadership">ü§ù Union / Teacher Leadership</div>
    </div>
  </div>
  <div class="fr"><label>Student Population Context <span class="hint">who are the students affected by this work</span></label>
    <div class="cg">
      <div class="chip" onclick="toggleChip(this)" data-val="high percentage of English Learners (30%+ EL enrollment)">High EL Enrollment (30%+)</div>
      <div class="chip" onclick="toggleChip(this)" data-val="significant newcomer and recently arrived immigrant students">Newcomer / Recently Arrived</div>
      <div class="chip" onclick="toggleChip(this)" data-val="Long-Term English Learners (LTELs) requiring reclassification acceleration">Long-Term ELs (LTEL)</div>
      <div class="chip" onclick="toggleChip(this)" data-val="Students with Interrupted Formal Education (SIFE)">SIFE Students</div>
      <div class="chip" onclick="toggleChip(this)" data-val="high percentage of students experiencing poverty (Title I school or district)">Title I / High Poverty</div>
      <div class="chip" onclick="toggleChip(this)" data-val="racially and linguistically diverse student population">Racially/Linguistically Diverse</div>
      <div class="chip" onclick="toggleChip(this)" data-val="foster youth and students experiencing housing instability">Foster Youth / Homeless</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students with IEPs and 504 plans enrolled in CTE pathways">Special Education Inclusion</div>
    </div>
  </div>
  <button class="gbtn" style="background:linear-gradient(135deg,#b05a10,#e8601c)" onclick="goToAdminStep(2)">Next: Select Focus Areas ‚Üí</button>
</div></div>
</div>

<!-- ADMIN STEP 2 ‚Äî ROLE FOCUS -->
<div class="asp" id="astep-2">
<div class="card"><div class="ch"><div class="ci" style="background:#e8f5e9">üéØ</div><div class="ch-text"><h2>R ‚Äî Role Focus: Your Leadership Domain</h2><p>Select all leadership areas relevant to this prompt. These shape what the AI emphasizes and the frameworks it draws on.</p></div></div>
<div class="cb">
  <div class="sdiv">üéì College & Career Readiness</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="A-G requirements alignment and college preparatory access for CTE students">A-G & College Prep Alignment</div>
    <div class="chip" onclick="toggleChip(this)" data-val="dual enrollment and community college articulation agreements">Dual Enrollment / Articulation</div>
    <div class="chip" onclick="toggleChip(this)" data-val="FAFSA/CADAA completion rates and post-secondary access for EL and underrepresented students">FAFSA / CADAA Completion</div>
    <div class="chip" onclick="toggleChip(this)" data-val="work-based learning: internships, apprenticeships, job shadowing, and industry placements">Work-Based Learning</div>
    <div class="chip" onclick="toggleChip(this)" data-val="industry certifications, credentials, and licenses earned by CTE students">Industry Credentials & Certs</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Career Technical Student Organizations (CTSO): FCCLA, FBLA, HOSA, SkillsUSA, FFA">CTSO Programs</div>
    <div class="chip" onclick="toggleChip(this)" data-val="post-secondary transition planning and career pathway mapping for multilingual learners">Post-Secondary Transition Planning</div>
    <div class="chip" onclick="toggleChip(this)" data-val="California College Guidance Initiative (CCGI) and individualized student learning plans">CCGI / Individual Learning Plans</div>
  </div>
  <div class="sdiv">üìö Curriculum & Instruction</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="CTE curriculum review and alignment to California CTE Model Curriculum Standards">CTE Model Curriculum Standards</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Designated and Integrated ELD embedded in CTE content instruction">Integrated ELD in CTE</div>
    <div class="chip" onclick="toggleChip(this)" data-val="instructional materials adoption and equity audit of CTE resources">Materials Adoption & Equity Audit</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Universal Design for Learning (UDL) implementation in CTE">UDL Implementation</div>
    <div class="chip" onclick="toggleChip(this)" data-val="culturally sustaining and asset-based pedagogy in CTE pathways">Culturally Sustaining Pedagogy</div>
    <div class="chip" onclick="toggleChip(this)" data-val="instructional walkthrough and coaching protocols for CTE+EL classrooms">Walkthroughs & Coaching</div>
    <div class="chip" onclick="toggleChip(this)" data-val="professional learning communities (PLCs) and collaborative inquiry for CTE teachers">PLCs & Collaborative Inquiry</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Common Core integration across CTE pathways (CCSS ELA/Literacy in Technical Subjects)">CCSS Integration in CTE</div>
    <div class="chip" onclick="toggleChip(this)" data-val="program-level project-based learning and performance assessment design">Program-Level PBL & Assessment</div>
  </div>
  <div class="sdiv">‚úÖ Compliance & Accountability</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="Perkins V Local Application and Annual Performance Report (APR): core indicators, equity gaps, improvement plans">Perkins V ‚Äî APR & Core Indicators</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Program Quality Review (PQR) and pathway approval with CDE">CTE Program Quality Review (PQR)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="WASC/ACSWASC accreditation: CTE program area review and self-study">WASC Accreditation</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CA Dashboard indicators: Graduation Rate, College/Career Indicator (CCI), EL Progress, Suspension Rate ‚Äî disaggregated by subgroup">CA Dashboard & LCAP Alignment</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Local Control and Accountability Plan (LCAP): CTE and EL goal-setting, actions, and stakeholder engagement">LCAP Goals & Actions</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Title III compliance: EL services funding, use of funds, subgrantee reporting, and program evaluation">Title III Compliance</div>
    <div class="chip" onclick="toggleChip(this)" data-val="noncompliance corrective action plans for EL programs">Corrective Action Plans ‚Äî EL</div>
    <div class="chip" onclick="toggleChip(this)" data-val="AB 104 and AB 167/216 credit recovery and graduation pathway compliance">AB 104 / Credit Recovery Compliance</div>
  </div>
  <div class="sdiv">üåê LCAP & English Learner Accountability</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="Local Control Accountability Plan (LCAP): Lau v. Nichols obligations, EL identification, placement, and services">LCAP ‚Äî Core Obligations</div>
    <div class="chip" onclick="toggleChip(this)" data-val="EL identification, initial ELPAC, home language survey, and program placement options">EL Identification & ELPAC</div>
    <div class="chip" onclick="toggleChip(this)" data-val="EL reclassification criteria, LTEL prevention, monitoring, and re-designation policies">Reclassification & LTEL Prevention</div>
    <div class="chip" onclick="toggleChip(this)" data-val="EL program models: SEI, Dual Language Immersion (DLI), Transitional Bilingual, Late-Exit Bilingual">EL Program Models</div>
    <div class="chip" onclick="toggleChip(this)" data-val="meaningful access for English Learners to all CTE pathways: equal access, non-exclusion, appropriate language support">EL Access to CTE Pathways</div>
    <div class="chip" onclick="toggleChip(this)" data-val="EL parent and family rights: notification, program options, and multilingual communication">EL Family Notification & Rights</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Annual Measurable Achievement Objectives (AMAOs) for EL progress and proficiency">AMAOs & EL Progress Targets</div>
    <div class="chip" onclick="toggleChip(this)" data-val="monitoring of reclassified students (R-FEP) in CTE and core courses for 4 years post-reclassification">R-FEP Monitoring in CTE</div>
  </div>
  <div class="sdiv">üìä Data, Equity & Strategic Planning</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="disaggregated data analysis by race, language, EL status, income, disability ‚Äî identifying opportunity gaps in CTE enrollment and outcomes">Disaggregated Equity Data Analysis</div>
    <div class="chip" onclick="toggleChip(this)" data-val="CTE enrollment equity: identifying under-represented student groups and building recruitment strategies">CTE Enrollment Equity</div>
    <div class="chip" onclick="toggleChip(this)" data-val="strategic plan development: vision, goals, actions, resource alignment, and success metrics for CTE+EL">Strategic Plan Development</div>
    <div class="chip" onclick="toggleChip(this)" data-val="program evaluation and continuous improvement: PDSA cycles, data collection, analysis, and action planning">Program Evaluation & PDSA Cycles</div>
    <div class="chip" onclick="toggleChip(this)" data-val="budget development and resource allocation for CTE and EL: Perkins, Title III, LCFF supplemental/concentration">Budget & Resource Allocation</div>
    <div class="chip" onclick="toggleChip(this)" data-val="stakeholder engagement and community input for CTE and EL program design">Stakeholder Engagement</div>
  </div>
  <div class="sdiv">üßë‚Äçüíº Professional Development & Capacity Building</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="CTE teacher PD: EL strategies, SIOP, SDAIE, translanguaging, culturally responsive instruction">PD for CTE Teachers ‚Äî EL Strategies</div>
    <div class="chip" onclick="toggleChip(this)" data-val="new teacher induction and mentoring for CTE and EL classroom teachers">New Teacher Induction & Mentoring</div>
    <div class="chip" onclick="toggleChip(this)" data-val="administrator training on EL civil rights obligations, instructional leadership for equity, and CTE program oversight">Administrator Training ‚Äî EL & Equity</div>
    <div class="chip" onclick="toggleChip(this)" data-val="classified staff training on EL support, culturally responsive communication, and trauma-informed practice">Classified Staff Training</div>
    <div class="chip" onclick="toggleChip(this)" data-val="building a district equity team and coaching cycle for systemic change in CTE and EL outcomes">District Equity Team & Coaching Cycle</div>
  </div>
  <button class="gbtn" style="background:linear-gradient(135deg,#0d4f47,#0d7b6e)" onclick="goToAdminStep(3)">Next: Describe the Topic ‚Üí</button>
</div></div>
</div>

<!-- ADMIN STEP 3 ‚Äî TOPIC -->
<div class="asp" id="astep-3">
<div class="card"><div class="ch"><div class="ci" style="background:var(--gold-light)">üìù</div><div class="ch-text"><h2>T ‚Äî Topic: What Specifically?</h2><p>Describe the specific issue, challenge, or initiative you need AI to address. The more specific you are, the more actionable the output.</p></div></div>
<div class="cb">
  <div class="fr"><label>Specific Topic / Challenge / Initiative <span class="req">*</span></label>
    <textarea id="a-topic" placeholder="Be specific. Examples:&#10;‚Ä¢ Our Perkins V APR shows a 28-point gap in CCI attainment for EL students vs. non-EL in our Health Science pathway. I need a corrective action plan.&#10;‚Ä¢ We have 340 LTEL students who have been EL for 6+ years. I need a district-wide reclassification acceleration strategy.&#10;‚Ä¢ I need to write a board presentation justifying expansion of dual enrollment to include EL students in the Food Science pathway.&#10;‚Ä¢ We received a Title III noncompliance finding ‚Äî insufficient ELD in CTE. I need a response plan." oninput="aRebuild()" style="min-height:120px"></textarea>
  </div>
  <div class="fr"><label>Relevant Data or Context <span class="hint">numbers, percentages, previous efforts ‚Äî highly recommended</span></label>
    <textarea id="a-data" placeholder="e.g. 42% EL enrollment districtwide, 18% reclassification rate (below state avg. of 24%), 6 pathways with fewer than 10% EL enrollment, 3 PQR corrective action findings, $420K Perkins allocation..." oninput="aRebuild()" style="min-height:72px"></textarea>
  </div>
  <div class="fr"><label>Urgency / Timeline</label>
    <select id="a-urgency" onchange="aRebuild()">
      <option value="">‚Äî Select timeline ‚Äî</option>
      <option value="This is urgent ‚Äî needed within the next week for an upcoming deadline">üî¥ Urgent ‚Äî within 1 week</option>
      <option value="Needed within the next month for planning or compliance purposes">üü† Within 1 month</option>
      <option value="Planning ahead for next semester or school year">üü° Next semester / school year</option>
      <option value="Long-range strategic planning with a 2‚Äì3 year implementation horizon">üü¢ Long-range (2‚Äì3 years)</option>
    </select>
  </div>
  <button class="gbtn" style="background:linear-gradient(135deg,#c9820a,#e8a820)" onclick="goToAdminStep(4)">Next: Define Structure ‚Üí</button>
</div></div>
</div>

<!-- ADMIN STEP 4 ‚Äî STRUCTURE -->
<div class="asp" id="astep-4">
<div class="card"><div class="ch"><div class="ci" style="background:#e8f5e9">üìê</div><div class="ch-text"><h2>S ‚Äî Structure: Format & Deliverables</h2><p>Tell the AI exactly what to produce and how it should be organized.</p></div></div>
<div class="cb">
  <div class="fr"><label>Required Components <span class="hint">select all needed</span></label>
    <div class="cg">
      <div class="chip" onclick="toggleChip(this)" data-val="an executive summary (1 page max) suitable for busy district leaders">üìÑ Executive Summary</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a data analysis section interpreting key findings and equity implications">üìä Data Analysis Section</div>
      <div class="chip" onclick="toggleChip(this)" data-val="specific, measurable recommended actions with responsible parties and timelines">‚úÖ Action Steps with Timeline</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a root cause analysis using structured frameworks (fishbone diagram, 5 Whys, or systemic equity analysis)">üåø Root Cause Analysis</div>
      <div class="chip" onclick="toggleChip(this)" data-val="SMART goals tied to student outcome metrics and equity indicators">üéØ SMART Goals</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a budget and resource implications section with funding source alignment">üí∞ Budget / Resource Implications</div>
      <div class="chip" onclick="toggleChip(this)" data-val="talking points for board presentation or community meeting ‚Äî accessible language for non-specialists">üé§ Board / Community Talking Points</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a stakeholder communication template (letter, email, or multilingual family flyer)">‚úâÔ∏è Stakeholder Communication</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a professional development session outline with objectives, agenda, and activities">üìã PD Session Outline</div>
      <div class="chip" onclick="toggleChip(this)" data-val="an instructional observation or walkthrough protocol with look-fors and evidence indicators">üëÅ Walkthrough / Observation Protocol</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a program evaluation rubric with proficiency-level descriptors at 4 levels">üìè Program Evaluation Rubric</div>
      <div class="chip" onclick="toggleChip(this)" data-val="a needs assessment survey or focus group discussion protocol">üîç Needs Assessment Tool</div>
      <div class="chip" onclick="toggleChip(this)" data-val="citations of California Education Code, federal law (EEOA, Title III, Perkins V), and CDE guidance documents">‚öñÔ∏è Legal / Policy Citations</div>
      <div class="chip" onclick="toggleChip(this)" data-val="explicit alignment to LCAP goals, actions, and LCFF supplemental/concentration funding priorities">üìã LCAP Alignment</div>
    </div>
  </div>
  <div class="fr"><label>Tone & Register</label>
    <div class="cg">
      <div class="chip" onclick="toggleChip(this)" data-val="formal and professional ‚Äî appropriate for state submission, board report, or official correspondence">üèõÔ∏è Formal / Official</div>
      <div class="chip" onclick="toggleChip(this)" data-val="data-driven and evidence-based ‚Äî grounded in research, outcome metrics, and best practice citations">üìä Data-Driven</div>
      <div class="chip" onclick="toggleChip(this)" data-val="equity-centered and asset-based ‚Äî framing challenges through systemic inequity, not student deficits">‚öñÔ∏è Equity-Centered</div>
      <div class="chip" onclick="toggleChip(this)" data-val="plain language and accessible ‚Äî understandable to non-specialist stakeholders, parents, and community members">üåê Plain Language</div>
      <div class="chip" onclick="toggleChip(this)" data-val="solutions-oriented and strengths-based ‚Äî leading with assets and what is working">üí° Solutions-Oriented</div>
      <div class="chip" onclick="toggleChip(this)" data-val="urgency framing ‚Äî conveying the moral and legal imperative to act for underserved students">üî¥ Urgency Framing</div>
    </div>
  </div>
  <div class="fr"><label>Additional Instructions</label>
    <textarea id="a-extra" placeholder="e.g. Please cite Ed Code 52060 (LCAP), Casta√±eda v. Pickard standards for EL programs, and Perkins V Section 135 required activities. Use CA-specific terminology. Compare to state benchmark averages. Include a timeline with quarterly milestones..." oninput="aRebuild()"></textarea>
  </div>
  <button class="gbtn" onclick="aGenerateFinal()">‚ú® Generate My Leadership Prompt</button>
</div></div>
</div>

</div><!-- admin left col -->

<!-- ADMIN SIDEBAR -->
<div class="sidebar">
  <div class="pcard">
    <div class="pcardh"><h3>Your Leadership Prompt</h3><div class="lbadge"><div class="ldot" style="background:#a78bfa"></div>Live</div></div>
    <div class="qwrap">
      <div class="qlabel"><span>Prompt strength</span><span id="a-qpct">0%</span></div>
      <div class="qtrack"><div class="qfill" id="a-qfill" style="width:0%;background:linear-gradient(90deg,var(--purple),#a78bfa)"></div></div>
    </div>
    <div class="pout" id="a-pout" style="border-top:3px solid var(--purple)"><div class="pph">‚ú¶ Your leadership prompt builds here.<br><br>Start with <strong>P ‚Üí Purpose</strong> above.</div></div>
    <div class="pcf">
      <button class="btn bpri" onclick="aCopyPrompt()">üìã Copy</button>
      <button class="btn bsave" onclick="aOpenSaveModal()">üíæ Save</button>
      <button class="btn bsec" onclick="aReset()">üîÑ Reset</button>
    </div>
  </div>
  <div class="card" style="margin-top:14px"><div class="cb" style="padding:16px">
    <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.08em;color:var(--purple);margin-bottom:10px">‚ú¶ Admin Mode Tips</div>
    <div style="font-size:13px;color:var(--muted);line-height:1.7">
      <p>üèõÔ∏è <strong>Specificity = better output.</strong> Include real data ‚Äî percentages, enrollment counts, gap sizes.</p>
      <p style="margin-top:6px">‚öñÔ∏è <strong>LCAP + Compliance</strong> chips generate legally-grounded language with Ed Code and case law citations.</p>
      <p style="margin-top:6px">üìä <strong>Add your CA Dashboard data</strong> in Step T ‚Äî the AI will interpret it and build goals around it.</p>
      <p style="margin-top:6px">üé§ <strong>Board Talking Points</strong> = presentation-ready language non-specialists can follow.</p>
      <p style="margin-top:6px">üìã <strong>LCAP Alignment</strong> auto-connects your work to your district's goals and metrics.</p>
      <p style="margin-top:6px">‚öñÔ∏è <strong>Legal Citations</strong> chip adds Casta√±eda standards, Title III, Perkins V, and Ed Code references automatically.</p>
    </div>
  </div></div>
</div>

</div><!-- admin main grid -->
</div><!-- end admin-panel -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SPREADSHEET PROMPT BUILDER MODE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="sheet-panel" style="display:none">

<div class="fbar" id="sheet-fbar" style="display:none">
  <div class="ptab active" id="stab-0" onclick="goToSheetStep(0)"><div class="pletter" style="background:#e3f2fd;color:#1565c0">1</div>Template</div>
  <div class="ptab" id="stab-1" onclick="goToSheetStep(1)"><div class="pletter">2</div>Purpose</div>
  <div class="ptab" id="stab-2" onclick="goToSheetStep(2)"><div class="pletter">3</div>Columns</div>
  <div class="ptab" id="stab-3" onclick="goToSheetStep(3)"><div class="pletter">4</div>Formulas</div>
  <div class="ptab" id="stab-4" onclick="goToSheetStep(4)"><div class="pletter">5</div>Design</div>
  <div class="ptab lib-tab" onclick="showLibrary()"><div class="pletter" style="background:var(--gold-light);color:var(--gold)">üìö</div>My Library</div>
</div>

<div class="main">
<div>
<div class="pdots" id="sheet-pdots">
  <div class="pdot active"></div><div class="pline"></div>
  <div class="pdot"></div><div class="pline"></div>
  <div class="pdot"></div><div class="pline"></div>
  <div class="pdot"></div><div class="pline"></div>
  <div class="pdot"></div>
</div>

<!-- SHEET STEP 0 ‚Äî TEMPLATE PICKER -->
<div class="ssp active" id="sstep-0">
<div class="card"><div class="ch"><div class="ci" style="background:#e3f2fd">üìä</div><div class="ch-text">
  <h2>Step 1 ‚Äî Choose a Starting Template</h2>
  <p>Pick a template to pre-fill the builder, or start from scratch and customize everything yourself.</p>
</div></div>
<div class="cb">
  <div class="sheet-templates">

    <div class="stpl" onclick="loadTemplate('grades')">
      <div class="stpl-icon">üéì</div>
      <div class="stpl-name">Student Grade Tracker</div>
      <div class="stpl-desc">Assignment scores, weighted averages, letter grades, ELD level column, color-coded by performance</div>
      <div class="stpl-tags"><span>Formulas</span><span>Color coding</span><span>Teacher</span></div>
    </div>

    <div class="stpl" onclick="loadTemplate('el')">
      <div class="stpl-icon">üåê</div>
      <div class="stpl-name">EL Student Monitoring</div>
      <div class="stpl-desc">ELPAC scores, ELD level, reclassification status, years as EL, LTEL flag, R-FEP monitoring tracker</div>
      <div class="stpl-tags"><span>LCAP</span><span>Auto-flags</span><span>Admin</span></div>
    </div>

    <div class="stpl" onclick="loadTemplate('cte')">
      <div class="stpl-icon">üè´</div>
      <div class="stpl-name">CTE Enrollment Equity</div>
      <div class="stpl-desc">Pathway enrollment by race, EL status, gender, IEP. Calculates representation gaps vs. district demographics</div>
      <div class="stpl-tags"><span>Equity data</span><span>Gap analysis</span><span>Admin</span></div>
    </div>

    <div class="stpl" onclick="loadTemplate('perkins')">
      <div class="stpl-icon">üí∞</div>
      <div class="stpl-name">Perkins V Budget Tracker</div>
      <div class="stpl-desc">Allocation by activity, spent vs. remaining, compliance % checks, required set-aside tracking</div>
      <div class="stpl-tags"><span>Budget</span><span>Compliance</span><span>Admin</span></div>
    </div>

    <div class="stpl" onclick="loadTemplate('attendance')">
      <div class="stpl-icon">üìÖ</div>
      <div class="stpl-name">Attendance & Behavior Log</div>
      <div class="stpl-desc">Daily attendance by student, tardy/absent counts, chronic absence flag (10%+), behavior incident log</div>
      <div class="stpl-tags"><span>Auto-flags</span><span>Chronic absence</span><span>Teacher</span></div>
    </div>

    <div class="stpl" onclick="loadTemplate('pd')">
      <div class="stpl-icon">üìã</div>
      <div class="stpl-name">Professional Development Tracker</div>
      <div class="stpl-desc">Staff PD hours by topic, completion status, required hours progress bar, sign-in log, compliance summary</div>
      <div class="stpl-tags"><span>Progress tracking</span><span>Compliance</span><span>Admin</span></div>
    </div>

    <div class="stpl stpl-blank" onclick="loadTemplate('blank')">
      <div class="stpl-icon">‚úèÔ∏è</div>
      <div class="stpl-name">Start from Scratch</div>
      <div class="stpl-desc">Build a completely custom spreadsheet ‚Äî you define every column, formula, and formatting rule</div>
      <div class="stpl-tags"><span>Custom</span><span>Full control</span></div>
    </div>

  </div>
  <button class="gbtn" style="background:linear-gradient(135deg,#1565c0,#1976d2);margin-top:8px" onclick="goToSheetStep(1)">Next: Describe the Purpose ‚Üí</button>
</div></div>
</div>

<!-- SHEET STEP 1 ‚Äî PURPOSE -->
<div class="ssp" id="sstep-1">
<div class="card"><div class="ch"><div class="ci" style="background:#e8f5e9">üéØ</div><div class="ch-text">
  <h2>Step 2 ‚Äî Purpose & Context</h2>
  <p>Tell the AI what this spreadsheet is for and who will use it. The more context, the smarter the output.</p>
</div></div>
<div class="cb">
  <div class="fr"><label>Spreadsheet Title / Name <span class="req">*</span></label>
    <input type="text" id="s-title" placeholder="e.g. CTE Food Science ‚Äî Period 2 Grade Tracker, Spring 2026" oninput="sRebuild()">
  </div>
  <div class="fr"><label>Who Will Use This?</label>
    <div class="cg">
      <div class="chip" onclick="toggleChip(this)" data-val="classroom teacher tracking student progress">üë©‚Äçüè´ Classroom Teacher</div>
      <div class="chip" onclick="toggleChip(this)" data-val="school counselor monitoring student caseload">üßë‚Äçüíº School Counselor</div>
      <div class="chip" onclick="toggleChip(this)" data-val="site administrator or principal">üè¢ Site Administrator</div>
      <div class="chip" onclick="toggleChip(this)" data-val="district administrator or program coordinator">üèõÔ∏è District Administrator</div>
      <div class="chip" onclick="toggleChip(this)" data-val="instructional coach or department lead">üéØ Instructional Coach</div>
      <div class="chip" onclick="toggleChip(this)" data-val="students as a self-tracking tool">üéì Students (self-tracking)</div>
    </div>
  </div>
  <div class="fr"><label>What Problem Does This Solve?</label>
    <textarea id="s-purpose" placeholder="e.g. I need a way to track grades for 32 students across 8 assignments with weighted categories (classwork 40%, projects 40%, participation 20%). I want it to automatically calculate the final grade and flag students below 70%." oninput="sRebuild()" style="min-height:90px"></textarea>
  </div>
  <div class="fr"><label>Number of Students / Rows</label>
    <select id="s-rows" onchange="sRebuild()">
      <option value="">‚Äî Select ‚Äî</option>
      <option value="up to 15 rows of data">Up to 15</option>
      <option value="up to 30 rows of data">Up to 30</option>
      <option value="up to 50 rows of data">Up to 50</option>
      <option value="up to 100 rows of data">Up to 100</option>
      <option value="100+ rows ‚Äî build for scalability">100+ (scalable)</option>
    </select>
  </div>
  <button class="gbtn" style="background:linear-gradient(135deg,#1565c0,#1976d2)" onclick="goToSheetStep(2)">Next: Define Columns ‚Üí</button>
</div></div>
</div>

<!-- SHEET STEP 2 ‚Äî COLUMNS -->
<div class="ssp" id="sstep-2">
<div class="card"><div class="ch"><div class="ci" style="background:var(--purple-light)">üìã</div><div class="ch-text">
  <h2>Step 3 ‚Äî Columns & Data Fields</h2>
  <p>Choose what columns to include. These become the structure of your spreadsheet.</p>
</div></div>
<div class="cb">

  <div class="sdiv">üë§ Student / Person Identifiers</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="Student ID number">Student ID</div>
    <div class="chip" onclick="toggleChip(this)" data-val="First Name and Last Name (separate columns)">First & Last Name</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Period or Class Section">Period / Section</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Grade Level (9th, 10th, 11th, 12th)">Grade Level</div>
    <div class="chip" onclick="toggleChip(this)" data-val="EL Status (Active EL / RFEP / Non-EL)">EL Status</div>
    <div class="chip" onclick="toggleChip(this)" data-val="ELD Proficiency Level (Emerging / Expanding / Bridging)">ELD Level</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Home Language">Home Language</div>
    <div class="chip" onclick="toggleChip(this)" data-val="IEP or 504 flag (Yes/No)">IEP / 504 Flag</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Gender">Gender</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Ethnicity / Race">Ethnicity / Race</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Counselor or Case Manager assigned">Counselor / Case Manager</div>
  </div>

  <div class="sdiv">üìä Academic / Score Data</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="multiple Assignment score columns (configurable number)">Assignment Scores (multiple)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Quiz and Test scores">Quiz / Test Scores</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Project or Performance Assessment scores">Project / Performance Scores</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Participation or Effort score">Participation / Effort</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Current weighted average or cumulative grade percentage">Current Average %</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Letter grade (A/B/C/D/F) auto-calculated from percentage">Letter Grade (auto)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Semester 1 and Semester 2 grades">Semester 1 & 2 Grades</div>
    <div class="chip" onclick="toggleChip(this)" data-val="ELPAC Overall score and domain scores (Oral, Written)">ELPAC Scores</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Standardized test scores (CAASPP, SBAC)">CAASPP / SBAC Scores</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Credit completion status">Credits Completed</div>
  </div>

  <div class="sdiv">üìÖ Attendance & Behavior</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="Daily attendance columns (Present/Absent/Tardy per day)">Daily Attendance (P/A/T)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Total absences and total tardies (auto-counted)">Total Absences & Tardies</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Attendance rate percentage (auto-calculated)">Attendance Rate %</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Chronic absence flag (auto-flagged when attendance below 90%)">Chronic Absence Flag</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Behavior incident log (date, type, action taken)">Behavior Incident Log</div>
  </div>

  <div class="sdiv">üèõÔ∏è Program / Compliance Data</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="CTE Pathway enrolled">CTE Pathway</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Industry certification earned (Yes/No/In Progress)">Industry Cert Status</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Dual enrollment or articulation status">Dual Enrollment Status</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Reclassification date and status (Active EL / Reclassified / Monitor Year 1‚Äì4)">Reclassification Status</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Years as English Learner (auto-calculated from EL designation date)">Years as EL (auto-calc)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="LTEL flag (auto: 6+ years as EL without reclassification)">LTEL Auto-Flag</div>
    <div class="chip" onclick="toggleChip(this)" data-val="Budget line item, amount allocated, amount spent, remaining balance">Budget Line Items</div>
    <div class="chip" onclick="toggleChip(this)" data-val="PD hours completed vs. required, completion status">PD Hours Tracker</div>
  </div>

  <div class="fr" style="margin-top:14px"><label>Custom Columns <span class="hint">describe any additional columns you need</span></label>
    <textarea id="s-custom-cols" placeholder="e.g. A column for teacher notes/comments. A column for parent contact log with date and outcome. A column for FAFSA completion status (Yes/No/In Progress)..." oninput="sRebuild()" style="min-height:60px"></textarea>
  </div>
  <button class="gbtn" style="background:linear-gradient(135deg,#1565c0,#1976d2)" onclick="goToSheetStep(3)">Next: Add Formulas ‚Üí</button>
</div></div>
</div>

<!-- SHEET STEP 3 ‚Äî FORMULAS -->
<div class="ssp" id="sstep-3">
<div class="card"><div class="ch"><div class="ci" style="background:var(--orange-light)">‚ö°</div><div class="ch-text">
  <h2>Step 4 ‚Äî Formulas & Smart Logic</h2>
  <p>Choose what the spreadsheet should calculate automatically. This is where the magic happens.</p>
</div></div>
<div class="cb">

  <div class="sdiv">üßÆ Calculations & Averages</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="weighted average formula that calculates final grade from category weights (e.g. classwork 40%, tests 40%, participation 20%)">Weighted Average Grade</div>
    <div class="chip" onclick="toggleChip(this)" data-val="simple average (AVERAGE formula) across all score columns">Simple Average</div>
    <div class="chip" onclick="toggleChip(this)" data-val="SUM formula for totals (hours, points, absences, budget)">SUM Totals</div>
    <div class="chip" onclick="toggleChip(this)" data-val="COUNTIF formula to count how many students meet a condition (e.g. passing, at-risk, reclassified)">COUNTIF ‚Äî Count by Condition</div>
    <div class="chip" onclick="toggleChip(this)" data-val="percentage calculation (e.g. attendance rate = days present √∑ total days √ó 100)">Percentage Calculations</div>
    <div class="chip" onclick="toggleChip(this)" data-val="running balance formula (budget remaining = allocated ‚àí spent)">Running Balance</div>
    <div class="chip" onclick="toggleChip(this)" data-val="DATEDIF formula to calculate number of years between two dates (e.g. years as EL)">Date Difference (DATEDIF)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="RANK formula to rank students by performance">RANK / Ranking</div>
    <div class="chip" onclick="toggleChip(this)" data-val="progress toward goal percentage (current √∑ target √ó 100)">Progress Toward Goal %</div>
  </div>

  <div class="sdiv">üîÄ IF Logic & Auto-Flags</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="IF formula to auto-assign letter grade from percentage (A=90‚Äì100, B=80‚Äì89, C=70‚Äì79, D=60‚Äì69, F=below 60)">Auto Letter Grade (IF)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="IF formula to flag students at risk (e.g. grade below 70% ‚Üí shows 'AT RISK', else blank)">At-Risk Flag (IF)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="IF formula to flag chronic absenteeism (attendance rate below 90% ‚Üí 'CHRONIC ABSENT')">Chronic Absence Flag (IF)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="nested IF formula for ELD level label (Emerging / Expanding / Bridging based on ELPAC score ranges)">ELD Level Auto-Label (IF)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="IF formula for LTEL flag (if years as EL ‚â• 6 AND not reclassified ‚Üí 'LTEL WATCH')">LTEL Flag (IF)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="IF formula for pass/fail or completion status based on threshold">Pass / Fail Status</div>
    <div class="chip" onclick="toggleChip(this)" data-val="IFS or nested IF for multi-level status (e.g. On Track / Approaching / At Risk / Critical)">Multi-Level Status Labels</div>
    <div class="chip" onclick="toggleChip(this)" data-val="AND/OR logic combining multiple conditions (e.g. flag only if EL AND grade below 70% AND absences above 5)">AND / OR Combined Conditions</div>
  </div>

  <div class="sdiv">üîç Lookup & Reference</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="VLOOKUP or XLOOKUP to pull data from a reference sheet (e.g. student roster, grade scale table)">VLOOKUP / XLOOKUP</div>
    <div class="chip" onclick="toggleChip(this)" data-val="dropdown validation list using Data Validation (e.g. EL Status choices, pathway names)">Dropdown Validation Lists</div>
    <div class="chip" onclick="toggleChip(this)" data-val="SUMIF formula to total values by category (e.g. total budget spent by funding source)">SUMIF by Category</div>
    <div class="chip" onclick="toggleChip(this)" data-val="AVERAGEIF to average scores only for a specific subgroup (e.g. average grade for EL students only)">AVERAGEIF by Subgroup</div>
    <div class="chip" onclick="toggleChip(this)" data-val="cross-sheet reference formulas pulling data from a separate tab">Cross-Sheet References</div>
  </div>

  <div class="fr" style="margin-top:14px"><label>Custom Formula Logic <span class="hint">describe any specific calculation you need</span></label>
    <textarea id="s-custom-formulas" placeholder="e.g. I need a formula that flags any student who has 3 or more missing assignments AND an attendance rate below 85%. Also a formula that calculates what grade a student needs on the final exam to pass with a 70%..." oninput="sRebuild()" style="min-height:80px"></textarea>
  </div>
  <button class="gbtn" style="background:linear-gradient(135deg,#1565c0,#1976d2)" onclick="goToSheetStep(4)">Next: Design & Formatting ‚Üí</button>
</div></div>
</div>

<!-- SHEET STEP 4 ‚Äî DESIGN -->
<div class="ssp" id="sstep-4">
<div class="card"><div class="ch"><div class="ci" style="background:var(--teal-light)">üé®</div><div class="ch-text">
  <h2>Step 5 ‚Äî Design & Formatting</h2>
  <p>Specify how the spreadsheet should look and behave. Good formatting makes data instantly readable.</p>
</div></div>
<div class="cb">

  <div class="sdiv">üé® Color Coding & Conditional Formatting</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="conditional formatting: green/yellow/red color scale on grade or score columns (high=green, medium=yellow, low=red)">üü¢üü°üî¥ Grade Color Scale</div>
    <div class="chip" onclick="toggleChip(this)" data-val="conditional formatting: highlight entire row red when student is flagged as At-Risk or Chronic Absent">Highlight At-Risk Rows Red</div>
    <div class="chip" onclick="toggleChip(this)" data-val="conditional formatting: highlight LTEL or EL students with a soft blue background for easy identification">Highlight EL/LTEL Rows Blue</div>
    <div class="chip" onclick="toggleChip(this)" data-val="alternating row colors (light gray and white) for readability">Alternating Row Colors</div>
    <div class="chip" onclick="toggleChip(this)" data-val="bold and colored header row with a distinct background color">Bold Color Header Row</div>
    <div class="chip" onclick="toggleChip(this)" data-val="conditional formatting: budget cells turn orange when spending exceeds 80% of allocation, red when over budget">Budget Warning Colors</div>
    <div class="chip" onclick="toggleChip(this)" data-val="conditional formatting: attendance cells turn yellow at 5 absences, red at 9+ absences">Attendance Warning Colors</div>
    <div class="chip" onclick="toggleChip(this)" data-val="progress bar visualization using cell fill percentage or REPT formula for visual progress tracking">Visual Progress Bars</div>
  </div>

  <div class="sdiv">üóÇÔ∏è Layout & Organization</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="frozen top header row and frozen first name column so they stay visible when scrolling">Frozen Header Row & Name Column</div>
    <div class="chip" onclick="toggleChip(this)" data-val="multiple tabs: one per class period, or separate tabs for data input vs. summary dashboard">Multiple Tabs / Sheets</div>
    <div class="chip" onclick="toggleChip(this)" data-val="a summary dashboard tab with key totals, averages, and counts pulled automatically from data tab">Summary Dashboard Tab</div>
    <div class="chip" onclick="toggleChip(this)" data-val="filters and sort functionality (AutoFilter on all columns)">AutoFilter on All Columns</div>
    <div class="chip" onclick="toggleChip(this)" data-val="print-ready layout: page breaks, print area, landscape orientation, school name/date header in print view">Print-Ready Layout</div>
    <div class="chip" onclick="toggleChip(this)" data-val="locked/protected cells for formulas so they cannot be accidentally overwritten">Protected Formula Cells</div>
    <div class="chip" onclick="toggleChip(this)" data-val="a notes or comments column with text wrap and auto row height">Notes Column with Text Wrap</div>
    <div class="chip" onclick="toggleChip(this)" data-val="clear visual section dividers with colored column group headers">Section Dividers / Column Groups</div>
  </div>

  <div class="sdiv">üì§ Output Format</div>
  <div class="cg">
    <div class="chip" onclick="toggleChip(this)" data-val="build the spreadsheet as a complete, self-contained HTML file with embedded CSS and JavaScript so I can open it directly in any browser">HTML file (open in browser)</div>
    <div class="chip" onclick="toggleChip(this)" data-val="provide the spreadsheet as Google Sheets formulas and structure instructions so I can build it in Google Sheets">Google Sheets instructions</div>
    <div class="chip" onclick="toggleChip(this)" data-val="provide Excel-compatible formulas and structure ‚Äî include both the formula text and a description of how to set up each column">Excel-compatible formulas</div>
    <div class="chip" onclick="toggleChip(this)" data-val="include a step-by-step setup guide explaining each formula and how to modify it for my specific data">Include Setup Guide</div>
  </div>

  <div class="fr" style="margin-top:14px"><label>Additional Design Notes</label>
    <textarea id="s-design-notes" placeholder="e.g. Use the school colors: navy blue and gold. Include the school name 'Lincoln CTE Academy' in the header. Add a legend explaining what each color means. Make it look professional enough to share with parents..." oninput="sRebuild()"></textarea>
  </div>
  <button class="gbtn" onclick="sGenerateFinal()">‚ú® Generate My Spreadsheet Prompt</button>
</div></div>
</div>

</div><!-- sheet left col -->

<!-- SHEET SIDEBAR -->
<div class="sidebar">
  <div class="pcard">
    <div class="pcardh"><h3>Your Spreadsheet Prompt</h3><div class="lbadge"><div class="ldot" style="background:#1976d2"></div>Live</div></div>
    <div class="qwrap">
      <div class="qlabel"><span>Prompt strength</span><span id="s-qpct">0%</span></div>
      <div class="qtrack"><div class="qfill" id="s-qfill" style="width:0%;background:linear-gradient(90deg,#1565c0,#42a5f5)"></div></div>
    </div>
    <div class="pout" id="s-pout" style="border-top:3px solid #1976d2"><div class="pph">‚ú¶ Your spreadsheet prompt builds here.<br><br>Start by picking a <strong>template</strong> above.</div></div>
    <div class="pcf">
      <button class="btn bpri" onclick="sCopyPrompt()">üìã Copy</button>
      <button class="btn bsave" onclick="sOpenSaveModal()">üíæ Save</button>
      <button class="btn bsec" onclick="sReset()">üîÑ Reset</button>
    </div>
  </div>
  <div class="card" style="margin-top:14px"><div class="cb" style="padding:16px">
    <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.08em;color:#1565c0;margin-bottom:10px">‚ú¶ How to Use This</div>
    <div style="font-size:13px;color:var(--muted);line-height:1.7">
      <p>üìä <strong>Copy this prompt</strong> and paste it into Claude, ChatGPT, or Gemini.</p>
      <p style="margin-top:6px">ü§ñ <strong>The AI will generate</strong> complete HTML/CSS/JS code for a fully functional spreadsheet.</p>
      <p style="margin-top:6px">üíæ <strong>Copy the code</strong> from the AI response, paste into a <code>.html</code> file, and open in any browser.</p>
      <p style="margin-top:6px">‚úÖ <strong>HTML output</strong> = works offline, no Excel/Sheets needed, shareable as a file.</p>
      <p style="margin-top:6px">üéØ <strong>More columns + formulas</strong> selected = more complete and usable the spreadsheet.</p>
      <p style="margin-top:6px">üîÅ <strong>Iterate</strong> ‚Äî paste the spreadsheet code back into AI and ask for changes.</p>
    </div>
  </div></div>
</div>

</div><!-- sheet main grid -->
</div><!-- end sheet-panel -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     LIBRARY PANEL (full-page overlay)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="lib-panel" style="display:none">
  <div class="lib-wrap">
    <div class="lib-header">
      <div>
        <div style="font-size:11px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:rgba(255,255,255,.6);margin-bottom:4px">Juliano Calvo ¬∑ CTE Prompt Builder</div>
        <h2 style="font-family:var(--font-serif);font-weight:800;font-size:26px;color:white;line-height:1.1">üìö My Prompt Library</h2>
        <p style="color:rgba(255,255,255,.75);font-size:13px;margin-top:5px">Save, search, and reuse your best AI prompts</p>
      </div>
      <button class="lib-close" onclick="hideLibrary()">‚úï Back to Builder</button>
    </div>
    <div class="lib-toolbar">
      <div class="lib-search-wrap">
        <span class="lib-search-icon">üîç</span>
        <input type="text" id="lib-search" placeholder="Search by title, sector, grade, keyword..." oninput="renderLibrary()">
      </div>
      <div class="lib-filters">
        <select id="lib-filter-sector" onchange="renderLibrary()">
          <option value="">All Sectors</option>
          <option>Hospitality, Tourism, and Recreation</option>
          <option>Business and Finance</option>
          <option>Health Science and Medical Technology</option>
          <option>Agriculture and Natural Resources</option>
          <option>Arts, Media, and Entertainment</option>
          <option>Education, Child Development and Family Services</option>
          <option>Information and Communication Technologies</option>
          <option>Engineering and Architecture</option>
        </select>
        <select id="lib-filter-grade" onchange="renderLibrary()">
          <option value="">All Grades</option>
          <option>7th</option><option>8th</option><option>9th</option>
          <option>10th</option><option>11th</option><option>12th</option>
        </select>
        <select id="lib-filter-eld" onchange="renderLibrary()">
          <option value="">All ELD Levels</option>
          <option value="emerging">üå± Emerging</option>
          <option value="expanding">üåø Expanding</option>
          <option value="bridging">üå≥ Bridging</option>
          <option value="ltel">‚è≥ LTEL</option>
          <option value="sife">üìå SIFE</option>
        </select>
        <select id="lib-sort" onchange="renderLibrary()">
          <option value="newest">‚Üì Newest first</option>
          <option value="oldest">‚Üë Oldest first</option>
          <option value="alpha">A‚ÄìZ by title</option>
        </select>
        <button class="lib-export-btn" onclick="exportLibrary()">‚¨áÔ∏è Export All</button>
        <button class="lib-clear-btn" onclick="clearLibrary()">üóë Clear All</button>
      </div>
    </div>
    <div class="lib-stats" id="lib-stats"></div>
    <div class="lib-grid" id="lib-grid">
      <div class="lib-empty">
        <div style="font-size:48px;margin-bottom:12px">üì≠</div>
        <div style="font-family:var(--font-serif);font-size:20px;font-weight:600;color:var(--ink);margin-bottom:8px">No saved prompts yet</div>
        <div style="color:var(--muted);font-size:14px;line-height:1.6">Build a prompt using the P.A.R.T.S. steps,<br>then click <strong>üíæ Save</strong> in the sidebar to add it here.</div>
      </div>
    </div>
  </div>
</div>

<!-- SAVE MODAL -->
<div class="modal-overlay" id="save-modal" onclick="closeSaveModal(event)">
  <div class="modal-box">
    <div class="modal-hdr">
      <h3>üíæ Save Prompt to Library</h3>
      <button class="tclose" onclick="closeSaveModalBtn()">‚úï</button>
    </div>
    <div class="modal-body">
      <div class="fr"><label>Prompt Title <span class="req">*</span></label>
        <input type="text" id="save-title" placeholder="e.g. HACCP Lesson ‚Äî Newcomer class, Food Safety" maxlength="80">
      </div>
      <div class="fr"><label>Tags <span class="hint">comma-separated, optional</span></label>
        <input type="text" id="save-tags" placeholder="e.g. Food Safety, 10th grade, Emerging ELD, SIOP">
      </div>
      <div class="fr"><label>Notes <span class="hint">optional</span></label>
        <textarea id="save-notes" placeholder="e.g. Used for Unit 3. Students loved the role-play extension..." style="min-height:60px"></textarea>
      </div>
      <div style="background:var(--teal-light);border-radius:8px;padding:10px 14px;font-size:12px;color:#0a5c52;margin-top:4px;max-height:80px;overflow:hidden;text-overflow:ellipsis" id="save-preview"></div>
      <button class="gbtn" style="margin-top:14px" onclick="savePrompt()">‚úÖ Save to My Library</button>
    </div>
  </div>
</div>

<!-- VIEW PROMPT MODAL -->
<div class="modal-overlay" id="view-modal" onclick="closeViewModal(event)">
  <div class="modal-box" style="max-width:640px">
    <div class="modal-hdr">
      <h3 id="view-modal-title">Prompt</h3>
      <button class="tclose" onclick="closeViewModalBtn()">‚úï</button>
    </div>
    <div class="modal-body">
      <div style="font-size:12px;color:var(--muted);margin-bottom:10px" id="view-modal-meta"></div>
      <div id="view-modal-tags" style="margin-bottom:10px"></div>
      <div id="view-modal-notes" style="background:var(--gold-light);border-left:3px solid var(--gold);border-radius:6px;padding:8px 12px;font-size:12.5px;color:#7a5208;margin-bottom:12px;display:none"></div>
      <textarea id="view-modal-text" style="width:100%;min-height:260px;font-size:12.5px;line-height:1.7;border:1.5px solid var(--border);border-radius:8px;padding:12px;font-family:var(--font-sans);resize:vertical;color:var(--ink)" readonly></textarea>
      <div style="display:flex;gap:9px;margin-top:12px">
        <button class="gbtn" style="margin-top:0;flex:1" onclick="copyFromView()">üìã Copy Prompt</button>
        <button class="btn bsec" style="flex:0 0 auto;background:var(--orange-light);color:var(--orange);border:1.5px solid var(--orange)" onclick="deleteFromView()">üóë Delete</button>
      </div>
    </div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  TOOLTIP DATA ‚Äî COMPREHENSIVE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const TT = {
  persona:{title:"P ‚Äî Persona: Who Are You?",body:`
<p>The <strong>Persona</strong> step tells the AI who is asking. Your role, experience level, and school context dramatically affect what kind of output you get.</p>
<p>A first-year teacher in a newcomer program needs very different materials than a veteran at a suburban ROP center ‚Äî the AI calibrates complexity, scaffolding depth, and assumptions about resources based on your persona.</p>
<div class="ttip">üí° <strong>School context is the highest-impact field.</strong> "Title I school with 80% Spanish-speaking EL students" tells the AI to use culturally relevant examples, Spanish cognates, and multilingual scaffolds throughout every section.</div>
<div class="tex">"I am a mid-career CTE teacher in the Food Service & Hospitality pathway at a Title I school with a predominantly multilingual student population, including several newcomer students from Guatemala and Somalia."</div>
<div class="tcombine">‚úèÔ∏è <strong>Don't see your role?</strong> Choose "Write my own role" at the bottom of the dropdown. Your custom description goes directly into the prompt ‚Äî be specific about your pathway, school type, and student community.</div>`},

  aim:{title:"A ‚Äî Aim: What Are You Creating?",body:`
<p>The <strong>Aim</strong> tells the AI exactly what type of resource to build and what content to address. Vague aims produce generic outputs.</p>
<p>The more you specify the output type, sector, pathway, and topic together, the more usable and targeted the result will be.</p>
<div class="ttip">üí° The difference between "lesson plan about food safety" and "performance assessment on HACCP principles for Expanding ELD students connected to a real restaurant context" is the difference between a generic result and something you can use Monday morning.</div>
<div class="tex">‚úÖ Strong: "A simulation scenario on handling a multilingual customer complaint in a hotel ‚Äî for Emerging and Expanding EL students in the HTR pathway, connected to FCCLA leadership skills."<br><br>‚ö†Ô∏è Too vague: "A lesson about hospitality."</div>`},

  outputtype:{title:"Output Types ‚Äî Which One to Choose?",body:`
<p><strong>üìÑ Lesson Plan</strong> ‚Äî Complete instructional plan: objectives, warm-up, instruction, guided practice, activity, closure, assessment. Best for single-day use.</p>
<p><strong>üèóÔ∏è Project / PBL</strong> ‚Äî Multi-step real-world project over several days or weeks. Students produce an authentic product. Excellent for demonstrating CTE competencies.</p>
<p><strong>üìä Performance Assessment</strong> ‚Äî Students demonstrate mastery through doing, not just testing. Ideal for EL students who need multiple modalities to show understanding.</p>
<p><strong>üóÇÔ∏è Portfolio Task</strong> ‚Äî Student collects and reflects on evidence of learning over time. Powerful for language development documentation.</p>
<p><strong>üìö Curriculum Unit</strong> ‚Äî A full sequence of connected lessons (1‚Äì6 weeks). Includes scope, sequence, assessments, and differentiation.</p>
<p><strong>üé≠ Simulation / Role-Play</strong> ‚Äî Students practice industry scenarios in a safe, scaffolded context. Outstanding for language development through authentic communication.</p>
<p><strong>üåà Differentiated Resource</strong> ‚Äî One activity in multiple versions by ELD level. Saves you from creating 3 separate handouts.</p>
<div class="ttip">üí° For multilingual learners, <strong>Performance Assessments, Projects, and Simulations</strong> reveal true understanding better than paper tests. They allow EL students to demonstrate mastery through authentic action, communication, and creation.</div>
<div class="tcombine">‚úèÔ∏è <strong>Have something not on the list?</strong> Type your own output type in the field below the chips ‚Äî it will be added directly to your prompt.</div>`},

  topic:{title:"Topic: Specificity = Power",body:`
<p>The topic is the content heart of your resource. Generic topics produce generic, unusable outputs.</p>
<div class="ttip">üí° Instead of "customer service," try: <em>"How to de-escalate a difficult guest situation using professional, respectful language in a multicultural hotel context ‚Äî drawing on the communication styles valued in our students' home communities."</em></div>
<div class="tex">‚úÖ Strong: "Menu planning that incorporates dietary restrictions, food allergies, and the diverse cultural food traditions of students' home communities ‚Äî for use in an actual school restaurant event."<br><br>‚ö†Ô∏è Too vague: "Food and culture."</div>`},

  recipients:{title:"R ‚Äî Recipients: Know Your Students",body:`
<p>The <strong>Recipients</strong> step is where equity happens. Describing your actual students ‚Äî their ELD levels, languages, identities ‚Äî allows the AI to suggest scaffolds and examples that are genuinely useful for your specific class.</p>
<p>This is the step most teachers skip, and it's the one that makes the biggest difference for multilingual learner support.</p>
<div class="ttip">üí° <strong>Asset-based framing:</strong> Students' home languages are not barriers ‚Äî they are cognitive resources. Name them so the AI can actively build on them through cognates, bilingual examples, and translanguaging strategies.</div>
<div class="tcombine">üåç <strong>Refugee students</strong> have unique assets: resilience, cross-cultural experience, often strong multilingual repertoires. Naming this context helps the AI create materials that honor their journeys while supporting their transition ‚Äî without reducing them to trauma narratives.</div>`},

  classcomp:{title:"Class Composition ‚Äî What It Tells the AI",body:`
<p>Your class composition tells the AI how many differentiation tiers to build, how much scaffolding to include, and which language supports to embed.</p>
<p><strong>SIFE</strong> (Students with Interrupted Formal Education) ‚Äî May need foundational literacy support alongside CTE content. Often have strong oral traditions and real-world knowledge to draw on.</p>
<p><strong>LTEL</strong> (Long-Term English Learners, 6+ years) ‚Äî Often have strong oral English but significant academic literacy gaps. Need explicit academic language coaching, not basic EL supports.</p>
<p><strong>Refugee Resettlement Class</strong> ‚Äî Students from multiple countries who may have survived displacement, have interrupted schooling, and need both linguistic and social-emotional support woven into instruction.</p>
<div class="ttip">üí° A sheltered SDAIE class of all EL students needs fundamentally different instruction than a mixed class with one or two newcomers. Select your actual composition to get the right supports built in ‚Äî or type your own description.</div>`},

  eld:{title:"CA ELD Proficiency Levels ‚Äî What They Mean in Practice",body:`
<p>California uses three proficiency levels under the 2012 CA ELD Standards:</p>
<p><strong>üå± Emerging (Level 1)</strong> ‚Äî Very beginning English. Students communicate with single words, short phrases, gestures. Benefits enormously from home language support, visual scaffolds, and realia. In CTE: demonstrate skills, label diagrams, use picture dictionaries.</p>
<p><strong>üåø Expanding (Level 2)</strong> ‚Äî Developing fluency. Communicates about familiar topics but struggles with abstract academic and technical language. Needs sentence frames, structured discussions, scaffolded texts. In CTE: explain steps, compare options, discuss scenarios with supports.</p>
<p><strong>üå≥ Bridging (Level 3)</strong> ‚Äî Near grade-level proficiency. Refining academic register, complex sentences, and disciplinary discourse. Benefits from academic language coaching. In CTE: analyze, evaluate, argue, and present with technical vocabulary.</p>
<p><strong>‚úÖ RFEP</strong> ‚Äî Reclassified Fluent English Proficient. Officially exited EL status but may still benefit from academic language development, especially for CTE technical vocabulary and written communication.</p>
<div class="ttip">üí° Selecting multiple ELD levels tells the AI to create <strong>differentiated materials</strong> ‚Äî one version per level ‚Äî which is one of the highest-value moves for a multilingual CTE classroom. Combining this with "3-Tiered Differentiation" in Structure gives you three ready-to-use versions in one response.</div>`},

  languages:{title:"üåê Home Languages ‚Äî Building Your Class Language Profile",body:`
<p>Naming your students' actual home languages is one of the most powerful things you can do in this prompt builder. It allows the AI to:</p>
<p>‚Ä¢ Suggest <strong>cognates</strong> (English-Spanish: "sanitation / saneamiento"; English-Tagalog: "certification / sertipikasyon")</p>
<p>‚Ä¢ Build <strong>bilingual vocabulary lists</strong> in the specific languages your students speak</p>
<p>‚Ä¢ Create <strong>culturally relevant examples</strong> drawn from students' linguistic communities</p>
<p>‚Ä¢ Design <strong>translanguaging moments</strong> that invite specific languages into content learning</p>
<div class="ttip">üí° <strong>Mix as many languages as needed.</strong> A class with Spanish, Somali, and Hmong speakers gets very different AI support than one with only Spanish speakers. The more accurate your language profile, the more targeted the output.</div>
<div class="tcombine">üåç <strong>Note on Indigenous languages:</strong> If your students speak Mam, K ºiche º, Mixtec, Zapotec, or other Indigenous languages ‚Äî select these specifically. These are distinct from Spanish and the AI will treat them accordingly, suggesting community-based translanguaging strategies rather than assuming Spanish literacy as a resource.</div>`},

  identities:{title:"Student Identities ‚Äî Why This Matters",body:`
<p>Your students' identities, family circumstances, and community backgrounds are not just context ‚Äî they are <strong>assets</strong> the AI can build on to make materials more relevant, engaging, and effective.</p>
<p>When you select "Refugee Students," the AI will include trauma-informed practices, avoid triggering language about documentation or family separation, and create scenarios that honor student resilience without reducing students to a single narrative.</p>
<p>When you select "Indigenous Students," the AI will avoid conflating cultural identity with language, honor traditional knowledge as a valid way of knowing, and create opportunities for community connection.</p>
<div class="ttip">üí° <strong>Intersectionality matters.</strong> A student who is simultaneously a refugee, a SIFE learner, a Somali speaker, and a working student has very specific needs. Selecting multiple identities tells the AI to address that complexity rather than defaulting to generic EL supports.</div>
<div class="tcombine">‚úèÔ∏è <strong>Don't see a group your students belong to?</strong> Use the text field at the bottom to describe it in your own words ‚Äî your description goes directly into the prompt.</div>`},

  theme:{title:"T ‚Äî Theme: The Instructional Approach",body:`
<p>The <strong>Theme</strong> step defines the <em>how</em> of your teaching ‚Äî the pedagogical values and approaches you want embedded throughout the materials.</p>
<p><strong>Culturally Responsive & Sustaining</strong> goes beyond adding a "multicultural example." It means the content genuinely reflects, honors, and builds on students' cultural identities, community knowledge, and lived experiences.</p>
<p><strong>Asset-Based</strong> means the prompt explicitly frames multilingualism and multiculturalism as strengths to build on ‚Äî not deficits to remediate.</p>
<p><strong>Trauma-Informed</strong> means the AI will avoid triggering scenarios (e.g., immigration enforcement situations, family separation themes), provide choice and agency, and use restorative language throughout.</p>
<div class="ttip">üí° Combine 3‚Äì4 approaches for maximum power. <strong>Culturally responsive + hands-on + industry-connected + rigorous & accessible</strong> creates materials that feel authentic, engaging, and genuinely useful for multilingual CTE students.</div>
<div class="tcombine">üîó <strong>Pro tip:</strong> "Asset-Based" + "Identity-Affirming" together are especially powerful for refugee and newcomer students ‚Äî they signal to the AI that students' backgrounds are the starting point for learning, not a gap to overcome.</div>`},

  elstrategies:{title:"EL / Multilingual Teaching Strategies ‚Äî A Field Guide",body:`
<p>These are evidence-based strategies proven to support English Learners in accessing rigorous grade-level CTE content.</p>
<h4>Highest-impact for multilingual CTE classrooms:</h4>
<p><strong>Translanguaging</strong> ‚Äî Not just "allowing Spanish in class" ‚Äî actively inviting students to use their full linguistic repertoire as a cognitive tool. Research shows this accelerates both language development and content understanding. Especially powerful for refugee students who may be trilingual+.</p>
<p><strong>SIOP Model</strong> ‚Äî The gold standard. Requires both a Content Objective AND a Language Objective in every lesson. The single most important shift for CTE teachers with EL students.</p>
<p><strong>Strategic Grouping</strong> ‚Äî Same-language pairs for concept processing (students can discuss in their home language to understand deeply) + mixed-language groups for authentic communication practice.</p>
<p><strong>Sentence Frames & Language Stems</strong> ‚Äî Provide the academic language structure so students can focus cognitive energy on content thinking, not language production alone.</p>
<div class="ttip">üí° <strong>Start with 3‚Äì5 strategies</strong> for a focused, high-quality output. Selecting all 16 can overwhelm the response. Choose the ones most relevant to your lesson type and students' needs.</div>
<div class="tcombine">üîó <strong>Powerful combination:</strong> <strong>Translanguaging + Structured Discussion Protocols + Cognate-Based Vocabulary</strong> together create a rich multilingual learning environment ‚Äî especially for classes with multiple language groups. The discussion protocols give students a scaffold to use their languages purposefully.</div>`},

  structure:{title:"S ‚Äî Structure: What Should It Look Like?",body:`
<p>The <strong>Structure</strong> step prevents the AI from giving you a wall of text when you need a table, or a five-page unit when you need a one-day lesson.</p>
<p>The most powerful components for multilingual learners:</p>
<p>‚Ä¢ <strong>Content + Language Objectives</strong> ‚Äî SIOP best practice; ensures language goals are explicit, not just content goals</p>
<p>‚Ä¢ <strong>3-Tiered Differentiation</strong> ‚Äî Gives you three usable versions (Emerging / Expanding-Bridging / Fluent) in one prompt response ‚Äî the single most time-saving selection for multilingual classrooms</p>
<p>‚Ä¢ <strong>Vocabulary List with Visuals</strong> ‚Äî Critical for EL access to CTE technical vocabulary, which is among the densest academic language students encounter</p>
<p>‚Ä¢ <strong>Teacher Facilitation Notes</strong> ‚Äî Includes anticipated student responses, misconceptions to address, and discussion prompts ‚Äî especially useful for teachers new to EL strategies</p>
<div class="ttip">üí° <strong>3-Tiered Differentiation + Vocabulary List with Visuals</strong> together is the highest-value combination for multilingual CTE classrooms ‚Äî you get multiple usable materials in a single AI response.</div>`},

  langdelivery:{title:"Language Delivery Options",body:`
<p>This step controls how the languages you selected in Recipients are used in the actual resource.</p>
<p><strong>Parallel Translation</strong> ‚Äî Key student-facing sections appear in both English and home languages side by side. Good for newcomers who need full comprehension.</p>
<p><strong>Bilingual Handouts</strong> ‚Äî Full bilingual student handouts. Time-intensive for the AI but powerful for newcomer or sheltered ELD classes.</p>
<p><strong>Home Language Preview Notes</strong> ‚Äî Teacher notes flagging where a brief preview in the home language would significantly increase comprehension. More practical for many classroom contexts.</p>
<p><strong>Multilingual Glossary</strong> ‚Äî Technical vocabulary defined in all home languages represented in your class. Extremely useful for CTE classes with dense technical vocabulary.</p>
<div class="ttip">üí° <strong>Multilingual Glossary + Bilingual Vocabulary & Frames</strong> together create the richest vocabulary support ‚Äî especially for technical CTE content where Tier 3 vocabulary is a primary barrier for EL students.</div>`},

  enhancements:{title:"+ CTE Enhancements: Standards Alignment",body:`
<p>This step makes your resource audit-ready and officially pathway-aligned for program documentation, administrator review, and advisory committee presentations.</p>
<p><strong>11 Elements of High Quality CTE</strong> ‚Äî California's official benchmarks from the CA State Plan for CTE. Embedding these in your materials demonstrates program quality.</p>
<p><strong>CTE Anchor Standards (1.0‚Äì11.0)</strong> ‚Äî Common to all 15 CA CTE sectors. These are the foundational competencies every CTE student should develop.</p>
<p><strong>HTR / BF Pathway Standards</strong> ‚Äî Sector-specific content standards for Hospitality/Tourism/Recreation and Business/Finance pathways.</p>
<p><strong>CA ELD Standards</strong> ‚Äî For integrated or designated ELD documentation.</p>
<p><strong>CCSS ELA / Literacy in Technical Subjects</strong> ‚Äî Cross-curricular alignment.</p>
<div class="ttip">üí° Even selecting 2‚Äì3 standards transforms the output into a professionally aligned resource your administrator, coach, and advisory committee will recognize and value. <strong>Anchor 2.0 (Communications) + Anchor 9.0 (Leadership & Teamwork)</strong> are almost always relevant to any CTE lesson.</div>`},

  '11elements':{title:"11 Elements of High Quality CTE ‚Äî Complete Guide",body:`
<p>California's official benchmarks from the CA State Plan for Career Technical Education. These represent the full picture of what makes a CTE program high-quality and equitable.</p>

<h4>Element 1: Leadership at All Levels</h4>
<p>Articulation agreements, CTE-focused professional development for all staff, district-level support, and counselor integration into pathway planning. <em>Use when your resource connects to program infrastructure or counselor-teacher collaboration.</em></p>

<h4>Element 2: High-Quality Curriculum & Instruction</h4>
<p>Pathway standards alignment, sequenced course progressions, embedded work-based learning, technology integration, academic-CTE alignment, and industry certification opportunities. <em>The most commonly used element ‚Äî almost always relevant.</em></p>

<h4>Element 3: Career Exploration & Guidance</h4>
<p>Counseling on career options, four-year planning, labor market information, and career awareness from middle school onward. <em>Use for career exploration lessons, pathway awareness activities, and counselor-facing resources.</em></p>

<h4>Element 4: Student Support & Leadership</h4>
<p>CTSO integration as a curricular component, student leadership embedded into instruction, equitable access for special populations including multilingual learners, and promotion of non-traditional CTE enrollment. <em>Critical for equity-focused classrooms serving EL and underrepresented students.</em></p>

<h4>Element 5: Industry Partnerships</h4>
<p>Active advisory committees with business/industry representatives, industry-vetted curriculum, and labor market validation. <em>Use when connecting to local employers, industry certifications, or advisory committee review.</em></p>

<h4>Element 6: System Alignment & Coherence</h4>
<p>Articulated programs of study connecting K‚Äì12 to postsecondary, cross-disciplinary collaboration, and CTE course sequencing. <em>Use for dual enrollment, articulation, or cross-curricular lesson planning.</em></p>

<h4>Element 7: Student Assessment & Learning Outcomes</h4>
<p>Multiple assessment measures, performance-based and authentic assessments, student outcome data disaggregated by subgroup, and data-informed continuous improvement. <em>Use for assessment design, rubric creation, or data-driven instruction planning.</em></p>

<h4>Element 8: Responds to Economic Demands</h4>
<p>Labor market demand tracking, adequate program funding, and stakeholder partnerships aligning programs to local economic needs. <em>Use when connecting program offerings to regional high-demand careers.</em></p>

<h4>Element 9: Skilled Faculty & Professional Development</h4>
<p>Credentialed CTE teachers with industry experience, ongoing pedagogy and industry PD, and collaborative planning time. <em>Use for PD materials, coaching resources, or content connecting teacher expertise to student outcomes.</em></p>

<h4>Element 10: Evaluation, Accountability & Continuous Improvement</h4>
<p>Advisory committee oversight, annual program reviews, strategic planning, and teacher evaluation tied to outcomes. <em>Use for program documentation, audit-ready materials, and accountability reporting.</em></p>

<h4>Element 11: CTE Promotion, Outreach & Communication</h4>
<p>Community and family outreach, student leadership in program promotion, CTSO visibility, media promotion of CTE successes, and community validation of programs. <em>Use for family engagement resources, community events, and marketing materials.</em></p>

<div class="ttip">üí° <strong>Best combination for multilingual learner equity:</strong> <strong>Elements 2 + 4</strong> ‚Äî together they address both instructional quality and equitable access for all students, including EL, refugee, and special population students.</div>
<div class="tcombine">üîó <strong>For newcomer/refugee programs:</strong> <strong>Elements 4 + 11</strong> together ‚Äî student support & leadership combined with community outreach creates a full picture of welcoming, high-quality CTE for recently arrived students.</div>`}
};

function showTT(k){const d=TT[k];if(!d)return;document.getElementById('ttitle').textContent=d.title;document.getElementById('tbody').innerHTML=d.body;document.getElementById('toverlay').classList.add('open')}
function closeTT(e){if(e.target===document.getElementById('toverlay'))closeTTbtn()}
function closeTTbtn(){document.getElementById('toverlay').classList.remove('open')}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  LANGUAGE PICKER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let selectedLangs = new Set();

function addLang(lang) {
  if (selectedLangs.has(lang)) {
    selectedLangs.delete(lang);
  } else {
    selectedLangs.add(lang);
  }
  // toggle visual
  document.querySelectorAll('.ltag').forEach(el => {
    if (el.textContent.trim().replace(/^[^\s]+\s/,'') === lang || el.textContent.trim() === lang || el.getAttribute('onclick') === `addLang('${lang}')`) {
      el.classList.toggle('picked', selectedLangs.has(lang));
    }
  });
  renderLangPills();
  rebuildPrompt();
}

function addCustomLang() {
  const inp = document.getElementById('lang-custom-input');
  const v = inp.value.trim();
  if (!v) return;
  selectedLangs.add(v);
  renderLangPills();
  rebuildPrompt();
  inp.value = '';
}

document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('lang-custom-input').addEventListener('keydown', e => {
    if (e.key === 'Enter') addCustomLang();
  });
});

function removeLang(lang) {
  selectedLangs.delete(lang);
  document.querySelectorAll('.ltag').forEach(el => {
    if (el.getAttribute('onclick') === `addLang('${lang}')`) el.classList.remove('picked');
  });
  renderLangPills();
  rebuildPrompt();
}

function renderLangPills() {
  const wrap = document.getElementById('lang-pills');
  if (selectedLangs.size === 0) {
    wrap.innerHTML = '<span style="font-size:12px;color:rgba(13,123,110,.5);font-style:italic">None selected yet ‚Äî tap languages above</span>';
    return;
  }
  wrap.innerHTML = [...selectedLangs].map(l =>
    `<span class="lpill">${l}<button onclick="removeLang('${l.replace(/'/g,"\\'")}')">‚úï</button></span>`
  ).join('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  PATHWAY & TOPIC DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const PW = {
  'Hospitality, Tourism, and Recreation':[
    {v:'Food Science, Dietetics, and Nutrition',t:'Food Science, Dietetics & Nutrition'},
    {v:'Food Service and Hospitality',t:'Food Service & Hospitality'},
    {v:'Hospitality, Tourism, and Recreation',t:'Hospitality, Tourism & Recreation'}],
  'Business and Finance':[
    {v:'Business Management',t:'Business Management'},
    {v:'Financial Services',t:'Financial Services'},
    {v:'International Business',t:'International Business'}],
  'Health Science and Medical Technology':[
    {v:'Patient Care',t:'Patient Care'},
    {v:'Environmental Health',t:'Environmental Health'},
    {v:'Biotechnology Research and Development',t:'Biotechnology R&D'}],
  'Agriculture and Natural Resources':[
    {v:'Agricultural Business',t:'Agricultural Business'},
    {v:'Agricultural Mechanics',t:'Agricultural Mechanics'},
    {v:'Animal Science',t:'Animal Science'},
    {v:'Plant and Soil Science',t:'Plant & Soil Science'},
    {v:'Forestry and Natural Resources',t:'Forestry & Natural Resources'}],
  'Arts, Media, and Entertainment':[
    {v:'Design, Visual, and Media Arts',t:'Design, Visual & Media Arts'},
    {v:'Performing Arts',t:'Performing Arts'},
    {v:'Game Design and Interactive Media',t:'Game Design & Interactive Media'}],
  'Information and Communication Technologies':[
    {v:'Information Support and Services',t:'Information Support & Services'},
    {v:'Network Communications',t:'Network Communications'},
    {v:'Software and Systems Development',t:'Software & Systems Development'}],
  'Education, Child Development and Family Services':[
    {v:'Child Development',t:'Child Development'},
    {v:'Family and Human Services',t:'Family & Human Services'}],
};

const TOPICS = {
  'Food Service and Hospitality':[
    'Customer service and communication in a multicultural restaurant setting',
    'Food safety, sanitation, and HACCP principles (ServSafe prep)',
    'Menu planning for diverse dietary needs, allergies, and cultural food traditions',
    'Mise en place and professional kitchen organization',
    'Food cost analysis, portion control, and budget management',
    'Plating techniques, aesthetic presentation, and culinary arts',
    'Conflict resolution with guests ‚Äî de-escalation and professional language',
    'Food service careers: job roles, career pathways, and industry certifications',
    'Event catering: planning, costing, and execution',
    'Nutrition-conscious menu development for community health'],
  'Food Science, Dietetics, and Nutrition':[
    'Nutritional analysis of culturally diverse foods from students\' home communities',
    'Food science experiments: chemistry and physics of cooking',
    'Food labeling, marketing, and consumer literacy in multilingual contexts',
    'Community nutrition outreach program design'],
  'Hospitality, Tourism, and Recreation':[
    'Global cultural customs and etiquette for hospitality professionals',
    'Event planning for diverse community celebrations and multicultural gatherings',
    'Tourism marketing for multilingual and multicultural destinations',
    'Front desk and concierge communication for diverse international guests'],
  'Business Management':[
    'Entrepreneurship and small business planning for community-based enterprises',
    'Leadership styles, emotional intelligence, and team management',
    'Marketing strategy, consumer behavior, and digital marketing',
    'Project management tools: Gantt charts, PERT, SMART goals',
    'Risk management, insurance, and business ethics',
    'Human resources, workplace diversity, and inclusive company culture',
    'Supply chain management and global logistics'],
  'Financial Services':[
    'Personal budgeting and financial planning for young adults and immigrants',
    'Credit, debt, and consumer financial literacy for first-generation students',
    'Tax preparation basics and IRS compliance for new workers',
    'Investment vehicles: stocks, bonds, mutual funds ‚Äî for beginners',
    'Banking, electronic transactions, and financial account management',
    'Identity theft, cybersecurity, and financial fraud prevention',
    'Financial statements and small business accounting basics'],
  'International Business':[
    'Cultural intelligence and global business communication across cultures',
    'Import/export documentation, trade regulations, and customs',
    'Currency exchange, international finance, and global risk management',
    'Market research for launching a product in a global market',
    'Trade agreements, protectionism, and global supply chains',
    'Multilingual business communication and cross-cultural negotiation'],
  'Child Development':[
    'Child developmental stages and culturally responsive early childhood education',
    'Creating inclusive and anti-bias learning environments for young children',
    'Dual language development in young multilingual children',
    'Health, safety, and nutrition for young children'],
  'Patient Care':[
    'Patient communication across language and cultural barriers in healthcare settings',
    'Medical terminology and anatomy fundamentals with multilingual vocabulary support',
    'Patient intake, documentation, and HIPAA compliance',
    'Cultural humility and culturally responsive patient care'],
};

function updatePathways(){
  const sec=document.getElementById('sec-sel').value;
  const ps=document.getElementById('pw-sel');
  const ts=document.getElementById('topic-sel');
  ps.innerHTML='<option value="">‚Äî Select a pathway ‚Äî</option>';
  ts.innerHTML='<option value="">‚Äî Select a suggested topic ‚Äî</option>';
  (PW[sec]||[]).forEach(p=>{ps.innerHTML+=`<option value="${p.v}">${p.t}</option>`});
  rebuildPrompt();
}
document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('pw-sel').addEventListener('change',function(){
    const ts=document.getElementById('topic-sel');
    ts.innerHTML='<option value="">‚Äî Select a suggested topic ‚Äî</option>';
    (TOPICS[this.value]||[]).forEach(t=>{ts.innerHTML+=`<option value="${t}">${t}</option>`});
    rebuildPrompt();
  });
});
function handleTopicSel(){const v=document.getElementById('topic-sel').value;if(v)document.getElementById('topic-custom').value=v;rebuildPrompt()}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  NAVIGATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let curStep=0;
function goToStep(n){
  document.querySelectorAll('.sp').forEach((p,i)=>p.classList.toggle('active',i===n));
  document.querySelectorAll('.ptab').forEach((t,i)=>t.classList.toggle('active',i===n));
  document.querySelectorAll('.pdot').forEach((d,i)=>{d.classList.toggle('active',i===n);d.classList.toggle('done',i<n)});
  document.querySelectorAll('.pline').forEach((l,i)=>l.classList.toggle('done',i<n));
  curStep=n;rebuildPrompt();window.scrollTo({top:0,behavior:'smooth'});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  PERSONA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function updatePersona(){
  const v=document.getElementById('persona-sel').value;
  document.getElementById('custom-persona-row').style.display=(v==='custom')?'block':'none';
  rebuildPrompt();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  GENERIC CUSTOM-OR SELECT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function handleCustomOrSel(selId, inputId, rowId) {
  const v = document.getElementById(selId).value;
  const row = document.getElementById(rowId);
  if (row) row.style.display = (v === 'custom') ? 'block' : 'none';
  rebuildPrompt();
}

// Language pref single-select chips
let selectedLangPref = '';
function pickLangPref(el, val) {
  document.querySelectorAll('#step-4 .chip').forEach(c => {
    if (c.getAttribute('onclick') && c.getAttribute('onclick').startsWith('pickLangPref')) {
      c.classList.remove('selected');
    }
  });
  el.classList.add('selected');
  selectedLangPref = val;
  rebuildPrompt();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  CHIP / TOGGLE HELPERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function pickOut(el, val) {
  document.querySelectorAll('#otyp-chips .chip').forEach(c=>c.classList.remove('selected'));
  el.classList.add('selected');
  // Clear custom if chip selected
  document.getElementById('outputtype-custom').value='';
  rebuildPrompt();
}
function handleCustomOutput(){
  // deselect chips if user types custom
  const v = document.getElementById('outputtype-custom').value.trim();
  if(v) document.querySelectorAll('#otyp-chips .chip').forEach(c=>c.classList.remove('selected'));
  rebuildPrompt();
}
function toggleChip(el){el.classList.toggle('selected');rebuildPrompt()}
function toggleStrat(el){el.classList.toggle('active');rebuildPrompt()}
function toggleCel(el){el.classList.toggle('selected');rebuildPrompt()}
function toggleAcc(el){el.classList.toggle('open');el.nextElementSibling.classList.toggle('open')}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  COLLECT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function gv(id){const e=document.getElementById(id);return e?e.value.trim():''}
function gcSel(sel){return[...document.querySelectorAll(sel+'.selected')].map(c=>c.getAttribute('data-val')||c.textContent.trim())}
function gcAct(sel){return[...document.querySelectorAll(sel+'.active')].map(c=>c.getAttribute('data-val')||c.textContent.trim())}

function getOutputType() {
  const custom = gv('outputtype-custom');
  if (custom) return custom;
  const chip = document.querySelector('#otyp-chips .chip.selected');
  return chip ? (chip.getAttribute('data-val') || chip.textContent.trim()) : '';
}

function getExp() {
  const v = gv('exp-sel');
  if (v === 'custom') return gv('exp-custom');
  return v;
}
function getCtx() {
  const v = gv('ctx-sel');
  if (v === 'custom') return gv('ctx-custom');
  return v;
}
function getComp() {
  const v = gv('comp-sel');
  if (v === 'custom') return gv('comp-custom');
  return v;
}
function getDur() {
  const v = gv('dur-sel');
  if (v === 'custom') return gv('dur-custom');
  return v;
}
function getInd() {
  const v = gv('ind-sel');
  if (v === 'custom') return gv('ind-custom');
  return v;
}

function collect(){
  const pv=gv('persona-sel');
  const persona=pv==='custom'?gv('persona-custom'):(pv||'');
  const fmtCustom = gv('fmt-custom');
  const fmts = gcSel('#fmt-chips .chip[data-val]');
  if(fmtCustom) fmts.push(fmtCustom);
  const specialsCustom = gv('specials-custom');
  // Collect all non-ELD, non-approach chips
  const eldVals = gcSel('.chip.go[data-val]');
  const allSelected = [...document.querySelectorAll('.chip.selected[data-val]')]
    .filter(c=>!c.closest('#grade-chips')&&!c.classList.contains('or')&&!c.classList.contains('go')&&!c.classList.contains('pu')&&!c.closest('#fmt-chips'))
    .map(c=>c.getAttribute('data-val'));
  if(specialsCustom) allSelected.push(specialsCustom);
  return{
    persona, exp:getExp(), ctx:getCtx(),
    outputType:getOutputType(),
    sector:gv('sec-sel'), pathway:gv('pw-sel'),
    topic:gv('topic-custom')||gv('topic-sel'),
    indConn:getInd(),
    grades:[...document.querySelectorAll('#grade-chips .chip.selected')].map(c=>c.textContent.trim()),
    comp:getComp(),
    eldLevels:eldVals,
    langs:[...selectedLangs].join(', '),
    specials:allSelected,
    tones:gcSel('.chip.pu[data-val]'),
    strats:gcAct('.stag'),
    themeNotes:gv('theme-notes'),
    fmts,
    dur:getDur(),
    langPref:selectedLangPref,
    structNotes:gv('struct-notes'),
    cteEls:[...document.querySelectorAll('.cel.selected')].map(c=>c.getAttribute('data-val')),
    stds:gcSel('.sbody .chip[data-val]'),
    extra:gv('extra-notes')
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  QUALITY SCORE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function quality(s){
  let sc=0,mx=0;
  const c=(v,p)=>{mx+=p;if(Array.isArray(v)?v.length>0:v)sc+=p};
  c(s.persona,15);c(s.ctx,10);c(s.outputType,15);c(s.topic,15);
  c(s.grades,8);c(s.eldLevels,10);c(s.langs,8);
  c(s.tones,5);c(s.strats,8);c(s.fmts,5);c(s.dur,3);
  c(s.cteEls,5);c(s.stds,4);
  return Math.round((sc/mx)*100);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  BUILD PROMPT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function buildPrompt(s){
  if(!s.persona&&!s.outputType&&!s.topic) return '';
  const L=[];

  L.push('You are an expert curriculum designer and instructional coach specializing in California Career Technical Education (CTE) and multilingual learner (ML/EL) support. I need your help creating high-quality, standards-aligned instructional materials tailored to my specific teaching context.');
  L.push('');

  const ctxParts=[];
  if(s.persona) ctxParts.push(`I am ${s.persona}`);
  if(s.exp) ctxParts.push(s.exp);
  if(s.ctx) ctxParts.push(`working at ${s.ctx}`);
  if(ctxParts.length) L.push('MY CONTEXT:\n- '+ctxParts.join(', ')+'.');

  L.push('');
  if(s.outputType||s.topic){
    let aim=`WHAT I NEED:\nPlease create a ${s.outputType||'standards-aligned instructional resource'}`;
    if(s.topic) aim+=` focused on the following topic: "${s.topic}"`;
    if(s.sector){aim+=`.\nThis resource is for my ${s.sector} CTE class`;if(s.pathway) aim+=`, ${s.pathway} pathway`}
    aim+='.';
    if(s.indConn) aim+=`\nConnect this resource authentically to ${s.indConn}.`;
    L.push(aim);
  }

  const hasStu=s.grades.length||s.comp||s.eldLevels.length||s.langs||s.specials.length;
  if(hasStu){
    L.push('');
    const sl=['MY STUDENTS:'];
    if(s.grades.length) sl.push(`- Grade level(s): ${s.grades.join(', ')}`);
    if(s.comp) sl.push(`- Class composition: ${s.comp}`);
    if(s.eldLevels.length) sl.push(`- English Learner proficiency levels present:\n  ‚Ä¢ ${s.eldLevels.join('\n  ‚Ä¢ ')}`);
    if(s.langs) sl.push(`- Home languages represented in my classroom: ${s.langs}.\n  ‚Üí Please treat these languages as cognitive and cultural assets. Use cognates, bilingual vocabulary examples, and culturally relevant scenarios from these linguistic communities wherever appropriate. Where languages use non-Latin scripts (Arabic, Somali, Amharic, etc.), acknowledge this in vocabulary activities.`);
    if(s.specials.length) sl.push(`- Additional student populations and identities to address:\n  ‚Ä¢ ${s.specials.join('\n  ‚Ä¢ ')}`);
    L.push(sl.join('\n'));
  }

  if(s.tones.length||s.strats.length||s.themeNotes){
    L.push('');
    const al=['INSTRUCTIONAL APPROACH:'];
    if(s.tones.length) al.push(`- The overall pedagogical approach should be: ${s.tones.join('; ')}.`);
    if(s.strats.length){
      al.push('- Please weave the following evidence-based EL/multilingual teaching strategies throughout every section of the resource:');
      s.strats.forEach(st=>al.push(`  ‚Ä¢ ${st}`));
    }
    if(s.themeNotes) al.push(`- Additional guidance: ${s.themeNotes}`);
    L.push(al.join('\n'));
  }

  if(s.fmts.length||s.dur||s.langPref||s.structNotes){
    L.push('');
    const fl=['FORMAT AND STRUCTURE:'];
    if(s.dur) fl.push(`- Duration: ${s.dur}`);
    if(s.fmts.length){
      fl.push('- The resource must include the following components:');
      s.fmts.forEach(f=>fl.push(`  ‚úì ${f}`));
    }
    if(s.langPref) fl.push(`- Language delivery approach: ${s.langPref}${s.langs?' (languages: '+s.langs+')':''}`);
    if(s.structNotes) fl.push(`- Additional format notes: ${s.structNotes}`);
    L.push(fl.join('\n'));
  }

  if(s.cteEls.length||s.stds.length){
    L.push('');
    const al=['STANDARDS AND CTE PATHWAY ALIGNMENT:'];
    if(s.cteEls.length){
      al.push('- Align this resource to the following California 11 Elements of High Quality CTE:');
      s.cteEls.forEach(e=>al.push(`  ‚Ä¢ ${e}`));
    }
    if(s.stds.length){
      al.push('- Explicitly reference and align to these standards throughout the resource:');
      s.stds.forEach(st=>al.push(`  ‚Ä¢ ${st}`));
    }
    L.push(al.join('\n'));
  }

  if(s.extra){L.push('');L.push('ADDITIONAL INSTRUCTIONS:\n'+s.extra)}

  L.push('');
  L.push(`EQUITY AND EXCELLENCE REQUIREMENTS:
Throughout the entire resource, please ensure:
1. Cultural responsiveness ‚Äî use names, businesses, examples, and scenarios that reflect the diverse backgrounds of the students described above. Avoid generic or Eurocentric default examples.
2. High expectations with access ‚Äî never "dumb down" content. Instead, provide scaffolds (sentence frames, graphic organizers, visual supports) that open access to rigorous content for all learners.
3. Multilingual identity as strength ‚Äî explicitly leverage home language connections, cognates, and translanguaging moments. Frame bilingualism and multilingualism as assets for CTE careers.
4. Strategy-embedded design ‚Äî for every major activity or section, include a callout box or teacher note suggesting the best teaching strategy to support multilingual learners at multiple ELD proficiency levels.
5. Industry authenticity ‚Äî use real workplace vocabulary, actual CTE job titles, authentic industry scenarios, and genuine career pathway connections throughout.
6. Inclusive, affirming framing ‚Äî avoid assumptions about family structure, documentation status, prior schooling, or country of origin that could feel excluding or triggering for any student group represented in this class.`);

  return L.join('\n');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  REBUILD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function rebuildPrompt(){
  const s=collect();
  const txt=buildPrompt(s);
  const out=document.getElementById('pout');
  if(!txt){out.innerHTML='<div class="pph">‚ú¶ Your prompt builds here in real time.<br><br>Start with <strong>P ‚Üí Persona</strong> above.</div>';document.getElementById('qfill').style.width='0%';document.getElementById('qpct').textContent='0%';return}
  out.textContent=txt;
  const q=quality(s);
  document.getElementById('qfill').style.width=q+'%';
  document.getElementById('qpct').textContent=q+'%';
}

function generateFinal(){rebuildPrompt();document.querySelector('.sidebar').scrollIntoView({behavior:'smooth',block:'start'})}

function copyPrompt(){
  const t=document.getElementById('pout').textContent;
  if(!t||t.includes('‚ú¶ Your prompt'))return;
  navigator.clipboard.writeText(t).then(()=>{
    const btn=document.querySelector('.bpri');const o=btn.textContent;
    btn.textContent='‚úì Copied!';btn.style.background='#0d7b6e';
    setTimeout(()=>{btn.textContent=o;btn.style.background=''},2200);
  });
}

function clearAll(){if(!confirm('Reset all fields and start fresh?'))return;location.reload()}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  ROLE SWITCHER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let currentRole = 'teacher';

function switchRole(role) {
  currentRole = role;

  var bt = document.getElementById('role-teacher');
  var ba = document.getElementById('role-admin');
  if (bt) bt.classList.toggle('active', role === 'teacher');
  if (ba) ba.classList.toggle('active', role === 'admin');

  var teacherMain = document.getElementById('teacher-main');
  var mainFbar    = document.getElementById('main-fbar');
  var adminPanel  = document.getElementById('admin-panel');
  var adminFbar   = document.getElementById('admin-fbar');
  var sheetPanel  = document.getElementById('sheet-panel');
  var sheetFbar   = document.getElementById('sheet-fbar');
  var sheetNavTab = document.getElementById('sheet-nav-tab');

  if (teacherMain) teacherMain.style.display = 'none';
  if (adminPanel)  adminPanel.style.display  = 'none';
  if (sheetPanel)  sheetPanel.style.display  = 'none';
  if (mainFbar)    mainFbar.style.display    = 'none';
  if (adminFbar)   adminFbar.classList.remove('visible');
  if (sheetFbar)   sheetFbar.classList.remove('visible');
  if (sheetNavTab) sheetNavTab.classList.remove('active');

  if (role === 'teacher') {
    if (teacherMain) teacherMain.style.display = '';
    if (mainFbar)    mainFbar.style.display    = '';
  } else if (role === 'admin') {
    if (adminPanel) adminPanel.style.display = 'block';
    if (adminFbar)  adminFbar.classList.add('visible');
  } else if (role === 'sheet') {
    if (sheetPanel)  sheetPanel.style.display = 'block';
    if (mainFbar)    mainFbar.style.display   = '';
    if (sheetFbar)   sheetFbar.classList.add('visible');
    if (sheetNavTab) sheetNavTab.classList.add('active');
  }

  var headers = {
    teacher: {
      badge: '‚ú∂ CTE Conference 2026 ¬∑ Educating For Careers',
      title: 'Build Your Own <span>AI Prompt</span><br>for CTE Pathways',
      sub:   'Use the <strong>P.A.R.T.S. framework</strong> to craft powerful, standards-aligned AI prompts that support multilingual learners and strengthen California CTE pathways.',
      tags:  '<span class="htag">üåê Amplifying Multilingual Learners</span><span class="htag">üéì Culturally Responsive CTE Pathways</span><span class="htag">üìã CA CTE Standards Aligned</span><span class="htag">‚úèÔ∏è CA ELD Standards</span>'
    },
    admin: {
      badge: '‚ú∂ CTE Conference 2026 ¬∑ Admin & District Leader Mode',
      title: 'Leadership <span>AI Prompt Builder</span><br>for Admins & District Leaders',
      sub:   'Use the <strong>P.A.R.T.S. framework</strong> to craft powerful AI prompts for college & career readiness, curriculum alignment, compliance, LCAP, and strategic leadership.',
      tags:  '<span class="htag">üéì College & Career Readiness</span><span class="htag">üìö Curriculum & Instruction</span><span class="htag">‚úÖ Compliance & LCAP</span><span class="htag">üìä Data & Strategic Planning</span>'
    },
    sheet: {
      badge: '‚ú∂ CTE Conference 2026 ¬∑ Spreadsheet Prompt Builder',
      title: 'Build a <span>Spreadsheet Prompt</span><br>‚Äî AI Writes the Code',
      sub:   'Describe your spreadsheet in plain language. The AI generates complete HTML/CSS/JS code you can open in any browser.',
      tags:  '<span class="htag">üìä Grade Trackers</span><span class="htag">üåê EL Monitoring</span><span class="htag">‚úÖ Compliance Data</span><span class="htag">üí∞ Budget & Perkins</span>'
    }
  };
  var h = headers[role] || headers.teacher;
  var el;
  el = document.getElementById('hbadge-text'); if (el) el.textContent = h.badge;
  el = document.getElementById('header-title'); if (el) el.innerHTML  = h.title;
  el = document.getElementById('header-sub');   if (el) el.innerHTML  = h.sub;
  el = document.getElementById('header-tags');  if (el) el.innerHTML  = h.tags;

  if (role === 'admin') aRebuild();
  if (role === 'sheet') sRebuild();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  SPREADSHEET STEP NAVIGATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let sCurStep = 0;

function goToSheetStep(n) {
  document.querySelectorAll('.ssp').forEach((s,i) => s.classList.toggle('active', i === n));
  document.querySelectorAll('#sheet-fbar .ptab').forEach((t,i) => {
    if (!t.id || t.id.startsWith('stab')) t.classList.toggle('active', i === n);
  });
  const dots  = document.querySelectorAll('#sheet-pdots .pdot');
  const lines = document.querySelectorAll('#sheet-pdots .pline');
  dots.forEach((d,i)  => { d.classList.toggle('active', i===n); d.classList.toggle('done', i<n); });
  lines.forEach((l,i) => l.classList.toggle('done', i<n));
  sCurStep = n;
  window.scrollTo({top:0, behavior:'smooth'});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  SPREADSHEET TEMPLATES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const TEMPLATES = {
  grades: {
    title:    'Student Grade Tracker ‚Äî [Class Name] [Period] [Year]',
    purpose:  'Track student assignment scores, calculate weighted grade averages, auto-assign letter grades, and flag students at risk of failing. The spreadsheet should be easy for a teacher to update weekly.',
    users:    ['classroom teacher tracking student progress'],
    rows:     'up to 30 rows of data',
    cols:     ['Student ID number','First Name and Last Name (separate columns)','Period or Class Section','Grade Level (9th, 10th, 11th, 12th)','EL Status (Active EL / RFEP / Non-EL)','ELD Proficiency Level (Emerging / Expanding / Bridging)','IEP or 504 flag (Yes/No)','multiple Assignment score columns (configurable number)','Project or Performance Assessment scores','Participation or Effort score','Current weighted average or cumulative grade percentage','Letter grade (A/B/C/D/F) auto-calculated from percentage'],
    formulas: ['weighted average formula that calculates final grade from category weights (e.g. classwork 40%, tests 40%, participation 20%)','IF formula to auto-assign letter grade from percentage (A=90‚Äì100, B=80‚Äì89, C=70‚Äì79, D=60‚Äì69, F=below 60)','IF formula to flag students at risk (e.g. grade below 70% ‚Üí shows \'AT RISK\', else blank)','COUNTIF formula to count how many students meet a condition (e.g. passing, at-risk, reclassified)'],
    design:   ['conditional formatting: green/yellow/red color scale on grade or score columns (high=green, medium=yellow, low=red)','conditional formatting: highlight entire row red when student is flagged as At-Risk or Chronic Absent','alternating row colors (light gray and white) for readability','Bold and colored header row with a distinct background color','frozen top header row and frozen first name column so they stay visible when scrolling','filters and sort functionality (AutoFilter on all columns)','build the spreadsheet as a complete, self-contained HTML file with embedded CSS and JavaScript so I can open it directly in any browser']
  },
  el: {
    title:    'EL Student Monitoring Tracker ‚Äî [District/School] [Year]',
    purpose:  'Monitor English Learner students\' ELPAC scores, ELD proficiency levels, years as EL, reclassification status, and automatically flag LTEL students. This supports LCAP compliance and reclassification decision-making.',
    users:    ['site administrator or principal','district administrator or program coordinator'],
    rows:     'up to 100 rows ‚Äî build for scalability',
    cols:     ['Student ID number','First Name and Last Name (separate columns)','Grade Level (9th, 10th, 11th, 12th)','Home Language','EL Status (Active EL / RFEP / Non-EL)','ELD Proficiency Level (Emerging / Expanding / Bridging)','ELPAC Overall score and domain scores (Oral, Written)','Reclassification date and status (Active EL / Reclassified / Monitor Year 1‚Äì4)','Years as English Learner (auto-calculated from EL designation date)','LTEL flag (auto: 6+ years as EL without reclassification)','Counselor or Case Manager assigned'],
    formulas: ['DATEDIF formula to calculate number of years between two dates (e.g. years as EL)','nested IF formula for ELD level label (Emerging / Expanding / Bridging based on ELPAC score ranges)','IF formula for LTEL flag (if years as EL ‚â• 6 AND not reclassified ‚Üí \'LTEL WATCH\')','COUNTIF formula to count how many students meet a condition (e.g. passing, at-risk, reclassified)','AVERAGEIF to average scores only for a specific subgroup (e.g. average grade for EL students only)'],
    design:   ['conditional formatting: highlight LTEL or EL students with a soft blue background for easy identification','conditional formatting: highlight entire row red when student is flagged as At-Risk or Chronic Absent','Bold and colored header row with a distinct background color','frozen top header row and frozen first name column so they stay visible when scrolling','filters and sort functionality (AutoFilter on all columns)','a summary dashboard tab with key totals, averages, and counts pulled automatically from data tab','build the spreadsheet as a complete, self-contained HTML file with embedded CSS and JavaScript so I can open it directly in any browser','include a step-by-step setup guide explaining each formula and how to modify it for my specific data']
  },
  cte: {
    title:    'CTE Pathway Enrollment Equity Dashboard ‚Äî [District] [Year]',
    purpose:  'Track CTE pathway enrollment disaggregated by race/ethnicity, EL status, gender, and IEP status. Automatically calculate representation gaps compared to district demographics. Supports Perkins V equity reporting and LCAP alignment.',
    users:    ['district administrator or program coordinator'],
    rows:     'up to 100 rows ‚Äî build for scalability',
    cols:     ['CTE Pathway enrolled','Grade Level (9th, 10th, 11th, 12th)','Ethnicity / Race','EL Status (Active EL / RFEP / Non-EL)','Gender','IEP or 504 flag (Yes/No)','Industry certification earned (Yes/No/In Progress)','Dual enrollment or articulation status','Credits Completed'],
    formulas: ['COUNTIF formula to count how many students meet a condition (e.g. passing, at-risk, reclassified)','AVERAGEIF to average scores only for a specific subgroup (e.g. average grade for EL students only)','percentage calculation (e.g. attendance rate = days present √∑ total days √ó 100)','progress toward goal percentage (current √∑ target √ó 100)','SUMIF formula to total values by category (e.g. total budget spent by funding source)'],
    design:   ['conditional formatting: green/yellow/red color scale on grade or score columns (high=green, medium=yellow, low=red)','Bold and colored header row with a distinct background color','a summary dashboard tab with key totals, averages, and counts pulled automatically from data tab','filters and sort functionality (AutoFilter on all columns)','build the spreadsheet as a complete, self-contained HTML file with embedded CSS and JavaScript so I can open it directly in any browser']
  },
  perkins: {
    title:    'Perkins V Budget Tracker ‚Äî [District] FY[Year]',
    purpose:  'Track Perkins V local allocation spending by activity and required set-aside. Show budget remaining, compliance percentage, and flag when spending approaches or exceeds allocation. Supports Annual Performance Report (APR) documentation.',
    users:    ['district administrator or program coordinator'],
    rows:     'up to 50 rows of data',
    cols:     ['Budget line item, amount allocated, amount spent, remaining balance','CTE Pathway enrolled'],
    formulas: ['running balance formula (budget remaining = allocated ‚àí spent)','percentage calculation (e.g. attendance rate = days present √∑ total days √ó 100)','SUM formula for totals (hours, points, absences, budget)','IF formula to flag students at risk (e.g. grade below 70% ‚Üí shows \'AT RISK\', else blank)','SUMIF formula to total values by category (e.g. total budget spent by funding source)'],
    design:   ['conditional formatting: budget cells turn orange when spending exceeds 80% of allocation, red when over budget','Bold and colored header row with a distinct background color','a summary dashboard tab with key totals, averages, and counts pulled automatically from data tab','print-ready layout: page breaks, print area, landscape orientation, school name/date header in print view','build the spreadsheet as a complete, self-contained HTML file with embedded CSS and JavaScript so I can open it directly in any browser','include a step-by-step setup guide explaining each formula and how to modify it for my specific data']
  },
  attendance: {
    title:    'Attendance & Behavior Log ‚Äî [Class/School] [Year]',
    purpose:  'Track daily student attendance with Present/Absent/Tardy entries. Automatically calculate total absences, attendance rate percentage, and flag chronic absenteeism (below 90% attendance rate). Include a behavior incident log.',
    users:    ['classroom teacher tracking student progress'],
    rows:     'up to 30 rows of data',
    cols:     ['Student ID number','First Name and Last Name (separate columns)','Period or Class Section','EL Status (Active EL / RFEP / Non-EL)','Daily attendance columns (Present/Absent/Tardy per day)','Total absences and total tardies (auto-counted)','Attendance rate percentage (auto-calculated)','Chronic absence flag (auto-flagged when attendance below 90%)','Behavior incident log (date, type, action taken)'],
    formulas: ['COUNTIF formula to count how many students meet a condition (e.g. passing, at-risk, reclassified)','percentage calculation (e.g. attendance rate = days present √∑ total days √ó 100)','IF formula to flag chronic absenteeism (attendance rate below 90% ‚Üí \'CHRONIC ABSENT\')','AND/OR logic combining multiple conditions (e.g. flag only if EL AND grade below 70% AND absences above 5)'],
    design:   ['conditional formatting: attendance cells turn yellow at 5 absences, red at 9+ absences','conditional formatting: highlight entire row red when student is flagged as At-Risk or Chronic Absent','alternating row colors (light gray and white) for readability','Bold and colored header row with a distinct background color','frozen top header row and frozen first name column so they stay visible when scrolling','filters and sort functionality (AutoFilter on all columns)','build the spreadsheet as a complete, self-contained HTML file with embedded CSS and JavaScript so I can open it directly in any browser']
  },
  pd: {
    title:    'Professional Development Tracker ‚Äî [District/School] [Year]',
    purpose:  'Track staff professional development hours by topic and category. Show completion status, progress toward required hours, and compliance summary. Support sign-in logging and generate a compliance report view.',
    users:    ['site administrator or principal','district administrator or program coordinator'],
    rows:     'up to 100 rows ‚Äî build for scalability',
    cols:     ['First Name and Last Name (separate columns)','Grade Level (9th, 10th, 11th, 12th)','PD hours completed vs. required, completion status','Counselor or Case Manager assigned'],
    formulas: ['SUM formula for totals (hours, points, absences, budget)','percentage calculation (e.g. attendance rate = days present √∑ total days √ó 100)','progress toward goal percentage (current √∑ target √ó 100)','IF formula for pass/fail or completion status based on threshold','COUNTIF formula to count how many students meet a condition (e.g. passing, at-risk, reclassified)'],
    design:   ['visual progress bars using cell fill percentage or REPT formula','conditional formatting: green/yellow/red color scale on grade or score columns (high=green, medium=yellow, low=red)','Bold and colored header row with a distinct background color','a summary dashboard tab with key totals, averages, and counts pulled automatically from data tab','filters and sort functionality (AutoFilter on all columns)','build the spreadsheet as a complete, self-contained HTML file with embedded CSS and JavaScript so I can open it directly in any browser']
  },
  blank: { title:'', purpose:'', users:[], rows:'', cols:[], formulas:[], design:[] }
};

function loadTemplate(key) {
  const t = TEMPLATES[key];
  document.getElementById('s-title').value   = t.title;
  document.getElementById('s-purpose').value = t.purpose;
  document.getElementById('s-rows').value    = t.rows;

  // Clear all chips first
  document.querySelectorAll('#sheet-panel .chip').forEach(c => c.classList.remove('sel'));

  // Activate user chips
  document.querySelectorAll('#sstep-1 .chip').forEach(c => {
    if (t.users.includes(c.dataset.val)) c.classList.add('sel');
  });
  // Activate column chips
  document.querySelectorAll('#sstep-2 .chip').forEach(c => {
    if (t.cols.includes(c.dataset.val)) c.classList.add('sel');
  });
  // Activate formula chips
  document.querySelectorAll('#sstep-3 .chip').forEach(c => {
    if (t.formulas.includes(c.dataset.val)) c.classList.add('sel');
  });
  // Activate design chips
  document.querySelectorAll('#sstep-4 .chip').forEach(c => {
    if (t.design.includes(c.dataset.val)) c.classList.add('sel');
  });

  sRebuild();
  goToSheetStep(1);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  SPREADSHEET COLLECT + BUILD PROMPT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function sCollect() {
  return {
    title:       (document.getElementById('s-title')||{value:''}).value.trim(),
    purpose:     (document.getElementById('s-purpose')||{value:''}).value.trim(),
    rows:        (document.getElementById('s-rows')||{value:''}).value,
    users:       [...document.querySelectorAll('#sstep-1 .chip.sel')].map(c=>c.dataset.val),
    cols:        [...document.querySelectorAll('#sstep-2 .chip.sel')].map(c=>c.dataset.val),
    customCols:  (document.getElementById('s-custom-cols')||{value:''}).value.trim(),
    formulas:    [...document.querySelectorAll('#sstep-3 .chip.sel')].map(c=>c.dataset.val),
    customForms: (document.getElementById('s-custom-formulas')||{value:''}).value.trim(),
    design:      [...document.querySelectorAll('#sstep-4 .chip.sel')].map(c=>c.dataset.val),
    designNotes: (document.getElementById('s-design-notes')||{value:''}).value.trim()
  };
}

function sBuildPrompt(s) {
  if (!s.title && !s.purpose && !s.cols.length) return '';
  const L = [];

  L.push('You are an expert web developer and data specialist. I need you to build me a complete, fully functional spreadsheet as a single self-contained HTML file with embedded CSS and JavaScript.');
  L.push('');
  L.push('When you are done, provide ONLY the complete HTML code. Include everything in one file ‚Äî no external dependencies. The file should open directly in any web browser and work completely offline.');
  L.push('');

  if (s.title) L.push(`SPREADSHEET NAME: ${s.title}`);

  if (s.purpose) {
    L.push('');
    L.push(`PURPOSE & CONTEXT:\n${s.purpose}`);
  }

  if (s.users.length) {
    L.push('');
    L.push('INTENDED USERS:\n' + s.users.map(u=>'‚Ä¢ '+u).join('\n'));
  }

  if (s.rows) {
    L.push('');
    L.push(`DATA SIZE: Build for ${s.rows}.`);
  }

  if (s.cols.length || s.customCols) {
    L.push('');
    L.push('REQUIRED COLUMNS ‚Äî Include all of the following:');
    s.cols.forEach(c => L.push('‚Ä¢ '+c));
    if (s.customCols) L.push('‚Ä¢ CUSTOM: '+s.customCols);
  }

  if (s.formulas.length || s.customForms) {
    L.push('');
    L.push('FORMULAS & SMART LOGIC ‚Äî Implement all of the following:');
    s.formulas.forEach(f => L.push('‚Ä¢ '+f));
    if (s.customForms) L.push('‚Ä¢ CUSTOM LOGIC: '+s.customForms);
  }

  if (s.design.length || s.designNotes) {
    L.push('');
    L.push('DESIGN & FORMATTING ‚Äî Apply all of the following:');
    s.design.forEach(d => L.push('‚Ä¢ '+d));
    if (s.designNotes) L.push('‚Ä¢ ADDITIONAL: '+s.designNotes);
  }

  L.push('');
  L.push('TECHNICAL REQUIREMENTS:');
  L.push('‚Ä¢ Single HTML file ‚Äî all CSS and JavaScript must be embedded inline');
  L.push('‚Ä¢ Works in any modern browser (Chrome, Safari, Firefox, Edge) with no installation');
  L.push('‚Ä¢ Editable cells ‚Äî clicking any data cell should allow editing');
  L.push('‚Ä¢ All formulas must recalculate automatically when any input cell changes');
  L.push('‚Ä¢ Include a visible, professional-looking title/header at the top of the page');
  L.push('‚Ä¢ Add a legend or color key if conditional formatting is used');
  L.push('‚Ä¢ Make sure column headers are clearly labeled and descriptive');
  L.push('‚Ä¢ Pre-populate with 5‚Äì8 sample/demo rows of realistic placeholder data so I can see it working immediately');
  L.push('‚Ä¢ Include a "Clear All Data" button and a "Print" button in the toolbar');

  L.push('');
  L.push('After the HTML code, include a short SETUP NOTES section (outside the code block) explaining:');
  L.push('1. How to add or remove rows');
  L.push('2. How to change any formula thresholds (e.g. what grade percentage triggers "AT RISK")');
  L.push('3. How to modify column names or add new columns');
  L.push('4. Any other important customization tips');

  return L.join('\n');
}

function sQuality(s) {
  let sc=0,mx=0;
  const c=(v,p)=>{mx+=p;if(Array.isArray(v)?v.length>0:v)sc+=p};
  c(s.title,15); c(s.purpose,20); c(s.cols,25); c(s.formulas,20); c(s.design,15); c(s.rows,5);
  return Math.round((sc/mx)*100);
}

function sRebuild() {
  const s = sCollect();
  const txt = sBuildPrompt(s);
  const out = document.getElementById('s-pout');
  if (!out) return;
  if (!txt) {
    out.innerHTML = '<div class="pph">‚ú¶ Your spreadsheet prompt builds here.<br><br>Start by picking a <strong>template</strong> above.</div>';
    document.getElementById('s-qfill').style.width = '0%';
    document.getElementById('s-qpct').textContent  = '0%';
    return;
  }
  out.textContent = txt;
  const q = sQuality(s);
  document.getElementById('s-qfill').style.width = q + '%';
  document.getElementById('s-qpct').textContent  = q + '%';
}

function sGenerateFinal() {
  sRebuild();
  document.querySelector('#sheet-panel .sidebar').scrollIntoView({behavior:'smooth', block:'start'});
}

function sCopyPrompt() {
  const t = document.getElementById('s-pout').textContent;
  if (!t || t.includes('‚ú¶ Your spreadsheet')) return;
  navigator.clipboard.writeText(t).then(() => {
    const btn = document.querySelector('#sheet-panel .bpri');
    const o = btn.textContent;
    btn.textContent = '‚úì Copied!'; btn.style.background = '#1565c0';
    setTimeout(() => { btn.textContent = o; btn.style.background = ''; }, 2200);
  });
}

function sReset() {
  if (!confirm('Reset spreadsheet builder fields?')) return;
  document.querySelectorAll('#sheet-panel input,#sheet-panel textarea,#sheet-panel select').forEach(el=>{el.value='';});
  document.querySelectorAll('#sheet-panel .chip.sel').forEach(c=>c.classList.remove('sel'));
  sRebuild();
  goToSheetStep(0);
}

function sOpenSaveModal() {
  const txt = document.getElementById('s-pout').textContent;
  if (!txt || txt.includes('‚ú¶ Your spreadsheet')) { alert('Build a prompt first.'); return; }
  const s = sCollect();
  document.getElementById('save-title').value = s.title || 'Spreadsheet Prompt';
  document.getElementById('save-tags').value  = 'Spreadsheet, ' + (s.cols.length ? s.cols.length+' columns' : '') ;
  document.getElementById('save-notes').value = '';
  document.getElementById('save-preview').textContent = txt.substring(0,220)+'‚Ä¶';
  document.getElementById('save-modal').classList.add('open');
  setTimeout(()=>document.getElementById('save-title').select(),80);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  ADMIN STEP NAVIGATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let aCurStep = 0;

function goToAdminStep(n) {
  document.querySelectorAll('.asp').forEach((s,i) => s.classList.toggle('active', i === n));
  document.querySelectorAll('#admin-fbar .ptab').forEach((t,i) => {
    t.classList.toggle('active', i === n);
    if(t.id) return; // skip lib tab
  });
  // sync dots
  const dots = document.querySelectorAll('#admin-pdots .pdot');
  const lines = document.querySelectorAll('#admin-pdots .pline');
  dots.forEach((d,i) => { d.classList.toggle('active', i === n); d.classList.toggle('done', i < n); });
  lines.forEach((l,i) => l.classList.toggle('done', i < n));
  aCurStep = n;
  window.scrollTo({top:0, behavior:'smooth'});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  ADMIN COLLECT + BUILD PROMPT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function aGetVal(selId, customId) {
  const sel = document.getElementById(selId);
  if (!sel) return '';
  if (sel.value === '__custom__') return (document.getElementById(customId)||{value:''}).value.trim();
  return sel.value;
}

function aCollect() {
  const role      = aGetVal('a-role','a-role-custom');
  const goal      = aGetVal('a-goal','a-goal-custom');
  const context   = (document.getElementById('a-context')||{value:''}).value.trim();
  const topic     = (document.getElementById('a-topic')||{value:''}).value.trim();
  const data      = (document.getElementById('a-data')||{value:''}).value.trim();
  const urgency   = (document.getElementById('a-urgency')||{value:''}).value;
  const extra     = (document.getElementById('a-extra')||{value:''}).value.trim();

  const audience  = [...document.querySelectorAll('#astep-1 .chip.sel')].map(c=>c.dataset.val);
  const students  = [...document.querySelectorAll('#astep-1 .chip.sel')].filter(c=>
    ['High EL','Newcomer','Long-Term','SIFE','Title I','Racially','Foster','Special'].some(k=>c.textContent.includes(k))
  ).map(c=>c.dataset.val);
  const focus     = [...document.querySelectorAll('#astep-2 .chip.sel')].map(c=>c.dataset.val);
  const fmts      = [...document.querySelectorAll('#astep-4 .cg:first-of-type .chip.sel')].map(c=>c.dataset.val);
  const tones     = [...document.querySelectorAll('#astep-4 .cg:last-of-type .chip.sel')].map(c=>c.dataset.val);

  return {role,goal,context,topic,data,urgency,extra,audience,students,focus,fmts,tones};
}

function aBuildPrompt(s) {
  if (!s.role && !s.goal && !s.topic) return '';
  const L = [];

  L.push('You are an expert educational leadership consultant specializing in California CTE program administration, English Learner civil rights compliance, curriculum and instruction leadership, and district strategic planning. I need your help creating a high-quality, professionally-grounded deliverable for my leadership context.');
  L.push('');

  if (s.role || s.context) {
    const parts = [];
    if (s.role) parts.push(`I am ${s.role}`);
    if (s.context) parts.push(s.context);
    L.push('MY LEADERSHIP CONTEXT:\n' + parts.map(p=>'- '+p).join('\n'));
    L.push('');
  }

  if (s.goal || s.topic) {
    let aim = `WHAT I NEED:\nPlease ${s.goal||'create a professional leadership resource'}`;
    if (s.topic) aim += ` addressing the following: "${s.topic}"`;
    L.push(aim);
  }

  if (s.data) {
    L.push('');
    L.push(`RELEVANT DATA & CONTEXT:\n${s.data}`);
  }

  if (s.urgency) {
    L.push('');
    L.push(`TIMELINE: ${s.urgency}`);
  }

  if (s.audience.length) {
    L.push('');
    L.push('PRIMARY AUDIENCE:\n' + s.audience.map(a=>'‚Ä¢ '+a).join('\n'));
  }

  if (s.focus.length) {
    L.push('');
    L.push('LEADERSHIP FOCUS AREAS ‚Äî Please center the output on these priorities:\n' + s.focus.map(f=>'‚Ä¢ '+f).join('\n'));
  }

  if (s.fmts.length) {
    L.push('');
    L.push('REQUIRED COMPONENTS ‚Äî Please include all of the following:\n' + s.fmts.map(f=>'‚Ä¢ '+f).join('\n'));
  }

  if (s.tones.length) {
    L.push('');
    L.push('TONE & REGISTER:\n' + s.tones.map(t=>'‚Ä¢ '+t).join('\n'));
  }

  L.push('');
  L.push('EQUITY & COMPLIANCE STANDARDS:\n' +
    '‚Ä¢ Ground all recommendations in asset-based, equity-centered framing\n' +
    '‚Ä¢ Reference California-specific frameworks, Ed Code, and CDE guidance where applicable\n' +
    '‚Ä¢ Ensure all language is culturally and linguistically responsive\n' +
    '‚Ä¢ Where EL student populations are referenced, apply Casta√±eda v. Pickard standards (sound educational theory, adequate implementation, effective results)');

  if (s.extra) {
    L.push('');
    L.push('ADDITIONAL INSTRUCTIONS:\n' + s.extra);
  }

  L.push('');
  L.push('Please produce a thorough, professionally written, and immediately usable deliverable. Use clear headers to organize each section. Prioritize actionability ‚Äî every recommendation should include a concrete next step.');

  return L.join('\n');
}

function aQuality(s) {
  let sc=0, mx=0;
  const c=(v,p)=>{mx+=p;if(Array.isArray(v)?v.length>0:v)sc+=p};
  c(s.role,20); c(s.goal,20); c(s.topic,20);
  c(s.context,10); c(s.focus,15); c(s.fmts,10); c(s.data,8); c(s.tones,5);
  return Math.round((sc/mx)*100);
}

function aRebuild() {
  const s   = aCollect();
  const txt = aBuildPrompt(s);
  const out = document.getElementById('a-pout');
  if (!out) return;
  if (!txt) {
    out.innerHTML = '<div class="pph">‚ú¶ Your leadership prompt builds here.<br><br>Start with <strong>P ‚Üí Purpose</strong> above.</div>';
    document.getElementById('a-qfill').style.width = '0%';
    document.getElementById('a-qpct').textContent  = '0%';
    return;
  }
  out.textContent = txt;
  const q = aQuality(s);
  document.getElementById('a-qfill').style.width = q + '%';
  document.getElementById('a-qpct').textContent  = q + '%';
}

function aGenerateFinal() {
  aRebuild();
  document.querySelector('#admin-panel .sidebar').scrollIntoView({behavior:'smooth', block:'start'});
}

function aCopyPrompt() {
  const t = document.getElementById('a-pout').textContent;
  if (!t || t.includes('‚ú¶ Your leadership')) return;
  navigator.clipboard.writeText(t).then(() => {
    const btn = document.querySelector('#admin-panel .bpri');
    const o = btn.textContent;
    btn.textContent = '‚úì Copied!'; btn.style.background = '#0d7b6e';
    setTimeout(() => { btn.textContent = o; btn.style.background = ''; }, 2200);
  });
}

function aReset() {
  if (!confirm('Reset admin mode fields?')) return;
  document.querySelectorAll('#admin-panel input, #admin-panel textarea, #admin-panel select').forEach(el => {
    if (el.tagName === 'SELECT') el.value = '';
    else el.value = '';
  });
  document.querySelectorAll('#admin-panel .chip.sel').forEach(c => c.classList.remove('sel'));
  document.querySelectorAll('#admin-panel .custom-or-row').forEach(r => r.style.display = 'none');
  aRebuild();
}

function aOpenSaveModal() {
  const txt = document.getElementById('a-pout').textContent;
  if (!txt || txt.includes('‚ú¶ Your leadership')) { alert('Build a prompt first.'); return; }
  const s = aCollect();
  let title = '';
  if (s.goal) title += s.goal.charAt(0).toUpperCase() + s.goal.slice(1,36);
  if (s.topic) title += (title ? ' ‚Äî ' : '') + s.topic.substring(0,40);
  document.getElementById('save-title').value = title || 'Admin Leadership Prompt';
  const tags = ['Admin Mode'];
  if (s.role) tags.push(s.role.split(' ').slice(0,3).join(' '));
  document.getElementById('save-tags').value  = tags.join(', ');
  document.getElementById('save-notes').value = '';
  document.getElementById('save-preview').textContent = txt.substring(0,220) + '‚Ä¶';
  document.getElementById('save-modal').classList.add('open');
  setTimeout(() => document.getElementById('save-title').select(), 80);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  LIBRARY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const LIB_KEY='cte_prompt_library_v1';
function _ls(op, key, val) {
  try {
    if (op === 'get') return localStorage.getItem(key);
    if (op === 'set') { localStorage.setItem(key, val); return true; }
    if (op === 'rm')  { localStorage.removeItem(key); return true; }
  } catch(e) { return null; }
}
function loadLib(){try{return JSON.parse(_ls('get', LIB_KEY))||[];}catch(e){return[];}}
function saveLib(arr){_ls('set', LIB_KEY, JSON.stringify(arr));}
function esc(s){return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');}

function showLibrary(){
  document.getElementById('lib-panel').style.display='block';
  document.querySelectorAll('.ptab').forEach(t=>t.classList.remove('active'));
  document.getElementById('lib-tab').classList.add('active');
  renderLibrary();
  window.scrollTo({top:0,behavior:'smooth'});
}
function hideLibrary(){
  document.getElementById('lib-panel').style.display='none';
  goToStep(curStep);
}

function renderLibrary(){
  const items=loadLib();
  const q=(document.getElementById('lib-search').value||'').toLowerCase().trim();
  const sec=(document.getElementById('lib-filter-sector').value||'').toLowerCase();
  const gr=(document.getElementById('lib-filter-grade').value||'').toLowerCase();
  const eld=(document.getElementById('lib-filter-eld').value||'').toLowerCase();
  const sort=document.getElementById('lib-sort').value||'newest';

  let filtered=items.filter(item=>{
    const blob=(item.title+' '+(item.tags||'')+' '+(item.notes||'')+' '+item.prompt).toLowerCase();
    return(!q||blob.includes(q))&&(!sec||blob.includes(sec))&&(!gr||blob.includes(gr))&&(!eld||blob.includes(eld));
  });

  if(sort==='newest') filtered=filtered.slice().reverse();
  else if(sort==='oldest') filtered=[...filtered];
  else if(sort==='alpha') filtered=filtered.slice().sort((a,b)=>a.title.localeCompare(b.title));

  const statsEl=document.getElementById('lib-stats');
  const total=items.length;
  statsEl.innerHTML=total===0
    ?'<span>No saved prompts yet.</span>'
    :`<span>üì¶ <strong>${filtered.length}</strong> of <strong>${total}</strong> prompt${total!==1?'s':''} ${filtered.length!==total?'matching filters':'saved on this device'}</span>`;

  const grid=document.getElementById('lib-grid');
  if(filtered.length===0){
    grid.innerHTML=total===0
      ?`<div class="lib-empty"><div style="font-size:52px;margin-bottom:14px">üì≠</div><div class="lib-empty-title">Your library is empty</div><div class="lib-empty-sub">Build a prompt using the P.A.R.T.S. steps,<br>then click <strong>üíæ Save</strong> in the sidebar to add it here.</div></div>`
      :`<div class="lib-empty"><div style="font-size:42px;margin-bottom:12px">üîç</div><div class="lib-empty-title">No matches found</div><div class="lib-empty-sub">Try different keywords or clear the filters.</div></div>`;
    return;
  }

  grid.innerHTML=filtered.map(item=>{
    const tags=(item.tags||'').split(',').map(t=>t.trim()).filter(Boolean);
    const preview=item.prompt.replace(/\n+/g,' ').substring(0,130)+'‚Ä¶';
    const date=new Date(item.savedAt).toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'});
    const tagHTML=tags.length?`<div class="lib-card-tags">${tags.map(t=>`<span class="lib-card-tag">${esc(t)}</span>`).join('')}</div>`:'';
    return `<div class="lib-card" onclick="viewPrompt('${item.id}')">
      <div class="lib-card-hd">
        <div class="lib-card-title">${esc(item.title)}</div>
        <div class="lib-card-meta">
          <span>üìÖ ${date}</span>
          ${item.sector?`<span>üè´ ${esc(item.sector.split(',')[0].trim().substring(0,24))}</span>`:''}
          ${item.grades?`<span>üìö Gr ${esc(item.grades)}</span>`:''}
        </div>
      </div>
      <div class="lib-card-preview">${esc(preview)}</div>
      ${tagHTML}
      <div class="lib-card-actions">
        <button class="lib-card-btn" onclick="event.stopPropagation();copyLib('${item.id}')">üìã Copy</button>
        <button class="lib-card-btn" onclick="event.stopPropagation();viewPrompt('${item.id}')">üëÅ View</button>
        <button class="lib-card-btn del" onclick="event.stopPropagation();deleteLib('${item.id}')">üóë</button>
      </div>
    </div>`;
  }).join('');
}

// SAVE MODAL
function openSaveModal(){
  const txt=document.getElementById('pout').textContent;
  if(!txt||txt.includes('‚ú¶ Your prompt')){alert('Build a prompt first ‚Äî fill in at least Persona, Aim, and Topic.');return;}
  const s=collect();
  let title='';
  if(s.outputType) title+=s.outputType.charAt(0).toUpperCase()+s.outputType.slice(1,36);
  if(s.topic) title+=(title?' ‚Äî ':'')+s.topic.substring(0,40);
  document.getElementById('save-title').value=title;
  const tags=[];
  if(s.sector) tags.push(s.sector.split(',')[0].trim().substring(0,30));
  if(s.grades.length) tags.push('Gr '+s.grades.join('/'));
  if(s.eldLevels.length) tags.push(s.eldLevels.length>1?'Multi-ELD':s.eldLevels[0].split(' ')[0]);
  if(s.langs) tags.push(s.langs.split(',')[0].trim());
  document.getElementById('save-tags').value=tags.join(', ');
  document.getElementById('save-notes').value='';
  document.getElementById('save-preview').textContent=txt.substring(0,220)+'‚Ä¶';
  document.getElementById('save-modal').classList.add('open');
  setTimeout(()=>document.getElementById('save-title').select(),80);
}
function closeSaveModal(e){if(e.target===document.getElementById('save-modal'))closeSaveModalBtn();}
function closeSaveModalBtn(){document.getElementById('save-modal').classList.remove('open');}
function savePrompt(){
  const title=document.getElementById('save-title').value.trim();
  if(!title){alert('Please give this prompt a title.');return;}
  const s=collect();
  const items=loadLib();
  items.push({
    id:'p_'+Date.now(),title,
    tags:document.getElementById('save-tags').value.trim(),
    notes:document.getElementById('save-notes').value.trim(),
    prompt:document.getElementById('pout').textContent,
    sector:s.sector,grades:s.grades.join(', '),
    eldLevels:s.eldLevels.join(', '),langs:s.langs,
    savedAt:new Date().toISOString()
  });
  saveLib(items);
  closeSaveModalBtn();
  const btn=document.querySelector('.bsave');const orig=btn.textContent;
  btn.textContent='‚úÖ Saved!';btn.style.background='#0d7b6e';
  setTimeout(()=>{btn.textContent=orig;btn.style.background='';},2200);
}

// VIEW MODAL
let viewingId=null;
function viewPrompt(id){
  const item=loadLib().find(i=>i.id===id);if(!item)return;
  viewingId=id;
  document.getElementById('view-modal-title').textContent=item.title;
  const date=new Date(item.savedAt).toLocaleDateString('en-US',{month:'long',day:'numeric',year:'numeric'});
  document.getElementById('view-modal-meta').textContent=
    'üìÖ '+date+(item.sector?' ¬∑ üè´ '+item.sector.split(',')[0].trim():'')+
    (item.grades?' ¬∑ üìö Grade '+item.grades:'')+(item.langs?' ¬∑ üåê '+item.langs.split(',').slice(0,3).join(', '):'');
  const tags=(item.tags||'').split(',').map(t=>t.trim()).filter(Boolean);
  document.getElementById('view-modal-tags').innerHTML=tags.map(t=>`<span class="lib-card-tag" style="margin:2px;display:inline-block">${esc(t)}</span>`).join('');
  const notesEl=document.getElementById('view-modal-notes');
  if(item.notes){notesEl.style.display='block';notesEl.textContent='üìù '+item.notes;}else notesEl.style.display='none';
  document.getElementById('view-modal-text').value=item.prompt;
  document.getElementById('view-modal').classList.add('open');
}
function closeViewModal(e){if(e.target===document.getElementById('view-modal'))closeViewModalBtn();}
function closeViewModalBtn(){document.getElementById('view-modal').classList.remove('open');viewingId=null;}
function copyFromView(){
  navigator.clipboard.writeText(document.getElementById('view-modal-text').value).then(()=>{
    const b=document.querySelector('#view-modal .gbtn');const o=b.textContent;
    b.textContent='‚úì Copied!';setTimeout(()=>b.textContent=o,2000);
  });
}
function deleteFromView(){if(!viewingId||!confirm('Delete this prompt from your library?'))return;deleteLib(viewingId);closeViewModalBtn();}
function copyLib(id){const item=loadLib().find(i=>i.id===id);if(item)navigator.clipboard.writeText(item.prompt);}
function deleteLib(id){
  if(!confirm('Delete this prompt from your library? This cannot be undone.'))return;
  saveLib(loadLib().filter(i=>i.id!==id));renderLibrary();
}
function clearLibrary(){
  if(!confirm('Delete ALL saved prompts? This cannot be undone.'))return;
  _ls('rm', LIB_KEY);renderLibrary();
}
function exportLibrary(){
  const items=loadLib();
  if(!items.length){alert('No saved prompts to export.');return;}
  const txt=items.map((item,i)=>{
    const bar='‚ïê'.repeat(50);
    return `${bar}\nPROMPT ${i+1}: ${item.title}\nSaved: ${new Date(item.savedAt).toLocaleString()}\n${item.sector?'Sector: '+item.sector+'\n':''}${item.grades?'Grade: '+item.grades+'\n':''}${item.langs?'Languages: '+item.langs+'\n':''}${item.tags?'Tags: '+item.tags+'\n':''}${item.notes?'Notes: '+item.notes+'\n':''}\n${item.prompt}`;
  }).join('\n\n');
  const blob=new Blob(['CTE AI PROMPT LIBRARY\nCreated by Juliano Calvo\nExported: '+new Date().toLocaleString()+'\n\n'+txt],{type:'text/plain'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);
  a.download='CTE_Prompt_Library_'+new Date().toISOString().slice(0,10)+'.txt';a.click();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  PASSWORD GATE
//  ‚Üì‚Üì‚Üì CHANGE YOUR 4-DIGIT PIN HERE ‚Üì‚Üì‚Üì
const ACCESS_PASSWORD = "2025";
//  ‚Üë‚Üë‚Üë CHANGE YOUR 4-DIGIT PIN HERE ‚Üë‚Üë‚Üë
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let pinValue = '';

function checkPW(){
  if(pinValue === ACCESS_PASSWORD){
    const gate = document.getElementById('pw-gate');
    gate.style.opacity='0';gate.style.transition='opacity .4s ease';
    setTimeout(()=>{gate.style.display='none'},420);
  } else {
    const err = document.getElementById('pw-error');
    err.style.display='block';
    [0,1,2,3].forEach(i=>{
      const d=document.getElementById('pd'+i);
      d.classList.add('shake-dot');
      setTimeout(()=>d.classList.remove('shake-dot'),500);
    });
    setTimeout(()=>{pinValue='';updateDots();err.style.display='none'},800);
  }
}
function togglePWvis(){ /* PIN gate uses dots ‚Äî no text input to toggle */ }
function pinPress(digit){
  if(pinValue.length>=4) return;
  pinValue += digit;
  updateDots();
  if(pinValue.length===4) setTimeout(checkPW, 180);
}
function pinClear(){
  pinValue = pinValue.slice(0,-1);
  updateDots();
  document.getElementById('pw-error').style.display='none';
}
function updateDots(){
  for(let i=0;i<4;i++){
    document.getElementById('pd'+i).classList.toggle('filled', i < pinValue.length);
  }
}
document.addEventListener('keydown', function(e){
  if(document.getElementById('pw-gate').style.display==='none') return;
  if(e.key>='0'&&e.key<='9') pinPress(e.key);
  if(e.key==='Backspace') pinClear();
  if(e.key==='Enter') checkPW();
});

rebuildPrompt();
</script>

<!-- FOOTER -->
<footer class="site-footer">
  <div style="font-size:15px;margin-bottom:6px">‚ú¶</div>
  <div><strong>CTE AI Prompt Builder</strong> ‚Äî Educating For Careers 2026 ¬∑ Amplifying Multilingual Learners Success</div>
  <div style="margin-top:5px">Created by <strong>Juliano Calvo</strong> ¬∑ CTE Conference 2026 ¬∑ Culturally Responsive CTE Pathways That Work</div>
  <div style="margin-top:6px;font-size:11px">¬© 2026 Juliano Calvo ¬∑ All rights reserved ¬∑ For educational use only<br>This tool may not be redistributed, sold, or modified without written permission from the author.</div>
</footer>

</body>
</html>
